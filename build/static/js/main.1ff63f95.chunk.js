(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{203:function(e,t){e.exports="data:image/png;base64,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"},204:function(e,t,a){e.exports=a.p+"static/media/logo.4d62abc3.svg"},220:function(e,t,a){e.exports=a(430)},282:function(e,t,a){},300:function(e,t,a){},383:function(e,t,a){},429:function(e,t,a){},430:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),i=a.n(l),c=a(11),o=a(12),s=a(14),d=a(13),u=a(15),m=a(448),h=a(451),p=a(432),f=a(447),g=(a(225),a(61)),E=function(e){var t=e.children;Object(g.a)(e,["children"]);return r.a.createElement("div",{className:"page page-login"},r.a.createElement("div",{className:"main"},t))},y=function(e){var t=e.component,a=Object(g.a)(e,["component"]);return r.a.createElement(p.a,Object.assign({},a,{render:function(e){return r.a.createElement(E,null,r.a.createElement(t,e))}}))},b=a(434),k=a(433),v=a(88),I=a(9),S=a(450),O=a(159),D=a.n(O),C=function(){function e(){Object(c.a)(this,e),this.login=function(e,t){}}return Object(o.a)(e,null,[{key:"authenticateUser",value:function(e){localStorage.setItem("token",e)}},{key:"isUserAuthenticated",value:function(){return null!==localStorage.getItem("token")}},{key:"deauthenticateUser",value:function(){localStorage.removeItem("token")}},{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"getBearerToken",value:function(){return"Bearer "+this.getToken()}},{key:"getProfile",value:function(){return D()(this.getToken())}},{key:"isTokenExpired",value:function(e){try{return D()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}}]),e}();C.hasRole=function(e,t){return t.some(function(t){return e.roles.includes(t)})},C.getTitle=function(){return C.hasRole(C.getProfile(),["SUPER_ADMIN"])?"Admin":C.hasRole(C.getProfile(),["DATA_ENTRY_ADMIN"])?"Data-admin":C.hasRole(C.getProfile(),["PO_ADMIN"])?"PO-admin":C.hasRole(C.getProfileI(),["DELIVERY_ADMIN"])?"Delivery-admin":"User"};var R=C,x=v.a.SubMenu,A=Object(S.a)(function(e){var t=e.history;return r.a.createElement(v.a,{key:"user",mode:"horizontal",onClick:function(){R.deauthenticateUser(),t.push("/")}},r.a.createElement(x,{title:r.a.createElement(n.Fragment,null,r.a.createElement("span",{style:{color:"#999",marginRight:4}},R.getTitle(),":"),r.a.createElement("span",null,R.getProfile().name))},r.a.createElement(v.a.Item,{key:"SignOut"},r.a.createElement("span",null,"Sign out"))))}),N=a(203),j=a.n(N),w=(a(282),k.a.Header),M=k.a.Sider,L=k.a.Content,F=k.a.Footer,T=v.a.SubMenu,V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).toggle=function(){a.setState({collapsed:!a.state.collapsed})},a.state={collapsed:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(k.a,null,r.a.createElement(M,{trigger:null,collapsible:!0,collapsed:this.state.collapsed,breakpoint:"lg",width:256,theme:"dark"},r.a.createElement("div",{className:"brand"},r.a.createElement("div",{className:"logo",id:"logo"},r.a.createElement(b.a,{to:"/"},r.a.createElement("img",{src:j.a,alt:"logo"}),this.state.collapsed?null:r.a.createElement("h1",null,"Fingertips Admin")))),r.a.createElement("div",{className:"menuContainer"},r.a.createElement(v.a,{key:"mainMenu",mode:"inline",defaultSelectedKeys:["1"],theme:"dark"},r.a.createElement(T,{key:"orders",title:r.a.createElement("span",null,r.a.createElement(I.a,{type:"select"}),r.a.createElement("span",null,"Packing List"))},R.hasRole(R.getProfile(),["SUPER_ADMIN","DATA_ENTRY_ADMIN"])&&r.a.createElement(v.a.Item,{key:"1"},r.a.createElement(b.a,{to:"/purchase-orders/add"},r.a.createElement(I.a,{type:"plus-square"}),r.a.createElement("span",null,"Create Packing List"))),r.a.createElement(v.a.Item,{key:"2"},r.a.createElement(b.a,{to:"/purchase-orders/list"},r.a.createElement(I.a,{type:"hdd"}),r.a.createElement("span",null,"View Packing List")))),r.a.createElement(T,{key:"materialRequests",title:r.a.createElement("span",null,r.a.createElement(I.a,{type:"schedule"}),r.a.createElement("span",null,"Meterial Request"))},R.hasRole(R.getProfile(),["SUPER_ADMIN","DATA_ENTRY_ADMIN"])&&r.a.createElement(v.a.Item,{key:"sub1-1"},r.a.createElement(b.a,{to:"/material-request/add"},r.a.createElement("span",null,"Add Request"))),r.a.createElement(v.a.Item,{key:"sub1-2"},r.a.createElement(b.a,{to:"/material-request/list"},r.a.createElement("span",null,"View Requests")))),r.a.createElement(T,{key:"deliveries",title:r.a.createElement("span",null,r.a.createElement(I.a,{type:"car"}),r.a.createElement("span",null,"Deliveries"))},r.a.createElement(v.a.Item,{key:"delivery"},r.a.createElement(b.a,{to:"/deliveries/add"},r.a.createElement("span",null,"Create Delivery"))),r.a.createElement(v.a.Item,{key:"deliveryList"},r.a.createElement(b.a,{to:"/deliveries"},r.a.createElement("span",null,"Delivery List")))),r.a.createElement(v.a.Item,{key:"4"},r.a.createElement(b.a,{to:"/items"},r.a.createElement(I.a,{type:"database"}),r.a.createElement("span",null,"Material List"))),R.hasRole(R.getProfile(),["SUPER_ADMIN"])&&r.a.createElement(v.a.Item,{key:"5"},r.a.createElement(b.a,{to:"/suppliers"},r.a.createElement(I.a,{type:"shopping-cart"}),r.a.createElement("span",null,"Suppliers"))),R.hasRole(R.getProfile(),["SUPER_ADMIN"])&&r.a.createElement(v.a.Item,{key:"6"},r.a.createElement(b.a,{to:"/packing-types"},r.a.createElement(I.a,{type:"inbox"}),r.a.createElement("span",null,"Packing Types"))),R.hasRole(R.getProfile(),["SUPER_ADMIN"])&&r.a.createElement(v.a.Item,{key:"7"},r.a.createElement(b.a,{to:"/lot-numbers"},r.a.createElement(I.a,{type:"inbox"}),r.a.createElement("span",null,"LOT Numbers(Merge)"))),R.hasRole(R.getProfile(),["SUPER_ADMIN"])&&r.a.createElement(v.a.Item,{key:"8"},r.a.createElement(b.a,{to:"/roles"},r.a.createElement(I.a,{type:"lock"}),r.a.createElement("span",null,"User Roles"))),R.hasRole(R.getProfile(),["SUPER_ADMIN"])&&r.a.createElement(v.a.Item,{key:"9"},r.a.createElement(b.a,{to:"/users"},r.a.createElement(I.a,{type:"user"}),r.a.createElement("span",null,"Users"))),r.a.createElement(v.a.Item,{key:"10"},r.a.createElement(b.a,{to:"/stocks"},r.a.createElement(I.a,{type:"stock"}),r.a.createElement("span",null,"Stocks"))),r.a.createElement(v.a.Item,{key:"bins"},r.a.createElement(b.a,{to:"/bins"},r.a.createElement(I.a,{type:"appstore"}),r.a.createElement("span",null,"Bins")))))),r.a.createElement(k.a,null,r.a.createElement(w,{style:{background:"#fff",padding:0}},r.a.createElement("div",{className:"header"},r.a.createElement("span",{className:"trigger"},r.a.createElement(I.a,{className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle})),r.a.createElement("div",{className:"right"},r.a.createElement(A,null)))),r.a.createElement(L,{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:280}},this.props.children),r.a.createElement(F,{style:{textAlign:"center"}},"Fingertips Admin \xa9 2019 Bottleneck Solutions")))}}]),t}(n.Component),Y=function(e){var t=e.component,a=Object(g.a)(e,["component"]);return r.a.createElement(p.a,Object.assign({},a,{render:function(e){return R.loggedIn()?r.a.createElement(V,null,r.a.createElement(t,e)):r.a.createElement(f.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},P=a(440),W=a(435),q=a(216),B=a(89),U=a(41),K=a(63),z=a.n(K),_=function(e){e.links,e.copyright;return r.a.createElement("footer",null,r.a.createElement("div",null,"Fingertips Admin \xa9 2019 Bottleneck Solutions"))},G=a(204),Q=a.n(G),X=(a(300),P.a.Item),J=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={redirectToReferrer:!1,loginErrorVisible:!1},a.handleOk=function(){a.props.form.validateFieldsAndScroll(function(e,t){e||z.a.post("http://localhost:3001/login",{email:t.email,password:t.password}).then(function(e){e.data&&(R.setToken(e.data.token),a.setState({redirectToReferrer:!0}))}).catch(function(e){a.setState({loginErrorVisible:!0})})})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=(this.props.location.state||{from:{pathname:"/"}}).from,a=this.state,l=a.redirectToReferrer,i=a.loginErrorVisible;return l?r.a.createElement(f.a,{to:t}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"LoginForm"},r.a.createElement("div",{className:"LoginForm-logo"},r.a.createElement("img",{alt:"logo",src:Q.a}),r.a.createElement("span",null,"Fingertips Admin")),i&&r.a.createElement(W.a,{message:"Bad credentials",type:"error",showIcon:!0,style:{marginBottom:10}}),r.a.createElement("form",null,r.a.createElement(X,{hasFeedback:!0},e("email",{rules:[{required:!0}]})(r.a.createElement(q.a,{onPressEnter:this.handleOk,placeholder:"Email address"}))),r.a.createElement(X,{hasFeedback:!0},e("password",{rules:[{required:!0}]})(r.a.createElement(q.a,{type:"password",onPressEnter:this.handleOk,placeholder:"Password"}))),r.a.createElement(B.a,null,r.a.createElement(U.a,{type:"primary",onClick:this.handleOk},"Sign in")))),r.a.createElement("div",{className:"footer"},r.a.createElement(_,null)))}}]),t}(n.Component),H=P.a.create()(J),Z=function(){return r.a.createElement("div",null,"Dashboard Page")},$=a(44),ee=a(445),te=a(64),ae=a(443),ne=a(217),re=a(446),le=a(439),ie=a(48),ce=a(438),oe=a(437),se=a(126),de=a(436),ue=a(163),me=a.n(ue),he=a(210);function pe(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(he.a)(me.a.mark(function e(t){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status&&201!==t.status){e.next=2;break}return e.abrupt("return",t.data);case 2:if(400!==t.status){e.next=5;break}throw console.log("Validation: ",t),new Error("Server-side validation error.");case 5:throw new Error("Bad response : ".concat(t.status));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ge(e){throw console.error("API call failed. "+e),e}var Ee="dev"===Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_STAGE?"http://localhost:3001":"",ye=z.a.create({baseURL:Ee});ye.interceptors.request.use(function(e){return R.loggedIn()&&(e.headers.Authorization=R.getBearerToken()),e});var be=!1,ke=[];ye.interceptors.response.use(function(e){return e},function(e){var t=e.config,a=e.response,n=t;return a&&401===a.status?(be||(be=!0,z.a.post("".concat(Ee,"/oauth/token"),"grant_type=refresh_token&refresh_token=".concat(R.getResetToken()),{auth:{username:"SL",password:"Sl43&$^fdgd*+!!@#Agdo4Ged"}}).then(function(e){R.setSession(e.data),be=!1,ve(e.data.access_token)}).catch(function(e){return R.deauthenticateUser(),Promise.reject(e)})),new Promise(function(e){Ie(function(t){n.headers.Authorization="Bearer "+t,e(z()(n))})})):Promise.reject(e)});var ve=function(e){ke.forEach(function(t){return t(e)}),ke=[]},Ie=function(e){ke.push(e)},Se=ye,Oe="/api/purchase-orders";function De(e){return Se.get("".concat(Ee).concat(Oe,"/").concat(e)).then(pe).catch(ge)}function Ce(e){return Se.delete("".concat(Ee).concat(Oe,"/").concat(e)).then(pe).catch(ge)}var Re="/api/item-categories";function xe(){return Se.get("".concat(Ee).concat(Re)).then(pe).catch(ge)}var Ae="/api/material-requests";var Ne="/api/bins";function je(){return Se.get("".concat(Ee).concat(Ne)).then(pe).catch(ge)}function we(e){return Se.get("".concat(Ee).concat(Ne,"/stocks/").concat(e)).then(pe).catch(ge)}var Me=a(2),Le=a.n(Me),Fe=(a(383),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.children,n=e.loading,l=void 0!==n&&n,i=e.inner,c=void 0!==i&&i,o=e.error,s=void 0===o?null:o,d=s;return null!=s&&(d=s,s.respose?d=s.respose:s.request&&(d=JSON.parse(s.request.responseText).error_description||s.request.statusText)),r.a.createElement("div",{className:Le()(t,{contentInner:c}),style:l?{height:"calc(100vh - 184px)",overflow:"hidden"}:null},s&&r.a.createElement(W.a,{message:"Error",description:d,type:"error",showIcon:!0,style:{marginBottom:20}}),a)}}]),t}(n.Component)),Te=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).itemIndex=0,a.state={itemList:[],materialList:[],searchResults:[],searchVisible:!1,stockItems:[],selectedRowKeys:[],stockLoading:!1,requestSaving:!1},a.getAllMaterials=function(){xe().then(function(e){a.setState({materialList:e.data})}).catch(function(e){ee.a.error("".concat(e))})},a.createMaterialRequest=function(e){var t;(t=e,Se.post("".concat(Ee).concat(Ae),t).then(pe).catch(ge)).then(function(){a.setState({requestSaving:!1}),a.props.history.push("/material-request/list")}).catch(function(e){a.setState({requestSaving:!1}),ee.a.error("".concat(e))})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||function(){a.setState({requestSaving:!0});var n=a.state,r=n.itemList,l=n.stockItems,i=n.selectedRowKeys,c=n.materialList,o=[],s=!0,d=!1,u=void 0;try{for(var m,h=function(){var e=m.value,a=l.filter(function(a){return a.itemCode===t.materialCode[e.key]&&a.lotNumber===t.lotNumber[e.key]}).map(function(e){return e._id}).filter(function(e){return i.includes(e)}),n={};n.item=c.find(function(a){return a.code===t.materialCode[e.key]})._id,n.lotNumber=t.lotNumber[e.key],n.units=t.units[e.key],n.stockItems=a,o.push(n)},p=r[Symbol.iterator]();!(s=(m=p.next()).done);s=!0)h()}catch(e){d=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(d)throw u}}t.items=o,t.stockItems=i,delete t.lotNumber,delete t.units,console.log("Material request: ",t),a.createMaterialRequest(t)}()})},a.showSearchDrawer=function(){a.setState({searchVisible:!0})},a.handleAddItem=function(){var e={};e.key=a.itemIndex,e.lotNumbers=[],e.lotNumber=null,a.setState({itemList:[].concat(Object($.a)(a.state.itemList),[e])}),a.itemIndex+=1},a.handleItemCodeChange=function(e,t){if(e){var n=a.state.itemList;Object.assign(n[n.findIndex(function(e){return e.key===t.key})],Object.assign({},t,{lotNumbers:[],lotNumber:""})),a.setState({itemList:n}),(r=e,Se.get("".concat(Ee).concat(Oe,"/items/lot-numbers?itemCode=").concat(r)).then(pe).catch(ge)).then(function(e){var r=Object.assign({},t,{lotNumbers:e.data});Object.assign(n[n.findIndex(function(e){return e.key===t.key})],r),a.setState({itemList:n})}).catch(function(e){Object.assign(n[n.findIndex(function(e){return e.key===t.key})],Object.assign({},t,{lotNumbers:[]})),ee.a.error("".concat(e))})}var r},a.handleOnClose=function(){a.setState({searchVisible:!1})},a.handleRemoveItem=function(e){var t=a.state,n=t.itemList,r=t.stockItems,l=t.selectedRowKeys;n.includes(e)&&n.splice(n.indexOf(e),1);var i=a.props.form.getFieldsValue(["lotNumber"]).lotNumber[e.key];if(i){var c=r.filter(function(e){return e.lotNumber===i});r=r.filter(function(e){return!c.includes(e)}),l=l.filter(function(e){return!Boolean(c.find(function(t){return t._id===e}))})}a.setState({itemList:n,stockItems:r,selectedRowKeys:l})},a.handleShowStockItems=function(e){var t,n,r=a.props.form.getFieldsValue(["lotNumber"]),l=a.props.form.getFieldsValue(["materialCode"]),i=r.lotNumber[e.key],c=l.materialCode[e.key];if(i){if(a.state.stockItems.length>0&&Boolean(a.state.stockItems.find(function(e){return e.lotNumber===i})))return ee.a.error("Sorry, Stock items are already listed down.");a.setState({stockLoading:!0}),(t=c,n=i,Se.get("".concat(Ee).concat(Ne,"/stocks?itemCode=").concat(t,"&lotNumber=").concat(n)).then(pe).catch(ge)).then(function(e){e.data.length>0?a.setState({stockItems:[].concat(Object($.a)(a.state.stockItems),Object($.a)(e.data)),stockLoading:!1}):(a.setState({stockLoading:!1}),ee.a.warning("Sorry, No stocks available for given Merge(".concat(i,") and Item code(").concat(c,")")))}).catch(function(e){a.setState({stockLoading:!1}),ee.a.error("".concat(e))})}else ee.a.error("Please select valid LOT Number(Merge)")},a.onSelectChange=function(e){var t=a.state,n=t.stockItems,r=t.itemList,l=a.props.form.getFieldsValue(["lotNumber"]),i=[],c=!0,o=!1,s=void 0;try{for(var d,u=function(){var e=d.value,t=n.find(function(t){return t._id===e}),a=l.lotNumber.indexOf(t.lotNumber);i.push(a)},m=e[Symbol.iterator]();!(c=(d=m.next()).done);c=!0)u()}catch(b){o=!0,s=b}finally{try{c||null==m.return||m.return()}finally{if(o)throw s}}var h=!0,p=!1,f=void 0;try{for(var g,E=function(){var e=g.value,t=i.filter(function(t){return t===e.key}).length,n=a.props.form.getFieldsValue(["units"]).units;n.splice(e.key,0,t),a.props.form.setFieldsValue({units:n})},y=r[Symbol.iterator]();!(h=(g=y.next()).done);h=!0)E()}catch(b){p=!0,f=b}finally{try{h||null==y.return||y.return()}finally{if(p)throw f}}a.setState({selectedRowKeys:e})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllMaterials()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.itemList,l=a.materialList,i=a.stockItems,c=a.selectedRowKeys,o=a.stockLoading,s=a.requestSaving,d={selectedRowKeys:c,onChange:this.onSelectChange,getCheckboxProps:function(e){return{disabled:"RESERVED"===e.status||"PENDING"===e.detailsStatus}}},u=[{title:"Item Code",dataIndex:"materialCode",key:"materialCode",width:"30%",render:function(a,n){return r.a.createElement(P.a.Item,{key:n.key,style:{marginBottom:"0"},hasFeedback:!0},t("materialCode[".concat(n.key,"]"),{rules:[{required:!0,message:"Material code is required."}]})(r.a.createElement(te.a,{showSearch:!0,suffixIcon:r.a.createElement(I.a,{type:"search"}),placeholder:"Material code",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!0,notFoundContent:null,allowClear:!0,loading:!0,onChange:function(t){e.handleItemCodeChange(t,n)}},l.map(function(e){return r.a.createElement(te.a.Option,{key:e.code},e.code)}))))}},{title:"Merge",dataIndex:"lotNumber",key:"lotNumber",width:"30%",render:function(e,a){return r.a.createElement(P.a.Item,{key:a.key,style:{marginBottom:"0"},hasFeedback:!0},t("lotNumber[".concat(a.key,"]"),{rules:[{required:!0,message:"Please enter merge number"}]})(r.a.createElement(te.a,{showSearch:!0,suffixIcon:r.a.createElement(I.a,{type:"search"}),placeholder:"LOT Number(Merge)",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!0,notFoundContent:null,allowClear:!0,loading:!0},a.lotNumbers.map(function(e){return r.a.createElement(te.a.Option,{key:e},e)}))))}},{title:"# of Box",dataIndex:"units",key:"units",render:function(e,a){return r.a.createElement(P.a.Item,{key:a.key,style:{marginBottom:"0"},hasFeedback:!0},t("units[".concat(a.key,"]"),{rules:[{required:!0,message:"Please enter #of box"}]})(r.a.createElement(ae.a,{placeholder:"#of box",disabled:!0})))}},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{type:"primary",onClick:function(t){t.stopPropagation(),e.handleShowStockItems(a)},icon:"search"},"Stocks"),r.a.createElement(U.a,{type:"primary",onClick:function(t){t.stopPropagation(),e.handleRemoveItem(a)},icon:"close",style:{marginLeft:5}}))}}],m=[{title:"LOT Number(Merge)",dataIndex:"orderItem.lotNumber",key:"orderItem.lotNumber"},{title:"Bin",dataIndex:"bin.code",key:"bin.code"},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight"},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight"},{title:"Cones",dataIndex:"cones",key:"cones"},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){var a="";return"AVAILABLE"===e&&(a="#87d068"),"RESERVED"===e&&(a="#2db7f5"),"DISPATCHED"===e&&(a="#108ee9"),"FACTORY_RECEIVED"===e&&(a="#f50"),r.a.createElement(ne.a,{color:a},e)}}];return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"hdd"}),r.a.createElement("span",null,"Add Material Request"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(le.a,{title:"Material Request Details",bordered:!1},r.a.createElement(P.a,{layout:"vertical",onSubmit:this.handleSubmit},r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{md:8,sm:12},r.a.createElement(P.a.Item,{label:"Request Ref #",hasFeedback:!0},t("refNumber",{rules:[{required:!0,message:"Meterial request ref # is required."}]})(r.a.createElement(q.a,{placeholder:"Ref Number"})))),r.a.createElement(ie.a,{md:8,sm:4},r.a.createElement(P.a.Item,{label:"Request Date",hasFeedback:!0},t("requestedDate",{rules:[{required:!0,message:"Valid date is required."}]})(r.a.createElement(ce.a,{placeholder:"Request date",format:"YYYY-MM-DD"})))),r.a.createElement(ie.a,{md:8,sm:8},r.a.createElement(P.a.Item,{label:"Delivery Location",hasFeedback:!0},t("deliveryLocation",{rules:[{required:!0,message:"Please enter delivery location"}]})(r.a.createElement(q.a,null))))),r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{md:8,sm:24},r.a.createElement(P.a.Item,{label:"Contact Persion Name",hasFeedback:!0},t("contactPerson",{rules:[{required:!0,message:"Please enter contact person name"}]})(r.a.createElement(q.a,null)))),r.a.createElement(ie.a,{md:8,sm:24},r.a.createElement(P.a.Item,{label:"Contact Number",hasFeedback:!0},t("contactNumber",{rules:[{required:!0,message:"Please enter contact number"}]})(r.a.createElement(q.a,null))))),n.length>0&&r.a.createElement(oe.a,{pagination:!1,columns:u,dataSource:n,size:"middle"}),r.a.createElement(U.a,{style:{width:"100%",marginTop:16,marginBottom:16,color:"white",backgroundColor:"#13c2c2"},type:"dashed",onClick:this.handleAddItem,icon:"plus"},"Add Item"),r.a.createElement(se.a,{tip:"Stock loading...",spinning:o},i.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,{orientation:"left"},"Available Stocks"),r.a.createElement(oe.a,{rowKey:"_id",rowSelection:d,columns:m,dataSource:i,pagination:!1}))),r.a.createElement(de.a,null),r.a.createElement(U.a,{type:"primary",htmlType:"submit",disabled:0===c.length,loading:s},"Submit Request")))))}}]),t}(n.Component),Ve=P.a.create()(Te),Ye=a(442),Pe=a(7),We=a.n(Pe),qe=a(25),Be=a(131),Ue=function(e){var t=e.onMenuClick,a=e.menuOptions,n=void 0===a?[]:a,l=e.buttonStyle,i=e.dropdownProps,c=n.map(function(e){return r.a.createElement(v.a.Item,{key:e.key},e.name)});return r.a.createElement(Be.a,Object.assign({overlay:r.a.createElement(v.a,{onClick:t},c)},i),r.a.createElement(U.a,{style:Object(qe.a)({border:"none"},l)},r.a.createElement(I.a,{style:{marginRight:2},type:"bars"}),r.a.createElement(I.a,{type:"down"})))},Ke=Object(qe.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),ze=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){var n;e||(a.props.showSearchLoading(!0),(n=t,Se.post("".concat(Ee).concat(Ae,"/filter"),n).then(pe).catch(ge)).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){ee.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(P.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{xl:{span:6},md:{span:12}},e("refNumber")(r.a.createElement(q.a.Search,{placeholder:"Material Request Number"}))),r.a.createElement(ie.a,Object.assign({},Ke,{xl:{span:18},md:{span:12}}),r.a.createElement(B.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(U.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(U.a,{onClick:this.handleReset},"Reset"))))))}}]),t}(n.Component),_e=P.a.create()(ze),Ge=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={materialRequests:[],loading:!1},a.getMaterialRequests=function(){a.setState({loading:!0}),Se.get("".concat(Ee).concat(Ae)).then(pe).catch(ge).then(function(e){a.setState({materialRequests:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))})},a.handleDelete=function(e){a.setState({loading:!1}),function(e){return Se.delete("".concat(Ee).concat(Ae,"/").concat(e)).then(pe).catch(ge)}(e).then(function(){a.setState({loading:!1}),window.location.reload()}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))})},a.handleMenuClick=function(e,t){"delete"===t.key?(a.deleteItem(e),a.getMaterialRequests()):"view"!==t.key&&"deliveryRequest"!==t.key||a.props.history.push("/material-request/view/".concat(e._id))},a.deleteItem=function(e){Ye.a.confirm({title:"Delete request",content:"Do you want to delete this request?",onOk:function(){return a.handleDelete(e._id)}})},a.getOperationTasks=function(e){var t=[];return t.push({key:"view",name:"View"}),t.push({key:"delete",name:"Delete"}),t},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({materialRequests:e,loading:!1})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getMaterialRequests()}},{key:"render",value:function(){var e=this,t=this.state,a=t.materialRequests,n=t.loading,l=[{title:"Reqest Number",dataIndex:"refNumber",key:"refNumber"},{title:"Delivery Location",dataIndex:"deliveryLocation",key:"deliveryLocation"},{title:"Requested Date",dataIndex:"requestedDate",key:"requestedDate",render:function(e){return We()(e).format("YYYY-MM-DD")}},{title:"Created Date",dataIndex:"createdDate",key:"createdDate",render:function(e){return We()(e).format("YYYY-MM-DD")}},{title:"Contact Person",dataIndex:"contactPerson",key:"contactPerson"},{title:"Contact Number",dataIndex:"contactNumber",key:"contactNumber"},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){var a="";return"PENDING"===e&&(a="volcano"),"PARTIALY_DISPATCHED"===e&&(a="#2db7f5"),"DISPATCHED"===e&&(a="#bae637"),"PARTIALY_RECEIVED"===e&&(a="#135200"),"COMPLETE"===e&&(a="#87d068"),r.a.createElement(ne.a,{color:a},e)}},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Ue,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:e.getOperationTasks(a)})}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"hdd"}),r.a.createElement("span",null,"View Material Requests"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(_e,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults}),r.a.createElement(oe.a,{loading:n,rowKey:"_id",size:"middle",columns:l,dataSource:a,style:{marginTop:15}})))}}]),t}(n.Component),Qe=a(452),Xe=a(453),Je=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={materialRequest:{},stockItems:[],loading:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;this.setState({loading:!0}),(e=this.props.match.params.id,Se.get("".concat(Ee).concat(Ae,"/").concat(e)).then(pe).catch(ge)).then(function(e){var a=e.data,n=a.items.map(function(e){return e.stockItems}).reduce(function(e,t){return e.concat(t)});t.setState({materialRequest:a,stockItems:n,loading:!1})}).catch(function(e){t.setState({loading:!1}),ee.a.error("".concat(e))})}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.materialRequest,n=e.stockItems,l=[{title:"LOT Number(Merge)",dataIndex:"lotNumber",key:"lotNumber"},{title:"Bin",dataIndex:"binCode",key:"binCode"},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight"},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight"},{title:"Cones",dataIndex:"cones",key:"cones"},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){var a="";return"AVAILABLE"===e&&(a="#87d068"),"RESERVED"===e&&(a="#2db7f5"),"DISPATCHED"===e&&(a="#108ee9"),"FACTORY_RECEIVED"===e&&(a="#f50"),r.a.createElement(ne.a,{color:a},e)}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,{href:"/material-request/list"},r.a.createElement(I.a,{type:"hdd"}),r.a.createElement("span",null,"View Material Requests")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"lock"}),r.a.createElement("span",null,"Material Request Details"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(se.a,{tip:"Loading...",spinning:t},r.a.createElement(le.a,{title:"Material Request Details",bordered:!1},r.a.createElement(Qe.a,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(Qe.a.Item,{label:"Reference Number"},a.refNumber),r.a.createElement(Qe.a.Item,{label:"Requested Date"},We()(a.requestedDate).format("YYYY-MM-DD")),r.a.createElement(Qe.a.Item,{label:"Delivery Location"},a.deliveryLocation),r.a.createElement(Qe.a.Item,{label:"Contact Person"},a.contactPerson),r.a.createElement(Qe.a.Item,{label:"Contact Number"},a.contactNumber),r.a.createElement(Qe.a.Item,{label:"Status",span:3},r.a.createElement(Xe.a,{status:"processing",text:a.status}))),r.a.createElement(oe.a,{rowKey:"_id",pagination:!1,dataSource:a.items,columns:[{title:"Item Description",key:"description",render:function(e,t){return"".concat(t.item.code," # ").concat(t.item.name)}},{title:"Merge",dataIndex:"lotNumber",key:"lotNumber"},{title:"# of Box",dataIndex:"units",key:"units"}],title:function(){return r.a.createElement("h3",null,"Requested Items")},bordered:!0}),n.length>0&&r.a.createElement(oe.a,{rowKey:"_id",pagination:!1,dataSource:n,columns:l,size:"middle",title:function(){return r.a.createElement("h3",null,"Stock Items")},bordered:!0})))))}}]),t}(n.Component),He="/api/packing-types";function Ze(){return Se.get("".concat(Ee).concat(He)).then(pe).catch(ge)}var $e=Object(qe.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),et=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={packingTypes:[]},a.getAllPackingTypes=function(){Ze().then(function(e){a.setState({packingTypes:e.data})}).catch(function(e){ee.a.error("".concat(e))})},a.handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){var n;e||(a.props.showSearchLoading(!0),(n=t,Se.post("".concat(Ee).concat(Re,"/filter"),n).then(pe).catch(ge)).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){ee.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllPackingTypes()}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.onAddItem,n=t.getFieldDecorator;return r.a.createElement(P.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{xl:{span:8},md:{span:12}},n("code")(r.a.createElement(q.a.Search,{placeholder:"Material code"}))),r.a.createElement(ie.a,Object.assign({},$e,{xl:{span:16},md:{span:12}}),r.a.createElement(B.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(U.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(U.a,{onClick:this.handleReset},"Reset")),R.hasRole(R.getProfile(),["SUPER_ADMIN"])&&r.a.createElement(U.a,{type:"dashed",onClick:a},"Create")))))}}]),t}(n.Component),tt=P.a.create()(et),at=P.a.Item,nt=te.a.Option,rt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={items:[],loading:!1,modalVisible:!1,modalType:"create",currentItem:{},packingTypes:[]},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.showModal=function(){a.setState({modalVisible:!0,currentItem:{},modalType:"create"})},a.showEditModal=function(e){e.packingType=e.packingType._id,a.setState({currentItem:e,modalType:"update",modalVisible:!0})},a.handleCancel=function(){a.setState({modalVisible:!1})},a.handleModalSubmit=function(e){e.preventDefault();var t=a.props.form,n=a.state.currentItem,r=n?n._id:"";t.validateFields(function(e,n){var l;e||(r?function(e,t){return Se.put("".concat(Ee).concat(Re,"/").concat(e),t).then(pe).catch(ge)}.updateMaterial(r,n).then(function(){t.resetFields(),a.setState({modalVisible:!1}),a.getAllMaterials()}).catch(function(e){ee.a.error("".concat(e))}):(l=n,Se.post("".concat(Ee).concat(Re),l).then(pe).catch(ge)).then(function(){t.resetFields(),a.setState({modalVisible:!1}),a.getAllPackingTypes()}).catch(function(e){ee.a.error("".concat(e))}))})},a.handleDelete=function(e){Ce(e).then(function(e){a.getAllPackingTypes()}).catch(function(e){return ee.a.error("".concat(e))})},a.handleMenuClick=function(e,t){"edit"===t.key?(a.setState({currentItem:e}),a.showEditModal(e)):"delete"===t.key&&a.deleteItem(e)},a.deleteItem=function(e){Ye.a.confirm({title:"Delete measuring type",content:"Do you want to delete this measuring type?",onOk:function(){return a.handleDelete(e._id)}})},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({items:e,loading:!1})},a.getAllMaterials=function(){a.setState({loading:!0}),xe().then(function(e){a.setState({items:e.data,loading:!1})}).catch(function(e){ee.a.error("".concat(e))})},a.getAllPackingTypes=function(){Ze().then(function(e){a.setState({packingTypes:e.data})}).catch(function(e){ee.a.error("".concat(e))})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllMaterials(),this.getAllPackingTypes()}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.loading,l=t.modalVisible,i=t.packingTypes,c=t.currentItem,o=void 0===c?{}:c,s=[{title:"Material Code",dataIndex:"code",key:"code"},{title:"Name",dataIndex:"name",key:"name"},{title:"Packing Type",dataIndex:"packingType",key:"packingType",render:function(e){return e.name}},{title:"CreatedAt",dataIndex:"createdAt",key:"createdAt",render:function(e){return We()(e).format("YYYY-MM-DD")}},{title:"CreatedBy",dataIndex:"createdBy",key:"createdBy",render:function(e){return e.firstName}},{title:"UpdatedBy",dataIndex:"updatedBy",key:"updatedBy",render:function(e){return e?e.firstName:""}}];R.hasRole(R.getProfile(),["SUPER_ADMIN"])&&s.push({title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Ue,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"},{key:"delete",name:"Delete"}]})}});var d=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"database"}),r.a.createElement("span",null,"Material List"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(tt,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults,onAddItem:this.showModal}),r.a.createElement(oe.a,{loading:n,rowKey:"_id",size:"small",columns:s,dataSource:a,pagination:{pageSize:25}}),r.a.createElement(Ye.a,{item:o,visible:l,maskClosable:!1,title:"create"===this.state.modalType?"Create Material Item":"Update Material Item",centered:!0,onCancel:this.handleCancel,onOk:this.handleModalSubmit},r.a.createElement(P.a,{onSubmit:e.handleSubmit},r.a.createElement(at,Object.assign({label:"Material Code",hasFeedback:!0},e.formLayout),d("code",{initialValue:e.state.currentItem.code,rules:[{required:!0}]})(r.a.createElement(q.a,{placeholder:"Material code"}))),r.a.createElement(at,Object.assign({label:"Name",hasFeedback:!0},e.formLayout),d("name",{initialValue:e.state.currentItem.name,rules:[{required:!0}]})(r.a.createElement(q.a,{placeholder:"Item name"}))),r.a.createElement(at,Object.assign({label:"Packing Type",hasFeedback:!0},e.formLayout),d("packingType",{initialValue:e.state.currentItem.packingType,rules:[{required:!0}]})(r.a.createElement(te.a,{placeholder:"Search packing type"},i.map(function(e){return r.a.createElement(nt,{value:e._id,key:e._id},e.name)})))),r.a.createElement(at,Object.assign({label:"Made Of",hasFeedback:!0},e.formLayout),d("madeOf",{initialValue:e.state.currentItem.madeOf,rules:[{required:!1}]})(r.a.createElement(q.a,{placeholder:"Made of"}))),r.a.createElement(at,Object.assign({label:"Colour",hasFeedback:!0},e.formLayout),d("colour",{initialValue:e.state.currentItem.colour,rules:[{required:!1}]})(r.a.createElement(q.a,{placeholder:"Colour"})))))))}}]),t}(n.Component),lt=P.a.create()(rt),it=P.a.Item,ct={labelCol:{span:6},wrapperCol:{span:14}},ot=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleOk=function(){var e=a.props,t=e.item,n=void 0===t?{}:t,r=e.onOk,l=e.form,i=l.validateFields,c=l.getFieldsValue;i(function(e){if(!e){var t=Object(qe.a)({},c,{key:n.key});r(t)}})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=void 0===t?{}:t,n=e.form,l=e.onOk,i=Object(g.a)(e,["item","form","onOk"]),c=n.getFieldDecorator;return r.a.createElement(Ye.a,Object.assign({},i,{onOk:l}),r.a.createElement(P.a,{layout:"horizontal"},r.a.createElement(it,Object.assign({label:"Name",hasFeedback:!0},ct),c("name",{initialValue:a.name,rules:[{required:!0}]})(r.a.createElement(q.a,null))),r.a.createElement(it,Object.assign({label:"Lane",hasFeedback:!0},ct),c("lane",{initialValue:a.lane,rules:[{required:!0}]})(r.a.createElement(q.a,null))),r.a.createElement(it,Object.assign({label:"State",hasFeedback:!0},ct),c("state",{initialValue:a.state,rules:[{required:!0}]})(r.a.createElement(q.a,null))),r.a.createElement(it,Object.assign({label:"Country",hasFeedback:!0},ct),c("country",{initialValue:a.country,rules:[{required:!0}]})(r.a.createElement(q.a,null)))))}}]),t}(n.Component),st=P.a.create()(ot),dt="/api/suppliers";function ut(){return Se.get("".concat(Ee).concat(dt)).then(pe).catch(ge)}var mt=Object(qe.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),ht=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){var n;e||(a.props.showSearchLoading(!0),(n=t,Se.post("".concat(Ee).concat(dt,"/filter"),n).then(pe).catch(ge)).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){ee.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onAddItem,n=t.getFieldDecorator;return r.a.createElement(P.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{xl:{span:4},md:{span:12}},n("name")(r.a.createElement(q.a.Search,{placeholder:"Search name"}))),r.a.createElement(ie.a,{xl:{span:4},md:{span:12}},n("lane")(r.a.createElement(q.a.Search,{placeholder:"Search lane"}))),r.a.createElement(ie.a,{xl:{span:4},md:{span:12}},n("state")(r.a.createElement(q.a.Search,{placeholder:"Search state"}))),r.a.createElement(ie.a,{xl:{span:4},md:{span:12}},n("country")(r.a.createElement(q.a.Search,{placeholder:"Search country"}))),r.a.createElement(ie.a,Object.assign({},mt,{xl:{span:8},md:{span:12}}),r.a.createElement(B.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(U.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(U.a,{onClick:this.handleReset},"Reset")),r.a.createElement(U.a,{type:"dashed",onClick:a},"Create")))))}}]),t}(n.Component),pt=P.a.create()(ht),ft="/api/users";function gt(e){return Se.delete("".concat(Ee).concat(ft,"/").concat(e)).then(pe).catch(ge)}var Et=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={suppliers:[],loading:!0,modalVisible:!1,modalType:"create",currentItem:{}},a.getAllSuppliers=function(){ut().then(function(e){a.setState({suppliers:e.data,loading:!1})}).catch(function(e){ee.a.error("".concat(e))})},a.showModal=function(){a.setState({modalVisible:!0})},a.showEditModal=function(e){a.setState({modalVisible:!0,currentItem:e,modalType:"update"})},a.handleCancel=function(){a.setState({modalVisible:!1})},a.handleOk=function(){var e=a.formRef.props.form,t=a.state.currentItem;e.validateFields(function(n,r){var l;n||(t._id?function(e,t){return Se.put("".concat(Ee).concat(dt,"/").concat(e),t).then(pe).catch(ge)}(t._id,r).then(function(t){e.resetFields(),a.setState({modalVisible:!1}),a.getAllSuppliers()}).catch(function(e){ee.a.error("".concat(e))}):(l=r,Se.post("".concat(Ee).concat(dt),l).then(pe).catch(ge)).then(function(t){e.resetFields(),a.setState({modalVisible:!1}),a.getAllSuppliers()}).catch(function(e){ee.a.error("".concat(e))}))})},a.handleDelete=function(e){gt(e).then(function(e){a.getAllSuppliers()}).catch(function(e){ee.a.error("".concat(e))})},a.deleteItem=function(e){Ye.a.confirm({title:"Delete supplier",content:"Do you want to delete this supplier?",onOk:function(){return a.handleDelete(e._id)}})},a.handleMenuClick=function(e,t){"edit"===t.key?(a.setState({currentItem:e}),a.showEditModal(e)):"delete"===t.key&&a.deleteItem(e)},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({suppliers:e,loading:!1})},a.saveFormRef=function(e){a.formRef=e},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllSuppliers()}},{key:"render",value:function(){var e=this,t=this.state,a=t.suppliers,n=t.loading,l=t.currentItem,i=void 0===l?{}:l,c=t.modalVisible,o=[{title:"Name",dataIndex:"name",key:"name"},{title:"Lane",dataIndex:"lane",key:"lane"},{title:"State",dataIndex:"state",key:"state"},{title:"Country",dataIndex:"country",key:"country"},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Ue,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"},{key:"delete",name:"Delete"}]})}}],s={item:"create"===this.state.modalType?{}:i,visible:this.state.modalVisible,maskClosable:!1,title:"create"===this.state.modalType?"Create User":"Update User",centered:!0};return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"shopping-cart"}),r.a.createElement("span",null,"Suppliers"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(pt,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults,onAddItem:this.showModal}),r.a.createElement(oe.a,{loading:n,rowKey:"_id",columns:o,dataSource:a}),c&&r.a.createElement(st,Object.assign({},s,{onCancel:this.handleCancel,onOk:this.handleOk,wrappedComponentRef:this.saveFormRef}))))}}]),t}(n.Component),yt=P.a.create()(Et),bt={"Content-Type":"application/json"};R.getToken()&&(bt.Authorization="Bearer ".concat(R.getToken()));var kt=Object(qe.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),vt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){e||(a.props.showSearchLoading(!0),z.a.post("/packing-types/filter",t,{headers:bt}).then(function(e){e.data&&a.props.onSearchResults(e.data.data)}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onAddItem,n=t.getFieldDecorator;return r.a.createElement(P.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{xl:{span:4},md:{span:12}},n("name")(r.a.createElement(q.a.Search,{placeholder:"Search type name"}))),r.a.createElement(ie.a,Object.assign({},kt,{xl:{span:20},md:{span:12}}),r.a.createElement(B.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(U.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(U.a,{onClick:this.handleReset},"Reset")),r.a.createElement(U.a,{type:"dashed",onClick:a},"Create")))))}}]),t}(n.Component),It=P.a.create()(vt),St=P.a.Item,Ot=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={items:[],loading:!0,modalVisible:!1,modalType:"create",currentItem:{}},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.getAllPackingType=function(){a.setState({loading:!0}),Ze().then(function(e){a.setState({items:e.data,loading:!1})}).catch(function(e){ee.a.error("".concat(e))})},a.showModal=function(){a.setState({modalVisible:!0})},a.showEditModal=function(e){a.setState({modalVisible:!0,currentItem:e,modalType:"update"})},a.handleCancel=function(){a.setState({modalVisible:!1})},a.handleModalSubmit=function(e){e.preventDefault();var t=a.props.form,n=a.state.currentItem,r=n?n._id:"";t.validateFields(function(e,n){var l;e||(r?function(e,t){return Se.put("".concat(Ee).concat(He,"/").concat(e),t).then(pe).catch(ge)}(r,n).then(function(e){t.resetFields(),a.setState({modalVisible:!1}),a.getAllPackingType()}).catch(function(e){ee.a.error("".concat(e))}):(l=n,Se.post("".concat(Ee).concat(He),l).then(pe).catch(ge)).then(function(e){t.resetFields(),a.setState({modalVisible:!1}),a.getAllPackingType()}).catch(function(e){ee.a.error("".concat(e))}))})},a.handleDelete=function(e){gt(e).then(function(e){a.getAllPackingType()}).catch(function(e){ee.a.error("".concat(e))})},a.deleteItem=function(e){Ye.a.confirm({title:"Delete type",content:"Do you want to delete this type?",onOk:function(){return a.handleDelete(e._id)}})},a.handleMenuClick=function(e,t){"edit"===t.key?(a.setState({currentItem:e}),a.showEditModal(e)):"delete"===t.key&&a.deleteItem(e)},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({items:e,loading:!1})},a.handleAddItem=function(){a.setState({modalVisible:!0})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllPackingType()}},{key:"render",value:function(){var e=this,t=[{title:"Name",dataIndex:"name",key:"name"},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Ue,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"},{key:"delete",name:"Delete"}]})}}],a=this.props.form.getFieldDecorator,n=this.state,l=n.items,i=n.loading,c=n.modalVisible,o=n.modalType,s=n.currentItem,d=void 0===s?{}:s,u={item:"create"===o?{}:d,visible:c,maskClosable:!1,title:"create"===o?"Create Packing Type":"Update Packing Type",centered:!0};return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"inbox"}),r.a.createElement("span",null,"Packing Types"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(It,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults,onAddItem:this.handleAddItem}),r.a.createElement(oe.a,{bordered:!0,loading:i,rowKey:"_id",columns:t,dataSource:l}),r.a.createElement(Ye.a,Object.assign({},u,{onCancel:this.handleCancel,onOk:this.handleModalSubmit}),r.a.createElement(P.a,{onSubmit:e.handleSubmit},r.a.createElement(St,Object.assign({label:"Name",hasFeedback:!0},e.formLayout),a("name",{initialValue:d.name,rules:[{required:!0}]})(r.a.createElement(q.a,{placeholder:"Packing type"})))))))}}]),t}(n.Component),Dt=P.a.create()(Ot),Ct="/api/roles";function Rt(){return Se.get("".concat(Ee).concat(Ct)).then(pe).catch(ge)}var xt=Object(qe.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),At=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){var n;e||(a.props.showSearchLoading(!0),(n=t,Se.post("".concat(Ee).concat(Ct,"/filter"),n).then(pe).catch(ge)).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){ee.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onAddItem,n=t.getFieldDecorator;return r.a.createElement(P.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{xl:{span:4},md:{span:12}},n("title")(r.a.createElement(q.a.Search,{placeholder:"Search role name"}))),r.a.createElement(ie.a,Object.assign({},xt,{xl:{span:20},md:{span:12}}),r.a.createElement(B.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(U.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(U.a,{onClick:this.handleReset},"Reset")),r.a.createElement(U.a,{type:"dashed",onClick:a},"Create")))))}}]),t}(n.Component),Nt=P.a.create()(At),jt=P.a.Item,wt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={roles:[],loading:!0,modalVisible:!1,modalType:"create",currentItem:{}},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.getAllRoles=function(){a.setState({loading:!0}),Rt().then(function(e){a.setState({roles:e.data,loading:!1})}).catch(function(e){ee.a.error("".concat(e))})},a.showModal=function(){a.setState({modalVisible:!0})},a.showEditModal=function(e){a.setState({modalVisible:!0,currentItem:e,modalType:"update"})},a.handleCancel=function(){a.setState({modalVisible:!1})},a.handleModalSubmit=function(e){e.preventDefault();var t=a.props.form,n=a.state.currentItem,r=n?n._id:"";t.validateFields(function(e,n){var l;e||(r?function(e,t){return Se.put("".concat(Ee).concat(Ct,"/").concat(e),t).then(pe).catch(ge)}(n).then(function(e){t.resetFields(),a.setState({modalVisible:!1}),a.getAllRoles()}).catch(function(e){ee.a.error("".concat(e))}):(l=n,Se.post("".concat(Ee).concat(Ct),l).then(pe).catch(ge)).then(function(e){t.resetFields(),a.setState({modalVisible:!1}),a.getAllRoles()}).catch(function(e){ee.a.error("".concat(e))}))})},a.handleDelete=function(e){(function(e){return Se.delete("".concat(Ee).concat(Ct,"/").concat(e)).then(pe).catch(ge)})(e).then(function(e){a.getAllRoles()}).catch(function(e){ee.a.error("".concat(e))})},a.deleteItem=function(e){Ye.a.confirm({title:"Delete role",content:"Do you want to delete this role?",onOk:function(){return a.handleDelete(e._id)}})},a.handleMenuClick=function(e,t){"edit"===t.key?(a.setState({currentItem:e}),a.showEditModal(e)):"delete"===t.key&&a.deleteItem(e)},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({roles:e,loading:!1})},a.handleAddItem=function(){a.setState({modalVisible:!0})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllRoles()}},{key:"render",value:function(){var e=this,t=[{title:"Title",dataIndex:"title",key:"title"},{title:"CreatedAt",dataIndex:"createdAt",key:"createdAt",render:function(e){return We()(e).format("YYYY-MM-DD")}},{title:"CreatedBy",dataIndex:"createdBy",key:"createdBy",render:function(e){return e.firstName}},{title:"UpdatedAt",dataIndex:"updatedAt",key:"updatedAt",render:function(e){return We()(e).format("YYYY-MM-DD")}},{title:"UpdatedBy",dataIndex:"updatedBy",key:"updatedBy",render:function(e){return e?e.firstName:""}},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Ue,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"},{key:"delete",name:"Delete"}]})}}],a=this.props.form.getFieldDecorator,n=this.state,l=n.roles,i=n.loading,c=n.currentItem,o=void 0===c?{}:c,s={item:"create"===this.state.modalType?{}:o,visible:this.state.modalVisible,maskClosable:!1,title:"create"===this.state.modalType?"Create Role":"Update Role",centered:!0};return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"lock"}),r.a.createElement("span",null,"User Roles"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(Nt,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults,onAddItem:this.handleAddItem}),r.a.createElement(oe.a,{loading:i,rowKey:"_id",columns:t,dataSource:l}),r.a.createElement(Ye.a,Object.assign({},s,{onCancel:this.handleCancel,onOk:this.handleModalSubmit}),r.a.createElement(P.a,{onSubmit:e.handleSubmit},r.a.createElement(jt,Object.assign({label:"Title",hasFeedback:!0},e.formLayout),a("title",{initialValue:o.title,rules:[{required:!0}]})(r.a.createElement(q.a,{placeholder:"User role title"})))))))}}]),t}(n.Component),Mt=P.a.create()(wt),Lt=a(86),Ft=q.a.Search,Tt=Object(qe.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),Vt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){var n;e||(a.props.showSearchLoading(!0),(n=t,Se.post("".concat(Ee).concat(ft,"/filter"),n).then(pe).catch(ge)).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){ee.a.error("".concat(e)),a.props.onSearchResults([])}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onAddItem,n=t.getFieldDecorator;return r.a.createElement(P.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{xl:{span:4},md:{span:12}},n("firstName")(r.a.createElement(Ft,{placeholder:"Search first name",onPressEnter:this.handleSearch}))),r.a.createElement(ie.a,{xl:{span:4},md:{span:12}},n("lastName")(r.a.createElement(Ft,{placeholder:"Search last name",onPressEnter:this.handleSearch}))),r.a.createElement(ie.a,{xl:{span:4},md:{span:12}},n("email")(r.a.createElement(Ft,{placeholder:"Search email",onPressEnter:this.handleSearch}))),r.a.createElement(ie.a,Object.assign({},Tt,{xl:{span:12},md:{span:12}}),r.a.createElement(B.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(U.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(U.a,{onClick:this.handleReset},"Reset")),r.a.createElement(U.a,{type:"primary",onClick:a},"Create")))))}}]),t}(n.Component),Yt=P.a.create()(Vt),Pt=P.a.Item,Wt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],roles:[],loading:!0,modalVisible:!1,modalType:"create",currentItem:{}},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.getAllUsers=function(){a.setState({loading:!0}),Se.get("".concat(Ee).concat(ft)).then(pe).catch(ge).then(function(e){a.setState({users:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))})},a.getAllRoles=function(){a.setState({loading:!0}),Rt().then(function(e){a.setState({roles:e.data})}).catch(function(e){ee.a.error("".concat(e))})},a.handleSubmit=function(e){e.stopPropagation(),a.setState({loading:!0})},a.handleReset=function(e){e.stopPropagation();var t=a.props.form,n=t.getFieldsValue,r=t.setFieldsValue,l=n();for(var i in console.log("Reset fields1: ",l),l)({}).hasOwnProperty.call(l,i)&&(l[i]instanceof Array?l[i]=[]:l[i]=void 0);console.log("Reset fields2: ",l),r(l),a.handleSubmit()},a.showModal=function(){a.setState({modalVisible:!0})},a.showEditModal=function(e){a.setState({modalVisible:!0,currentItem:e,modalType:"update"})},a.handleCancel=function(){a.props.form.resetFields(),a.setState({modalVisible:!1})},a.handleModalSubmit=function(e){e.preventDefault();var t=a.props.form,n=a.state.currentItem,r=n?n._id:"";t.validateFields(function(e,n){var l;e||(r?function(e,t){return Se.put("".concat(Ee).concat(ft,"/").concat(e),t).then(pe).catch(ge)}(r,n).then(function(e){t.resetFields(),a.setState({modalVisible:!1}),a.getAllUsers()}).catch(function(e){a.setState({modalVisible:!1}),ee.a.error("".concat(e))}):(l=n,Se.post("".concat(Ee).concat(ft),l).then(pe).catch(ge)).then(function(e){t.resetFields(),a.setState({modalVisible:!1}),a.getAllUsers()}).catch(function(e){a.setState({modalVisible:!1}),ee.a.error("".concat(e))}))})},a.handleDelete=function(e){gt(e).then(function(e){a.getAllUsers()}).catch(function(e){ee.a.error("".concat(e))})},a.deleteItem=function(e){Ye.a.confirm({title:"Delete user",content:"Do you want to delete this user?",onOk:function(){return a.handleDelete(e._id)}})},a.handleMenuClick=function(e,t){"edit"===t.key?(a.setState({currentItem:e}),a.showEditModal(e)):"delete"===t.key&&a.deleteItem(e)},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({users:e,loading:!1})},a.handleAddItem=function(){a.setState({modalVisible:!0})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllUsers(),this.getAllRoles()}},{key:"render",value:function(){var e=this,t=[{title:"First Name",dataIndex:"firstName",key:"firstName"},{title:"Last Name",dataIndex:"lastName",key:"lastName"},{title:"Email",dataIndex:"email",key:"email"},{title:"Roles",dataIndex:"roles",key:"roles",render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(ne.a,{key:e._id},e.title)}))}},{title:"CreatedAt",dataIndex:"createdAt",key:"createdAt",render:function(e){return We()(e).format("YYYY-MM-DD")}},{title:"CreatedBy",dataIndex:"createdBy",key:"createdBy",render:function(e){return e.firstName}},{title:"UpdatedAt",dataIndex:"updatedAt",key:"updatedAt",render:function(e){return We()(e).format("YYYY-MM-DD")}},{title:"UpdatedBy",dataIndex:"updatedBy",key:"updatedBy",render:function(e){return e?e.firstName:""}},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Ue,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"},{key:"delete",name:"Delete"}]})}}],a=this.props.form.getFieldDecorator,n=this.state.currentItem,l=void 0===n?{}:n,i=null;0!==Object.entries(l).length&&(i=l.roles.map(function(e){return e._id}));var c={item:"create"===this.state.modalType?{}:l,visible:this.state.modalVisible,maskClosable:!1,title:"create"===this.state.modalType?"Create User":"Update User",centered:!0};return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"user"}),r.a.createElement("span",null,"Users"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(Yt,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults,onAddItem:this.handleAddItem}),r.a.createElement(oe.a,{bordered:!1,loading:this.state.loading,rowKey:"_id",columns:t,dataSource:this.state.users,size:"middle"}),r.a.createElement(Ye.a,Object.assign({},c,{onCancel:this.handleCancel,onOk:this.handleModalSubmit}),r.a.createElement(P.a,null,r.a.createElement(Pt,Object.assign({label:"First Name",hasFeedback:!0},e.formLayout),a("firstName",{initialValue:l.firstName,rules:[{required:!0}]})(r.a.createElement(q.a,{placeholder:"First Name"}))),r.a.createElement(Pt,Object.assign({label:"Last Name",hasFeedback:!0},e.formLayout),a("lastName",{initialValue:l.lastName,rules:[{required:!0}]})(r.a.createElement(q.a,{placeholder:"Last Name"}))),r.a.createElement(Pt,Object.assign({label:"Email",hasFeedback:!0},e.formLayout),a("email",{initialValue:l.email,rules:[{type:"email",message:"The input is not valid E-mail"},{required:!0}]})(r.a.createElement(q.a,{placeholder:"Email address"}))),r.a.createElement(Pt,Object.assign({label:"Password",hasFeedback:!0},e.formLayout),a("password",{initialValue:l.password,rules:[{required:!0}]})(r.a.createElement(q.a,{placeholder:"Password",type:"password"}))),r.a.createElement(Pt,Object.assign({label:"Roles",hasFeedback:!0},e.formLayout),a("roles",{initialValue:i,rules:[{required:!0,message:"At least one role is required"}]})(r.a.createElement(Lt.a.Group,null,r.a.createElement(B.a,null,e.state.roles.map(function(e){return r.a.createElement(ie.a,{span:24,key:e._id},r.a.createElement(Lt.a,{value:e._id},e.title))})))))))))}}]),t}(n.Component),qt=P.a.create()(Wt),Bt=Object(qe.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),Ut=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){var n;e||(a.props.showSearchLoading(!0),(n=t,Se.post("".concat(Ee).concat(Oe,"/filter"),n).then(pe).catch(ge)).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){ee.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(P.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{xl:{span:8},md:{span:12}},e("code")(r.a.createElement(q.a.Search,{placeholder:"Packing List #"}))),r.a.createElement(ie.a,Object.assign({},Bt,{xl:{span:16},md:{span:12}}),r.a.createElement(B.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(U.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(U.a,{onClick:this.handleReset},"Reset"))))))}}]),t}(n.Component),Kt=P.a.create()(Ut),zt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={purchaseOrders:[],selectedRowKeys:[],loading:!0,loadingApproval:!1,loadingApprove:!1,loadingReject:!1,modalVisible:!1,viewVisible:!1,approveOrRejectModalVisible:!1,approveOrRejectStatus:"",modalType:"create",currentItem:{}},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.getAllOrders=function(){a.setState({loading:!0}),Se.get("".concat(Ee).concat(Oe)).then(pe).catch(ge).then(function(e){a.setState({purchaseOrders:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))})},a.showModal=function(){a.setState({modalVisible:!0})},a.handleDelete=function(e){Ce(e).then(function(e){a.getAllOrders()}).catch(function(e){ee.a.error("".concat(e))})},a.deleteItem=function(e){Ye.a.confirm({title:"Delete purchase order",content:"Do you want to delete this purchase-order?",onOk:function(){return a.handleDelete(e._id)}})},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({purchaseOrders:e,loading:!1})},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.handleApprove=function(){a.setState({approveOrRejectStatus:"APPROVED",approveOrRejectModalVisible:!0})},a.handleReject=function(){a.setState({approveOrRejectStatus:"CANCEL",approveOrRejectModalVisible:!0})},a.handleApproveOrRejectSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||(a.setState({approveOrRejectModalVisible:!1,approveOrRejectStatus:""}),a.updateApproveOrRejectOrder(a.state.approveOrRejectStatus,t.comment))})},a.handleApproveOrRejectCancel=function(){a.props.form.resetFields(),a.setState({approveOrRejectModalVisible:!1,approveOrRejectStatus:""})},a.handleMenuClick=function(e,t){"edit"===t.key?a.props.history.push("/purchase-orders/edit/".concat(e._id)):"sendForApproval"===t.key?a.handlePOApprovalStatusUpdate(e._id):"stockUpdate"===t.key?a.props.history.push("/purchase-orders/stock-update/".concat(e._id)):"delete"===t.key?a.deleteItem(e):"view"===t.key?a.props.history.push("/purchase-orders/view/".concat(e._id)):"stocksPrint"===t.key&&a.props.history.push("/purchase-orders/stocks-print/".concat(e._id))},a.getOperationTasks=function(e){var t=[];return R.hasRole(R.getProfile(),["SUPER_ADMIN","DATA_ENTRY_ADMIN"])&&("PENDING"===e.status?(t.push({key:"edit",name:"Edit"}),t.push({key:"sendForApproval",name:"Send for approval"})):"APPROVED"!==e.status&&"RECEIVE_PENDING"!==e.status||t.push({key:"stockUpdate",name:"Stock update"}),"PENDING"!==e.status&&"APPROVED"!==e.status||t.push({key:"delete",name:"Delete"})),t.push({key:"view",name:"View"}),"COMPLETE"===e.status&&t.push({key:"stocksPrint",name:"Print Stocks"}),t},a.handleViewOnClose=function(){a.setState({viewVisible:!1,currentItem:{}})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllOrders()}},{key:"render",value:function(){var e=this,t=this.state,a=t.purchaseOrders,n=t.loading,l=[{title:"PackingList #",dataIndex:"code",key:"code"},{title:"Packing Date",dataIndex:"orderDate",key:"orderDate",render:function(e){return We()(e).format("YYYY-MM-DD")}},{title:"Received Date",dataIndex:"receivedDate",key:"receivedDate",render:function(e){return e&&We()(e).format("YYYY-MM-DD")}},{title:"Supplier",dataIndex:"supplier.name",key:"supplier"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight",render:function(e,t){return"".concat(e," Kg")}},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t){return"".concat(e," Kg")}},{title:"Status",key:"status",dataIndex:"status",render:function(e,t){var a="";return"COMPLETE"===e&&(a="#87d068"),"APPROVED"===e&&(a="#2db7f5"),"RECEIVE_PENDING"===e&&(a="#108ee9"),r.a.createElement(ne.a,{color:a},e)}},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Ue,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:e.getOperationTasks(a)})}}];return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"hdd"}),r.a.createElement("span",null,"View Packing List"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(Kt,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults}),r.a.createElement(oe.a,{loading:n,rowKey:"_id",columns:l,dataSource:a,size:"middle"})))}}]),t}(n.Component),_t=P.a.create()(zt),Gt={"Content-Type":"application/json"};R.getToken()&&(Gt.Authorization="Bearer ".concat(R.getToken()));var Qt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={purchaseOrders:[],loading:!0,modalVisible:!1,modalType:"create",currentItem:{}},a.handleMenuClick=function(e,t){"edit"===t.key&&a.props.history.push("/purchase-orders/good-received/".concat(e._id))},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({purchaseOrders:e,loading:!1})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/purchase-orders",{headers:Gt}).then(function(e){return e.json()}).then(function(t){e.setState({purchaseOrders:t.data,loading:!1})})}},{key:"render",value:function(){var e=this,t=[{title:"PO Number",dataIndex:"code",key:"code",render:function(e){return r.a.createElement("a",{href:"#/"},e)}},{title:"PO Date",dataIndex:"orderDate",key:"orderDate",render:function(e){return We()(e).format("YYYY-MM-DD")}},{title:"Expected Date",dataIndex:"expectedDate",key:"expectedDate",render:function(e){return We()(e).format("YYYY-MM-DD")}},{title:"Supplier",dataIndex:"supplier.name",key:"supplier"},{title:"Items",dataIndex:"items",key:"items",render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(ne.a,{key:e._id},"[".concat(e.item.code,"] - [").concat(e.orderUnits,"]"))}))}},{title:"Status",key:"status",dataIndex:"status"},{title:"Created At",dataIndex:"_createdAt",key:"_createdAt",render:function(e){return We()(e).format("YYYY-MM-DD")}},{title:"Updated At",dataIndex:"_updatedAt",key:"_updatedAt",render:function(e){return We()(e).format("YYYY-MM-DD")}},{title:"Created By",dataIndex:"createdBy.firstName",key:"createdBy.firstName"},{title:"Updated By",dataIndex:"updatedBy.firstName",key:"updatedBy.firstName"},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Ue,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"}]})}}];return r.a.createElement("div",null,r.a.createElement(Kt,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults}),r.a.createElement(oe.a,{loading:this.state.loading,rowKey:"_id",columns:t,dataSource:this.state.purchaseOrders}))}}]),t}(n.Component),Xt="/api/lot-numbers";function Jt(){return Se.get("".concat(Ee).concat(Xt)).then(pe).catch(ge)}var Ht=te.a.Option,Zt=1,$t=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).itemIndex=0,a.state={itemCreateFormVisible:!1,supplierList:[],lotNumberList:[],materialList:[],packingTypeList:[],measuringTypes:[],itemList:[],removedOrderItems:[],intervalIsSet:!1,purchaseOrder:null,searchResults:[],searchVisible:!1,modalType:"Create"},a.getAllSuppliers=function(){ut().then(function(e){a.setState({supplierList:e.data})}).catch(function(e){ee.a.error("".concat(e))})},a.getAllLotNumbers=function(){Jt().then(function(e){a.setState({lotNumberList:e.data})}).catch(function(e){ee.a.error("".concat(e))})},a.getAllMaterials=function(){xe().then(function(e){a.setState({materialList:e.data})}).catch(function(e){ee.a.error("".concat(e))})},a.getPurchaseOrder=function(e){De(e).then(function(e){var t=e.data,n=[],r={},l={},i={};e.data.items.forEach(function(e){n.push(e.item),r[e.item._id]=e.unitWeight,l[e.item._id]=e.measuringType._id,i[e.item._id]=e.units}),t.unitWeight=r,t.measuringType=l,t.units=i,console.log("Edit PO: ",t),a.setState({purchaseOrder:t,itemList:n,modalType:"Edit"})}).catch(function(e){ee.a.error("".concat(e))})},a.showItemCreateFormModal=function(){a.setState({itemCreateFormVisible:!0})},a.handleFormChange=function(e){a.setState(function(t){var a=t.purchaseOrder;return{purchaseOrder:Object(qe.a)({},a,e)}})},a.handleCancel=function(){a.setState({itemCreateFormVisible:!1})},a.handleCreate=function(){var e=a.formRef.props.form;e.validateFields(function(t,n){if(!t){n.key=Zt++,n.item.packingTypeName="";var r=a.state.packingTypeList.find(function(e){return e._id===n.item.packingType});r&&(n.item.packingTypeName=r.name),e.resetFields(),a.setState({itemList:[].concat(Object($.a)(a.state.itemList),[n]),itemCreateFormVisible:!1})}})},a.handleAddItem=function(){var e={};e.key=a.itemIndex,a.setState({itemList:[].concat(Object($.a)(a.state.itemList),[e])}),a.itemIndex+=1},a.handleRemoveItem=function(e){var t=a.state.itemList;t.includes(e)&&(t.splice(t.indexOf(e),1),a.setState({itemList:t,removedOrderItems:[].concat(Object($.a)(a.state.removedOrderItems),[e._id])}))},a.calculateTotalNetWeight=function(){var e=a.state.purchaseOrder;console.log("List:",e.netWeight),e.netWeight=e.netWeight.reduce(function(e,t){return e+t}),a.setState({purchaseOrder:e})},a.showSearchDrawer=function(){a.setState({searchVisible:!0})},a.handleOnClose=function(){a.setState({searchVisible:!1})},a.saveFormRef=function(e){a.formRef=e},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var n=a.state.materialList;t.items=a.state.itemList.map(function(e){return{item:n.find(function(a){return a.code===t.materialCode[e.key]})._id,lotNumber:t.lotNumber[e.key],units:t.units[e.key],netWeight:t.netWeight[e.key],grossWeight:t.grossWeight[e.key]}}),delete t.lotNumber,delete t.units,delete t.netWeight,delete t.grossWeight,t.netWeight=t.items.map(function(e){return e.netWeight}).reduce(function(e,t){return e+t}),t.grossWeight=t.items.map(function(e){return e.grossWeight}).reduce(function(e,t){return e+t}),a.state.purchaseOrder?function(e,t){return Se.put("".concat(Ee).concat(Oe,"/").concat(e),t).then(pe).catch(ge)}(a.state.purchaseOrder._id,t).then(function(){a.props.history.push("/purchase-orders/list")}).catch(function(e){ee.a.error("".concat(e))}):(r=t,Se.post("".concat(Ee).concat(Oe),r).then(pe).catch(ge)).then(function(){a.props.history.push("/purchase-orders/list")}).catch(function(e){ee.a.error("".concat(e))})}var r})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllSuppliers(),this.getAllMaterials(),this.getAllLotNumbers(),this.props.match.params.id&&this.getPurchaseOrder(this.props.match.params.id)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.supplierList,l=a.lotNumberList,i=a.materialList,c=a.itemList,o=a.purchaseOrder,s=a.modalType,d=[{title:"Item Code",dataIndex:"materialCode",key:"materialCode",width:"30%",render:function(e,a){return r.a.createElement(P.a.Item,{key:a.key,style:{marginBottom:"0"},hasFeedback:!0},t("materialCode[".concat(a.key,"]"),{initialValue:o&&o.materialCode[a.key],rules:[{required:!0,message:"Material code is required."}]})(r.a.createElement(te.a,{showSearch:!0,suffixIcon:r.a.createElement(I.a,{type:"search"}),placeholder:"Material code",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!0,notFoundContent:null,allowClear:!0},i.map(function(e){return r.a.createElement(te.a.Option,{key:e.code},e.code)}))))}},{title:"Merge",dataIndex:"lotNumber",key:"lotNumber",width:"30%",render:function(e,a){return r.a.createElement(P.a.Item,{key:a.key,style:{marginBottom:"0"},hasFeedback:!0},t("lotNumber[".concat(a.key,"]"),{initialValue:o&&o.lotNumber[a.key],rules:[{required:!0,message:"LOT number(Merge) is required."}]})(r.a.createElement(te.a,{showSearch:!0,suffixIcon:r.a.createElement(I.a,{type:"search"}),placeholder:"LOT Number(Merge)",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!0,notFoundContent:null},l.map(function(e){return r.a.createElement(te.a.Option,{key:e.lotNumber},e.lotNumber)}))))}},{title:"# of Box",dataIndex:"units",key:"units",render:function(e,a){return r.a.createElement(P.a.Item,{key:a.key,style:{marginBottom:"0"},hasFeedback:!0},t("units[".concat(a.key,"]"),{initialValue:o&&o.units[a.key],rules:[{required:!0,message:"#of box is required."}]})(r.a.createElement(ae.a,{placeholder:"#of box"})))}},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight",render:function(e,a){return r.a.createElement(P.a.Item,{key:a.key,style:{marginBottom:"0"},hasFeedback:!0},t("netWeight[".concat(a.key,"]"),{initialValue:o&&o.netWeight[a.key],rules:[{required:!0,message:"Net weight is required."}]})(r.a.createElement(ae.a,{placeholder:"Net Weight"})))}},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight",render:function(e,a){return r.a.createElement(P.a.Item,{key:a.key,style:{marginBottom:"0"},hasFeedback:!0},t("grossWeight[".concat(a.key,"]"),{initialValue:o&&o.grossWeight[a.key],rules:[{required:!0,message:"Gross weight is required."}]})(r.a.createElement(ae.a,{placeholder:"Gross Weight"})))}},{title:"",key:"operation",render:function(t,a){return r.a.createElement(U.a,{type:"primary",size:"small",icon:"close",onClick:function(t){t.stopPropagation(),e.handleRemoveItem(a)}})}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"plus-square"}),r.a.createElement("span",null,"Create Packing List"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(le.a,{title:"Detail Packing List",bordered:!1},r.a.createElement(P.a,{layout:"vertical",onSubmit:this.handleSubmit},r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{lg:8,md:12,sm:12},r.a.createElement(P.a.Item,{label:"Packing List No",hasFeedback:!0},t("code",{initialValue:o&&o.code,rules:[{required:!0,message:"Packing list number is required."}]})(r.a.createElement(q.a,{placeholder:"Packing list number"})))),r.a.createElement(ie.a,{xl:{span:5},lg:{span:4},md:{span:4},sm:4},r.a.createElement(P.a.Item,{label:"Date",hasFeedback:!0},t("orderDate",{rules:[{required:!0,message:"Valid packing date is required."}],initialValue:o&&o.orderDate?We()(this.state.purchaseOrder.orderDate):null})(r.a.createElement(ce.a,{placeholder:"Order date",format:"YYYY-MM-DD"})))),r.a.createElement(ie.a,{xl:{span:5},lg:{span:4},md:{span:4},sm:4},r.a.createElement(P.a.Item,{label:"Received Date",hasFeedback:!0},t("receivedDate",{rules:[{required:!1,message:"Valid received date is required."}],initialValue:o&&o.receivedDate?We()(this.state.purchaseOrder.receivedDate):null})(r.a.createElement(ce.a,{placeholder:"Received date",format:"YYYY-MM-DD"})))),r.a.createElement(ie.a,{lg:6,md:4,sm:4},r.a.createElement(P.a.Item,{label:"Supplier",hasFeedback:!0},t("supplier",{initialValue:o&&o.supplier.name,rules:[{required:!0,message:"Supplier is required."}]})(r.a.createElement(te.a,{placeholder:"Please select a supplier"},n.map(function(e){return r.a.createElement(Ht,{value:e._id,key:e._id},e.name)})))))),c.length>0&&r.a.createElement(oe.a,{pagination:!1,columns:d,dataSource:c,size:"middle"}),r.a.createElement(U.a,{style:{width:"100%",marginTop:16,marginBottom:16,color:"white",backgroundColor:"#13c2c2"},type:"dashed",onClick:this.handleAddItem,icon:"plus"},"Add Packing Item"),r.a.createElement(de.a,null),r.a.createElement(U.a,{type:"primary",htmlType:"submit",disabled:0===c.length},"".concat(s," Packing List"))))))}}]),t}(n.Component),ea=P.a.create()($t),ta=a(441),aa=a(454),na=a(449),ra=te.a.Option,la=0,ia=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,purchaseOrder:{code:"",subCode:"",orderDate:null,expectedDate:null,supplier:{_id:""},shipmentMode:"",items:[]},stockItems:[],orderItems:[],receivedItems:[],existingReceivedItems:[],measuringTypes:[],storeBins:[],modalVisible:!1,stockUpdate:!1,stockBulkUpdate:!1,modalType:"create",currentItem:{},lotNumbers:[]},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.getPurchaseOrder=function(e){e&&(a.setState({loading:!0}),De(a.props.match.params.id).then(function(e){var t=e.data.items;a.setState({purchaseOrder:e.data,orderItems:t,loading:!1})}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))}))},a.getAllBins=function(){a.setState({loading:!0}),je().then(function(e){a.setState({storeBins:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))})},a.getStockItemsByPurchaseOrder=function(e){e&&we(e).then(function(e){a.setState({stockItems:e.data})}).catch(function(e){ee.a.error("".concat(e))})},a.binStockBatchInsert=function(e){var t;(t=e,Se.post("".concat(Ee).concat(Ne,"/stocks/batch"),t).then(pe).catch(ge)).then(function(){a.props.history.push("/purchase-orders/list")}).catch(function(e){ee.a.error("".concat(e))})},a.createBinStock=function(e){(function(e,t){return Se.post("".concat(Ee).concat(Ne,"/").concat(e,"/stocks"),t).then(pe).catch(ge)})(e.stockItem.bin,e).then(function(){a.setState({modalVisible:!1,stockUpdate:!1}),window.location.reload()}).catch(function(e){a.setState({modalVisible:!1,stockUpdate:!1}),ee.a.error("".concat(e))})},a.showModal=function(){a.setState({modalVisible:!0,currentItem:{}})},a.handleModalSubmit=function(e){e.preventDefault(),e.stopPropagation();var t=a.props.form,n=a.state,r=n.orderItems,l=n.storeBins;t.validateFields(function(e,n){if(!e){a.setState({stockUpdate:!0});var i={};i.key=la++;var c=r.find(function(e){return e.lotNumber===n.lotNumber}),o=l.find(function(e){return e.code===n.bin});i.orderItem=c._id,i.bin=o._id,i.units=n.stockUnits,i.lotNumber=c.lotNumber,i.itemCode=c.item.code,i.binCode=o.code,console.log("Stock Item:",i),t.resetFields(),a.createBinStock({stockItem:i})}})},a.handleCancel=function(){a.props.form.resetFields(),a.setState({modalVisible:!1})},a.showEditModal=function(e){a.setState({modalVisible:!0,modalType:"update"})},a.showAddStockModal=function(e){a.setState({modalVisible:!0,currentItem:e})},a.handleMenuClick=function(e,t){"delete"===t.key&&a.deleteItem(e)},a.deleteItem=function(e){Ye.a.confirm({title:"Delete received item",content:"Do you want to delete this item?",onOk:function(){return a.handleDelete(e)}})},a.handleDelete=function(e){var t=a.state.receivedItems;t.includes(e)&&(t.splice(t.indexOf(e),1),a.setState({receivedItems:t}))},a.handleItemReceived=function(e){e.preventDefault(),e.stopPropagation();var t=a.state.receivedItems,n=[];t.forEach(function(e){var t={};t.bin=e.bin._id,t.orderItem=e.orderItem._id,t.lotNumber=e.orderItem.lotNumber,t.itemCode=e.orderItem.item.code,t.binCode=e.bin.code;for(var a=e.runningNumerFrom;a<e.units+e.runningNumerFrom;a++)t.runningNumber=a+"/"+e.orderItem.units,n.push(Object.assign({},t))}),console.log("Bin Stocks: ",n),a.binStockBatchInsert({stockItems:n})},a.handleUpdateStockItems=function(){a.setState({stockBulkUpdate:!0});var e,t=a.state.stockItems.map(function(e){return{_id:e._id,update:{netWeight:e.netWeight,grossWeight:e.grossWeight,cones:e.cones,detailsStatus:e.netWeight&&e.grossWeight&&e.cones?"COMPLETE":"PENDING"}}});(e={stockItems:t},Se.put("".concat(Ee).concat(Ne,"/stocks/batch"),e).then(pe).catch(ge)).then(function(){a.setState({stockBulkUpdate:!1}),ee.a.success("Successfuly updated the stocks")}).catch(function(e){a.setState({stockBulkUpdate:!1}),ee.a.error("".concat(e))})},a.handleFieldChange=function(e,t,n){var r=a.state.stockItems.map(function(a){var r=Object.assign({},a);return r._id===n?(r[t]=e,r):r});a.setState({stockItems:r})},a.calculatePendingQuantity=function(e,t){if(t.length>0){var a=t.filter(function(t){return t.item._id===e.item._id});if(a.length>0){var n=0;return a.forEach(function(e){n+=e.unitWeight*e.units}),e.pendingQuantity-n}}return e.pendingQuantity},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params&&(this.getPurchaseOrder(this.props.match.params.id),this.getAllBins(),this.getStockItemsByPurchaseOrder(this.props.match.params.id))}},{key:"render",value:function(){var e=this,t=this.state,a=t.purchaseOrder,n=t.orderItems,l=t.stockItems,i=t.storeBins,c=t.currentItem,o=void 0===c?{}:c,s=t.loading,d=t.stockUpdate,u=t.stockBulkUpdate,m=[];if(l.length){var h=0,p=0;l.forEach(function(e){h+=Number(e.netWeight),p+=Number(e.grossWeight)}),m=l.concat({key:"summary",netWeight:h,grossWeight:p})}0===m.length&&l.length>0&&(m=l);var f=this.props.form.getFieldDecorator,g={visible:this.state.modalVisible,maskClosable:!1,title:"create"===this.state.modalType?"Add Stock":"Update Stock",centered:!0,width:1e3,bodyStyle:{padding:3}},E=[{title:"Item Description",key:"description",render:function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,t.item.code," # ",t.item.name),r.a.createElement(ta.a,{percent:t.receivedUnits/t.units*100}))}},{title:"Merge",dataIndex:"lotNumber",key:"lotNumber"},{title:"Box",dataIndex:"units",key:"units"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight",render:function(e){return Number(e).toFixed(2)}},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight",render:function(e){return Number(e).toFixed(2)}},{title:"",key:"addStock",render:function(t,a){if(a.units-a.receivedUnits!==0)return r.a.createElement(U.a,{type:"primary",size:"small",onClick:function(t){t.preventDefault(),e.showAddStockModal(a)}},r.a.createElement(I.a,{type:"plus"}),"Stock")}}],y=[{title:"LOT Number(Merge)",dataIndex:"orderItem.lotNumber",key:"orderItem.lotNumber",render:function(e,t,a){return a<l.length?e:{children:r.a.createElement("span",{style:{fontWeight:600}},"Total"),props:{colSpan:3}}}},{title:"Bin",dataIndex:"bin.code",key:"bin.code",render:function(e,t,a){return a<l.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber",render:function(e,t,a){return a<l.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight",render:function(t,a,n){return n<l.length?r.a.createElement(ae.a,{value:t,onChange:function(t){return e.handleFieldChange(t,"netWeight",a._id)},placeholder:"Net Weight",min:1}):r.a.createElement("span",{style:{fontWeight:600}},Number(t).toFixed(2)," Kg")}},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight",render:function(t,a,n){return n<l.length?r.a.createElement(ae.a,{value:t,onChange:function(t){return e.handleFieldChange(t,"grossWeight",a._id)},placeholder:"Gross Weight",min:1}):r.a.createElement("span",{style:{fontWeight:600}},Number(t).toFixed(2)," kg")}},{title:"Cones",dataIndex:"cones",key:"cones",render:function(t,a,n){return n<l.length?r.a.createElement(ae.a,{value:t,onChange:function(t){return e.handleFieldChange(t,"cones",a._id)},placeholder:"#of Cones",min:1}):{children:"",props:{colSpan:0}}}},{title:"Status",dataIndex:"status",key:"status",render:function(e,t,a){if(a<l.length){var n="";return"AVAILABLE"===e&&(n="#87d068"),"RESERVED"===e&&(n="#2db7f5"),"DISPATCHED"===e&&(n="#108ee9"),"FACTORY_RECEIVED"===e&&(n="#f50"),r.a.createElement(ne.a,{color:n},e)}return{children:"",props:{colSpan:2}}}}],b=i.map(function(e){return r.a.createElement(aa.a.Option,{key:e.code},e.code)});return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,{href:"/purchase-orders/list"},r.a.createElement(I.a,{type:"hdd"}),r.a.createElement("span",null,"View Packing List")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"lock"}),r.a.createElement("span",null,"Add Stocks"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(se.a,{tip:"Loading...",spinning:s},r.a.createElement(le.a,{title:"Packing List Details",bordered:!1},r.a.createElement(Qe.a,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(Qe.a.Item,{label:"Packing List #"},a.code),r.a.createElement(Qe.a.Item,{label:"Order Date"},We()(a.orderDate).format("YYYY-MM-DD")),r.a.createElement(Qe.a.Item,{label:"Received Date"},We()(a.receivedDate).format("YYYY-MM-DD")),r.a.createElement(Qe.a.Item,{label:"Supplier"},a.supplier.name),r.a.createElement(Qe.a.Item,{label:"Net Weight"},"".concat(Number(a.netWeight).toFixed(2)," Kg")),r.a.createElement(Qe.a.Item,{label:"Gross Weight"},"".concat(Number(a.grossWeight).toFixed(2)," Kg")),r.a.createElement(Qe.a.Item,{label:"Status"},r.a.createElement(Xe.a,{status:"processing",text:a.status}))),r.a.createElement(oe.a,{bordered:!0,rowKey:"_id",loading:s,pagination:!1,dataSource:n,columns:E,size:"middle",title:function(){return r.a.createElement("h3",null,"Packing Items")}}),l.length>0&&r.a.createElement(se.a,{tip:"Updating...",spinning:u},r.a.createElement(oe.a,{bordered:!0,rowKey:"_id",pagination:!1,dataSource:m,columns:y,size:"middle",title:function(){return r.a.createElement("h3",null,"Stock Items")}}))),n.length>0&&r.a.createElement(Ye.a,Object.assign({},g,{onCancel:this.handleCancel,onOk:this.handleModalSubmit}),r.a.createElement(se.a,{tip:"Stock update in-progress...",spinning:d},r.a.createElement(P.a,null,r.a.createElement(P.a.Item,Object.assign({label:"Merge(LOT)",hasFeedback:!0},e.formLayout),f("lotNumber",{initialValue:o.lotNumber,rules:[{required:!0}]})(r.a.createElement(te.a,{placeholder:"Please select item"},n.map(function(e){return r.a.createElement(ra,{value:e.lotNumber,key:e.lotNumber},e.lotNumber)})))),r.a.createElement(P.a.Item,Object.assign({label:"# of Box (".concat(o.units,")(").concat(o.receivedUnits,")"),hasFeedback:!0},e.formLayout),f("stockUnits",{initialValue:o.stockUnits,rules:[{required:!0}]})(r.a.createElement(ae.a,{placeholder:"# of units",min:0,max:o.units-o.receivedUnits}))),r.a.createElement(P.a.Item,Object.assign({label:"Bin Location",hasFeedback:!0},e.formLayout),f("bin",{initialValue:o.bin,rules:[{required:!0}]})(r.a.createElement(aa.a,{dataSource:b,filterOption:!0,placeholder:"Bin location"},r.a.createElement(q.a,{suffix:r.a.createElement(I.a,{type:"search"})})))),r.a.createElement(na.a,{grid:{gutter:24,xs:1,sm:2,md:4,lg:4,xl:12,xxl:3},style:{padding:10},dataSource:i,renderItem:function(e){return r.a.createElement(na.a.Item,null,r.a.createElement(Xe.a,{count:e.stockItems.length},r.a.createElement("span",{className:"head-example",style:{width:42,height:42,backgroundColor:"rgb(238, 238, 238)",borderRadius:4,display:"inline-block",verticalAlign:"middle"}},r.a.createElement("b",null,e.code))))}})))),r.a.createElement(U.a,{type:"primary",onClick:this.handleUpdateStockItems,disabled:0===l.length,loading:u},"Update Stock Items"))))}}]),t}(n.Component),ca=P.a.create()(ia),oa=a(214),sa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={stockItems:[],loading:!1},a.getStockItemsByPurchaseOrder=function(e){e&&(a.setState({loading:!0}),we(e).then(function(e){a.setState({stockItems:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))}))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getStockItemsByPurchaseOrder(this.props.match.params.id)}},{key:"render",value:function(){var e=this.state,t=e.stockItems,a=e.loading;return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"unordered-list"}),r.a.createElement("span",null,"Stock Barcodes"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(se.a,{tip:"Loading...",spinning:a},r.a.createElement(B.a,{style:{marginBottom:15}},r.a.createElement(ie.a,{span:22}),r.a.createElement(ie.a,{span:2},r.a.createElement(U.a,{type:"primary"},r.a.createElement(oa.CSVLink,{data:t,headers:[{label:"LOT Number(Merge)",key:"lotNumber"},{label:"Item Code",key:"itemCode"},{label:"Bin",key:"binCode"},{label:"Running #",key:"runningNumber"},{label:"Net Weight",key:"netWeight"},{label:"Gross Weight",key:"grossWeight"},{label:"Cones",key:"cones"}],filename:"StockBarcodes.csv"},"Export CSV")))),r.a.createElement(oe.a,{rowKey:"_id",bordered:!0,pagination:!1,dataSource:t,columns:[{title:"LOT Number(Merge)",dataIndex:"lotNumber",key:"lotNumber"},{title:"Item Code",dataIndex:"itemCode",key:"itemCode"},{title:"Bin",dataIndex:"binCode",key:"binCode"},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight"},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight"},{title:"Cones",dataIndex:"cones",key:"cones"}],size:"middle"}))))}}]),t}(n.Component),da=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,purchaseOrder:{code:"",subCode:"",orderDate:null,expectedDate:null,supplier:{_id:""},shipmentMode:"",items:[]},stockItems:[],orderItems:[]},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.getPackingList=function(e){e&&(a.setState({loading:!0}),De(a.props.match.params.id).then(function(e){var t=e.data.items;a.setState({purchaseOrder:e.data,orderItems:t,loading:!1})}).catch(function(e){ee.a.error("".concat(e))}))},a.getStockItemsByPurchaseOrder=function(e){e&&we(e).then(function(e){a.setState({stockItems:e.data})}).catch(function(e){ee.a.error("".concat(e))})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params&&(this.getPackingList(this.props.match.params.id),this.getStockItemsByPurchaseOrder(this.props.match.params.id))}},{key:"render",value:function(){var e=this.state,t=e.purchaseOrder,a=e.orderItems,n=e.stockItems,l=e.loading,i=[{title:"Item Description",key:"description",render:function(e,t){return r.a.createElement("span",null,t.item.code," # ",t.item.name)}},{title:"Merge",dataIndex:"lotNumber",key:"lotNumber"},{title:"Box",dataIndex:"units",key:"units"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight",render:function(e){return Number(e).toFixed(2)}},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight",render:function(e){return Number(e).toFixed(2)}}],c=[{title:"LOT Number(Merge)",dataIndex:"orderItem.lotNumber",key:"orderItem.lotNumber"},{title:"Bin",dataIndex:"bin.code",key:"bin.code"},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight"},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight"},{title:"Cones",dataIndex:"cones",key:"cones"},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){var a="";return"AVAILABLE"===e&&(a="#87d068"),"RESERVED"===e&&(a="#2db7f5"),"DISPATCHED"===e&&(a="#108ee9"),"FACTORY_RECEIVED"===e&&(a="#f50"),r.a.createElement(ne.a,{color:a},e)}}];return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,{href:"/purchase-orders/list"},r.a.createElement(I.a,{type:"hdd"}),r.a.createElement("span",null,"View Packing List")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"lock"}),r.a.createElement("span",null,"Packing Details"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(se.a,{tip:"Loading...",spinning:l},r.a.createElement(le.a,{title:"Packing List Details",bordered:!1},r.a.createElement(Qe.a,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(Qe.a.Item,{label:"Packing List #"},t.code),r.a.createElement(Qe.a.Item,{label:"Order Date"},We()(t.orderDate).format("YYYY-MM-DD")),r.a.createElement(Qe.a.Item,{label:"Received Date"},We()(t.receivedDate).format("YYYY-MM-DD")),r.a.createElement(Qe.a.Item,{label:"Supplier"},t.supplier.name),r.a.createElement(Qe.a.Item,{label:"Net Weight"},"".concat(Number(t.netWeight).toFixed(2)," Kg")),r.a.createElement(Qe.a.Item,{label:"Gross Weight"},"".concat(Number(t.grossWeight).toFixed(2)," Kg")),r.a.createElement(Qe.a.Item,{label:"Status"},r.a.createElement(Xe.a,{status:"processing",text:t.status}))),r.a.createElement(oe.a,{rowKey:"_id",loading:l,pagination:!1,dataSource:a,columns:i,size:"middle",title:function(){return r.a.createElement("h3",null,"Packing Items")}}),n.length>0&&r.a.createElement(oe.a,{rowKey:"_id",pagination:!1,dataSource:n,columns:c,size:"middle",title:function(){return r.a.createElement("h3",null,"Stock Items")}})))))}}]),t}(n.Component),ua="/api/deliveries";function ma(e){return Se.get("".concat(Ee).concat(ua,"/").concat(e)).then(pe).catch(ge)}var ha=Object(qe.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),pa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).itemIndex=0,a.state={materialRequests:[],itemList:[],stockItems:[],selectedRowKeys:[],loading:!1,stockLoading:!1,deliverySaving:!1,searchVisible:!1},a.getAllPendingMeterialRequests=function(){var e;a.setState({loading:!0}),(e="?status=PENDING,PARTIALY_DISPATCHED",Se.get("".concat(Ee).concat(Ae).concat(e)).then(pe).catch(ge)).then(function(e){a.setState({materialRequests:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))})},a.createDelivery=function(e){var t;a.setState({deliverySaving:!0}),(t=e,Se.post("".concat(Ee).concat(ua),t).then(pe).catch(ge)).then(function(){a.setState({deliverySaving:!1}),a.props.history.push("/deliveries")}).catch(function(e){a.setState({deliverySaving:!1}),ee.a.error("".concat(e))})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var n=a.state,r=n.itemList,l=n.selectedRowKeys;t.materialRequests=r.map(function(e){return e._id}),t.deliveryStockItems=l,console.log("Delivery: ",t),a.createDelivery(t)}})},a.handleShowMaterialRequestSearch=function(){a.setState({searchVisible:!0})},a.handleAddMaterialRequest=function(){var e=a.state,t=e.materialRequests,n=e.itemList,r=e.stockItems,l=a.props.form.getFieldValue("refNumber"),i=t.find(function(e){return e.refNumber===l});if(i)if(n.includes(i))ee.a.warning("Sorry, You have already added the material request.");else{a.setState({loading:!0,stockLoading:!0});var c=i.items.map(function(e){return e.stockItems}).reduce(function(e,t){return e.concat(t)});a.setState({itemList:[].concat(Object($.a)(n),[i]),stockItems:[].concat(Object($.a)(r),Object($.a)(c)),loading:!1,stockLoading:!1,searchVisible:!1})}else ee.a.warning("Please enter valid material request reference number.")},a.handleRemoveMaterialRequest=function(e){var t=a.state,n=t.itemList,r=t.stockItems,l=t.selectedRowKeys;n.includes(e)&&n.splice(n.indexOf(e),1);var i=e.items.map(function(e){return e.stockItems}).reduce(function(e,t){return e.concat(t)});r=r.filter(function(e){return!i.includes(e)}),l=l.filter(function(e){return!Boolean(i.find(function(t){return t._id===e}))}),a.setState({itemList:n,stockItems:r,selectedRowKeys:l})},a.handleReset=function(e){a.props.form.setFieldsValue({refNumber:""}),a.setState({searchVisible:!1})},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllPendingMeterialRequests()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.materialRequests,l=a.itemList,i=a.stockItems,c=a.selectedRowKeys,o=a.stockLoading,s=a.deliverySaving,d=a.searchVisible,u={selectedRowKeys:c,onChange:this.onSelectChange},m=[{title:"Reqest Number",dataIndex:"refNumber",key:"refNumber"},{title:"Delivery Location",dataIndex:"deliveryLocation",key:"deliveryLocation"},{title:"Requested Date",dataIndex:"requestedDate",key:"requestedDate",render:function(e){return We()(e).format("YYYY-MM-DD")}},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(U.a,{type:"primary",size:"small",onClick:function(t){t.stopPropagation(),e.handleRemoveMaterialRequest(a)},icon:"close",style:{marginLeft:5}})}}],h=[{title:"LOT Number(Merge)",dataIndex:"lotNumber",key:"lotNumber"},{title:"Bin",dataIndex:"binCode",key:"binCode"},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight"},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight"},{title:"Cones",dataIndex:"cones",key:"cones"},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){var a="";return"AVAILABLE"===e&&(a="#87d068"),"RESERVED"===e&&(a="#2db7f5"),"DISPATCHED"===e&&(a="#108ee9"),"FACTORY_RECEIVED"===e&&(a="#f50"),r.a.createElement(ne.a,{color:a},e)}}];return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"hdd"}),r.a.createElement("span",null,"Create Delivery"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(le.a,{title:"Delivery Details",bordered:!1},r.a.createElement(P.a,{layout:"vertical",onSubmit:this.handleSubmit},r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{md:8,sm:8},r.a.createElement(P.a.Item,{label:"Delivery Number",hasFeedback:!0},t("deliveryNumber",{rules:[{required:!0,message:"Delivery number is required."}]})(r.a.createElement(q.a,{placeholder:"Delivery Number"})))),r.a.createElement(ie.a,{md:8,sm:8},r.a.createElement(P.a.Item,{label:"Vehicle Number",hasFeedback:!0},t("vehicleNumber",{rules:[{required:!0,message:"Please enter vehicle number"}]})(r.a.createElement(q.a,{placeholder:"Vehicle number"})))),r.a.createElement(ie.a,{md:8,sm:8},r.a.createElement(P.a.Item,{label:"Departure time",hasFeedback:!0},t("departureDateTime",{rules:[{required:!0,message:"Please enter departure time"}]})(r.a.createElement(ce.a,{showTime:!0,placeholder:"Select date and time",format:"YYYY-MM-DD hh:mm:ss"}))))),l.length>0&&r.a.createElement(oe.a,{rowKey:"_id",bordered:!0,pagination:!1,columns:m,dataSource:l,size:"middle",title:function(){return r.a.createElement("h4",null,"Added Material Requests")}}),d&&r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,{orientation:"left"},"Add Material Request"),r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{xl:{span:8},md:{span:4}},t("refNumber")(r.a.createElement(aa.a,{dataSource:n.map(function(e){return e.refNumber}),filterOption:!0,placeholder:"Material Request Ref Number"},r.a.createElement(q.a,{suffix:r.a.createElement(I.a,{type:"search"})})))),r.a.createElement(ie.a,Object.assign({},ha,{xl:{span:16},md:{span:20}}),r.a.createElement(B.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(U.a,{type:"primary",className:"margin-right",onClick:this.handleAddMaterialRequest},"Search & Add"),r.a.createElement(U.a,{onClick:this.handleReset},"Cancel")))))),!d&&r.a.createElement(U.a,{style:{width:"100%",marginTop:16,marginBottom:16,color:"white",backgroundColor:"#13c2c2"},type:"dashed",onClick:this.handleShowMaterialRequestSearch,icon:"plus"},"Add Material Requests"),r.a.createElement(se.a,{tip:"Stock loading...",spinning:o},i.length>0&&r.a.createElement(oe.a,{rowKey:"_id",rowSelection:u,columns:h,dataSource:i,pagination:!1,size:"middle",bordered:!0,title:function(){return r.a.createElement("h4",null,"Stock Items")}})),r.a.createElement(de.a,null),r.a.createElement(U.a,{type:"primary",htmlType:"submit",disabled:0===c.length,loading:s},"Create Delivery")))))}}]),t}(n.Component),fa=P.a.create()(pa),ga=a(444);R.getToken()&&"Bearer ".concat(R.getToken());var Ea={fontSize:16,color:"rgba(0,0,0,0.85)",lineHeight:"24px",display:"block",marginBottom:16},ya=function(e){var t=e.title,a=e.content;return r.a.createElement("div",{style:{fontSize:14,lineHeight:"22px",marginBottom:7,color:"rgba(0,0,0,0.65)"}},r.a.createElement("p",{style:{marginRight:8,display:"inline-block",color:"rgba(0,0,0,0.85)"}},t,":"),a)},ba=function(e){var t=e.delivery,a=e.visible,n=e.onClose,l=[{title:"Item Code",dataIndex:"receiveItem.item.code",key:"code"},{title:"Name",dataIndex:"receiveItem.item.name",key:"name"},{title:"PO Number",dataIndex:"receiveItem.purchaseOrder.code",key:"poNumber"},{title:"Units",dataIndex:"units",key:"units"}];return r.a.createElement(ga.a,{width:640,placement:"right",closable:!1,onClose:n,visible:a},r.a.createElement("p",{style:Object(qe.a)({},Ea,{marginBottom:24})},"Delivery Details"),t&&t.deliveryRequest&&t.deliveryRequest.materialRequest&&r.a.createElement("div",null,r.a.createElement("p",{style:Ea},"Meterial Request"),r.a.createElement(B.a,null,r.a.createElement(ie.a,{span:12},r.a.createElement(ya,{title:"Delivery Number",content:t.deliveryRequest.materialRequest.refNumber})),r.a.createElement(ie.a,{span:12},r.a.createElement(ya,{title:"Vehicle Number",content:t.vehicleNumber}))),r.a.createElement(B.a,null,r.a.createElement(ie.a,{span:12},r.a.createElement(ya,{title:"Delivery Location",content:t.deliveryRequest.materialRequest.deliveryLocation})),r.a.createElement(ie.a,{span:12},r.a.createElement(ya,{title:"Departure Time",content:We()(t.departureDateTime).format("YYYY-MM-DD hh:mm:ss")}))),r.a.createElement(B.a,null,r.a.createElement(ie.a,{span:12},r.a.createElement(ya,{title:"Contact Person",content:t.deliveryRequest.materialRequest.contactPerson})),r.a.createElement(ie.a,{span:12},r.a.createElement(ya,{title:"Contact Number",content:t.deliveryRequest.materialRequest.contactNumber}))),r.a.createElement(B.a,null,r.a.createElement(ie.a,{span:24},r.a.createElement(ya,{title:"Status",content:t.status}))),r.a.createElement(de.a,null),r.a.createElement("p",{style:Ea},"Deliver Items"),r.a.createElement(oe.a,{rowKey:"_id",pagination:!1,columns:l,dataSource:t.deliveryRequest&&t.deliveryRequest.items})))},ka=q.a.Search,va=Object(qe.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),Ia=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){var n;e||(a.props.showSearchLoading(!0),(n=t,Se.post("".concat(Ee).concat(ua,"/filter"),n).then(pe).catch(ge)).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){ee.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(P.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{xl:{span:6},md:{span:12}},e("deliveryNumber")(r.a.createElement(ka,{placeholder:"Search Delivery Number"}))),r.a.createElement(ie.a,Object.assign({},va,{xl:{span:18},md:{span:12}}),r.a.createElement(B.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(U.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(U.a,{onClick:this.handleReset},"Reset"))))))}}]),t}(n.Component),Sa=P.a.create()(Ia),Oa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={deliveries:[],loading:!1,viewProps:{},viewVisible:!1,currentItem:{}},a.getAllDeliveries=function(){a.setState({loading:!0}),Se.get("".concat(Ee).concat(ua)).then(pe).catch(ge).then(function(e){a.setState({deliveries:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))})},a.handleViewOnClose=function(){a.setState({viewVisible:!1,currentItem:{}})},a.handleMenuClick=function(e,t){"view"===t.key?a.props.history.push("/deliveries/view/".concat(e._id)):"edit"===t.key&&a.props.history.push("/deliveries/edit/".concat(e._id))},a.getOperationTasks=function(e){var t=[];return t.push({key:"view",name:"View"}),"PENDING"===e.status&&t.push({key:"edit",name:"Update"}),t},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({deliveries:e,loading:!1})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllDeliveries()}},{key:"render",value:function(){var e=this,t=this.state,a=t.viewVisible,n=t.deliveries,l=t.loading,i=[{title:"Delivery Number",dataIndex:"deliveryNumber",key:"refNudeliveryNumbermber"},{title:"Vehicle #",dataIndex:"vehicleNumber",key:"vehicleNumber"},{title:"Departure Time",dataIndex:"departureDateTime",key:"departureDateTime",render:function(e){return We()(e).format("YYYY-MM-DD hh:mm:ss")}},{title:"Arrival Time",dataIndex:"arrivalDateTime",key:"arrivalDateTime",render:function(e){return We()(e).format("YYYY-MM-DD hh:mm:ss")}},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:function(e){return We()(e).format("YYYY-MM-DD")}},{title:"Updated By",dataIndex:"updatedBy.firstName",key:"updatedBy.firstName"},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){var a="";return"PENDING"===e&&(a="volcano"),"FACTORY_RECEIVED"===e&&(a="#87d068"),r.a.createElement(ne.a,{color:a},e)}},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Ue,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:e.getOperationTasks(a)})}}];return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"hdd"}),r.a.createElement("span",null,"Delivery List"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(Sa,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults}),r.a.createElement(oe.a,{loading:l,rowKey:"_id",columns:i,dataSource:n}),r.a.createElement(ba,{visible:a,onClose:this.handleViewOnClose,delivery:this.state.currentItem})))}}]),t}(n.Component),Da=P.a.create()(Oa),Ca=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={delivery:{},stockItems:[],selectedRowKeys:[],loading:!1},a.getDelivery=function(e){e&&(a.setState({loading:!0}),ma(e).then(function(e){var t=e.data,n=t.items.map(function(e){return e.stockItems}).reduce(function(e,t){return e.concat(t)});a.setState({delivery:t,stockItems:n,loading:!1})}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))}))},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){var n,r;e||(t.status="FACTORY_RECEIVED",t.receivedStockItems=a.state.selectedRowKeys,a.setState({loading:!0}),(n=a.state.delivery._id,r=t,Se.put("".concat(Ee).concat(ua,"/").concat(n),r).then(pe).catch(ge)).then(function(){a.setState({loading:!1}),a.props.history.push("/deliveries")}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))}))})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getDelivery(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,a=t.delivery,n=t.stockItems,l=t.loading,i=t.selectedRowKeys,c={selectedRowKeys:i,onChange:this.onSelectChange},o=[{title:"LOT Number(Merge)",dataIndex:"lotNumber",key:"lotNumber"},{title:"Bin",dataIndex:"binCode",key:"binCode"},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight"},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight"},{title:"Cones",dataIndex:"cones",key:"cones"},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){var a="";return"AVAILABLE"===e&&(a="#87d068"),"RESERVED"===e&&(a="#2db7f5"),"DISPATCHED"===e&&(a="#108ee9"),"FACTORY_RECEIVED"===e&&(a="#f50"),r.a.createElement(ne.a,{color:a},e)}}];return r.a.createElement(le.a,{title:"Update Factory Received Delivery Items",bordered:!1},r.a.createElement(se.a,{tip:"Loading...",spinning:l},r.a.createElement(P.a,{onSubmit:this.handleSubmit},r.a.createElement(P.a.Item,Object.assign({},{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:8}}},{label:"Arrival Time",hasFeedback:!0}),e("arrivalDateTime",{rules:[{required:!0,message:"Please enter arrival time"}]})(r.a.createElement(ce.a,{showTime:!0,placeholder:"Select arrival time",format:"YYYY-MM-DD hh:mm:ss"}))),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe.a,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(Qe.a.Item,{label:"Delivery Number"},a.deliveryNumber),r.a.createElement(Qe.a.Item,{label:"Vehicle Number"},a.vehicleNumber),r.a.createElement(Qe.a.Item,{label:"Departure Time"},We()(a.departureDateTime).format("YYYY-MM-DD hh:mm:ss")),r.a.createElement(Qe.a.Item,{label:"Status",span:3},r.a.createElement(Xe.a,{status:"processing",text:a.status})))),r.a.createElement(oe.a,{rowKey:"_id",pagination:!1,bordered:!0,dataSource:a.items,columns:[{title:"Material Request #",dataIndex:"requestItem.materialRequest.refNumber",key:"materialRequestNumber"},{title:"Item Description",key:"description",render:function(e,t){return"".concat(t.requestItem.item.code," # ").concat(t.requestItem.item.name)}},{title:"Merge",dataIndex:"requestItem.lotNumber",key:"lotNumber"},{title:"# of Box",dataIndex:"units",key:"units"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight",render:function(e,t){return t.stockItems.map(function(e){return e.netWeight}).reduce(function(e,t){return e.concat(t)})}},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t){return t.stockItems.map(function(e){return e.grossWeight}).reduce(function(e,t){return e.concat(t)})}}],size:"middle",title:function(){return r.a.createElement("h4",null,"Delivered Items Summary")}}),r.a.createElement(oe.a,{rowKey:"_id",bordered:!0,pagination:!1,dataSource:n,columns:o,rowSelection:c,size:"middle",title:function(){return r.a.createElement("h4",null,"Delivery Items")}}),r.a.createElement(U.a,{type:"primary",htmlType:"submit",style:{marginTop:40},disabled:n.length!==i.length},"Confirm Factory Received"))))}}]),t}(n.Component),Ra=P.a.create()(Ca),xa=a(215),Aa=a.n(xa),Na=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.delivery,a=e.stockItems;return r.a.createElement("div",{style:{margin:25,padding:25}},r.a.createElement("h2",null,"DELIVERY INVOICE"),r.a.createElement(Qe.a,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(Qe.a.Item,{label:"Delivery Number"},t.deliveryNumber),r.a.createElement(Qe.a.Item,{label:"Vehicle Number"},t.vehicleNumber),r.a.createElement(Qe.a.Item,{label:"Departure Time"},We()(t.departureDateTime).format("YYYY-MM-DD hh:mm:ss")),r.a.createElement(Qe.a.Item,{label:"Status",span:"FACTORY_RECEIVED"!==t.status?3:0},r.a.createElement(Xe.a,{status:"processing",text:t.status})),"FACTORY_RECEIVED"===t.status&&r.a.createElement(Qe.a.Item,{label:"Factory Received Time",span:3},We()(t.arrivalDateTime).format("YYYY-MM-DD hh:mm:ss"))),r.a.createElement(oe.a,{rowKey:"_id",pagination:!1,bordered:!0,dataSource:t.items,columns:[{title:"Material Request #",dataIndex:"requestItem.materialRequest.refNumber",key:"materialRequestNumber"},{title:"Item Description",key:"description",render:function(e,t){return"".concat(t.requestItem.item.code," # ").concat(t.requestItem.item.name)}},{title:"Merge",dataIndex:"requestItem.lotNumber",key:"lotNumber"},{title:"# of Box",dataIndex:"units",key:"units"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight",render:function(e,t){return t.stockItems.map(function(e){return e.netWeight}).reduce(function(e,t){return e.concat(t)})}},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t){return t.stockItems.map(function(e){return e.grossWeight}).reduce(function(e,t){return e.concat(t)})}}],size:"middle",title:function(){return r.a.createElement("h2",null,"GOOD TRANSFER - OUT")},style:{marginTop:30}}),r.a.createElement(oe.a,{rowKey:"_id",bordered:!0,pagination:!1,dataSource:a,columns:[{title:"LOT Number(Merge)",dataIndex:"lotNumber",key:"lotNumber"},{title:"Item Code",dataIndex:"itemCode",key:"itemCode"},{title:"Bin",dataIndex:"binCode",key:"binCode"},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight"},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight"},{title:"Cones",dataIndex:"cones",key:"cones"}],rowSelection:{selectedRowKeys:[]},size:"middle",title:function(){return r.a.createElement("h4",null,"Delivery Items")},style:{display:"block",pageBreakBefore:"always",marginTop:50}}))}}]),t}(n.Component),ja=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={delivery:{},deliveryItemsSummary:[],stockItems:[],loading:!1},a.getDelivery=function(e){e&&(a.setState({loading:!0}),ma(e).then(function(e){var t=e.data,n=t.items.map(function(e){return e.stockItems}).reduce(function(e,t){return e.concat(t)});a.setState({delivery:t,stockItems:n,loading:!1})}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))}))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getDelivery(this.props.match.params.id)}},{key:"render",value:function(){var e=this,t=this.state,a=t.delivery,n=t.stockItems,l=t.loading,i=[{title:"LOT Number(Merge)",dataIndex:"lotNumber",key:"lotNumber"},{title:"Item Code",dataIndex:"itemCode",key:"itemCode"},{title:"Bin",dataIndex:"binCode",key:"binCode"},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight"},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight"},{title:"Cones",dataIndex:"cones",key:"cones"},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){var a="";return"AVAILABLE"===e&&(a="#87d068"),"RESERVED"===e&&(a="#2db7f5"),"DISPATCHED"===e&&(a="#108ee9"),"FACTORY_RECEIVED"===e&&(a="#f50"),r.a.createElement(ne.a,{color:a},e)}}];return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,{href:"/deliveries"},r.a.createElement(I.a,{type:"hdd"}),r.a.createElement("span",null,"Delivery List")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"lock"}),r.a.createElement("span",null,"Delivery Details"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(le.a,{title:"Delivery Details",bordered:!1},r.a.createElement(se.a,{tip:"Loading...",spinning:l},a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Delivery Details"),r.a.createElement(Qe.a,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(Qe.a.Item,{label:"Delivery Number"},a.deliveryNumber),r.a.createElement(Qe.a.Item,{label:"Vehicle Number"},a.vehicleNumber),r.a.createElement(Qe.a.Item,{label:"Departure Time"},We()(a.departureDateTime).format("YYYY-MM-DD hh:mm:ss")),r.a.createElement(Qe.a.Item,{label:"Status",span:"FACTORY_RECEIVED"!==a.status?3:0},r.a.createElement(Xe.a,{status:"processing",text:a.status})),"FACTORY_RECEIVED"===a.status&&r.a.createElement(Qe.a.Item,{label:"Factory Received Time",span:3},We()(a.arrivalDateTime).format("YYYY-MM-DD hh:mm:ss")))),r.a.createElement(oe.a,{rowKey:"_id",pagination:!1,bordered:!0,dataSource:a.items,columns:[{title:"Material Request #",dataIndex:"requestItem.materialRequest.refNumber",key:"materialRequestNumber"},{title:"Item Description",key:"description",render:function(e,t){return"".concat(t.requestItem.item.code," # ").concat(t.requestItem.item.name)}},{title:"Merge",dataIndex:"requestItem.lotNumber",key:"lotNumber"},{title:"# of Box",dataIndex:"units",key:"units"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight",render:function(e,t){return t.stockItems.map(function(e){return e.netWeight}).reduce(function(e,t){return e.concat(t)})}},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t){return t.stockItems.map(function(e){return e.grossWeight}).reduce(function(e,t){return e.concat(t)})}}],size:"middle",title:function(){return r.a.createElement("h4",null,"Delivered Items Summary")}}),r.a.createElement(oe.a,{rowKey:"_id",bordered:!0,pagination:!1,dataSource:n,columns:i,size:"middle",title:function(){return r.a.createElement("h4",null,"Delivery Items")}}),r.a.createElement(de.a,null),r.a.createElement("div",null,r.a.createElement(Aa.a,{trigger:function(){return r.a.createElement(U.a,{type:"primary"},"Print Delivery Invoice")},content:function(){return e.componentRef}}),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(Na,{delivery:a,stockItems:n,ref:function(t){return e.componentRef=t}})))))))}}]),t}(n.Component),wa=q.a.Search,Ma=Object(qe.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),La=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){var n;e||(a.props.showSearchLoading(!0),(n=t,Se.post("".concat(Ee).concat(Xt,"/filter"),n).then(pe).catch(ge)).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){ee.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onAddItem,n=t.getFieldDecorator;return r.a.createElement(P.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{xl:{span:6},md:{span:12}},n("lotNumber")(r.a.createElement(wa,{placeholder:"LOT Number(Merge)"}))),r.a.createElement(ie.a,Object.assign({},Ma,{xl:{span:18},md:{span:12}}),r.a.createElement(B.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(U.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(U.a,{onClick:this.handleReset},"Reset")),r.a.createElement(U.a,{type:"dashed",onClick:a},"Create")))))}}]),t}(n.Component),Fa=P.a.create()(La),Ta=P.a.Item,Va=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={lotNumbers:[],loading:!1,modalVisible:!1,modalType:"create",currentItem:{}},a.getAllLotNumbers=function(){a.setState({loading:!0}),Jt().then(function(e){a.setState({lotNumbers:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))})},a.handleReset=function(){var e=a.props.form,t=e.getFieldsValue,n=e.setFieldsValue,r=t();for(var l in r)({}).hasOwnProperty.call(r,l)&&(r[l]instanceof Array?r[l]=[]:r[l]=void 0);n(r),a.handleSubmit()},a.showModal=function(){a.setState({modalVisible:!0})},a.showEditModal=function(e){a.setState({modalVisible:!0,currentItem:e,modalType:"update"})},a.handleCancel=function(){a.setState({modalVisible:!1})},a.handleModalSubmit=function(e){e.preventDefault();var t=a.props.form,n=a.state.currentItem,r=n?n._id:"";t.validateFields(function(e,n){var l;e||(r?function(e,t){return Se.put("".concat(Ee).concat(Xt,"/").concat(e),t).then(pe).catch(ge)}(r,n).then(function(e){t.resetFields(),a.setState({modalVisible:!1,modalType:"create"}),a.getAllLotNumbers()}).catch(function(e){ee.a.error("".concat(e))}):(l=n,Se.post("".concat(Ee).concat(Xt),l).then(pe).catch(ge)).then(function(e){t.resetFields(),a.setState({modalVisible:!1}),a.getAllLotNumbers()}).catch(function(e){ee.a.error("".concat(e))}))})},a.handleDelete=function(e){(function(e){return Se.delete("".concat(Ee).concat(Xt,"/").concat(e)).then(pe).catch(ge)})(e).then(function(){a.getAllLotNumbers()}).catch(function(e){ee.a.error("".concat(e))})},a.deleteItem=function(e){Ye.a.confirm({title:"Delete LOT Number(Merge)",content:"Do you want to delete this lot number?",onOk:function(){return a.handleDelete(e._id)}})},a.handleMenuClick=function(e,t){"edit"===t.key?(a.setState({currentItem:e}),a.showEditModal(e)):"delete"===t.key&&a.deleteItem(e)},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({lotNumbers:e,loading:!1})},a.saveFormRef=function(e){a.formRef=e},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllLotNumbers()}},{key:"render",value:function(){var e=this,t=this.state,a=t.lotNumbers,n=t.loading,l=t.currentItem,i=void 0===l?{}:l,c=t.modalType,o=t.modalVisible,s=this.props.form.getFieldDecorator,d=[{title:"LOT Number(Merge)",dataIndex:"lotNumber",key:"lotNumber"},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Ue,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"},{key:"delete",name:"Delete"}]})}}],u={item:"create"===c?{}:i,visible:o,maskClosable:!1,title:"create"===c?"Create LOT Number(Merge)":"Update LOT Number(Merge)",centered:!0};return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"inbox"}),r.a.createElement("span",null,"LOT Numbers(Merge)"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(Fa,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults,onAddItem:this.showModal}),r.a.createElement(oe.a,{bordered:!0,loading:n,rowKey:"_id",columns:d,dataSource:a,size:"middle",pagination:{pageSize:25}}),r.a.createElement(Ye.a,Object.assign({},u,{onCancel:this.handleCancel,onOk:this.handleModalSubmit}),r.a.createElement(P.a,{onSubmit:e.handleSubmit},r.a.createElement(Ta,Object.assign({label:"LOT Number(Merge)",hasFeedback:!0},e.formLayout),s("lotNumber",{initialValue:i.firstName,rules:[{required:!0}]})(r.a.createElement(q.a,{placeholder:"LOT Number"})))))),">")}}]),t}(n.Component),Ya=P.a.create()(Va),Pa=P.a.Item,Wa=Object(qe.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),qa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={bins:[],lotNumbers:[],materials:[],currentItem:{},searchValue:"",modalVisible:!1,loading:!1},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.searchBins=function(e){a.setState({loading:!0,searchValue:e}),function(e){return Se.get("".concat(Ee).concat(Ne,"/search").concat(e)).then(pe).catch(ge)}(e).then(function(e){a.setState({bins:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))})},a.handleSearch=function(e){e.preventDefault(),e.stopPropagation();var t="",n=a.props.form.getFieldsValue(["code"]).code,r=a.props.form.getFieldsValue(["lotNumber"]).lotNumber,l=a.props.form.getFieldsValue(["itemCode"]).itemCode;n&&(t+=-1===t.indexOf("?")?"?":"&",t+="code=".concat(encodeURIComponent(n))),r&&(t+=-1===t.indexOf("?")?"?":"&",t+="lotNumber=".concat(encodeURIComponent(r))),l&&(t+=-1===t.indexOf("?")?"?":"&",t+="itemCode=".concat(encodeURIComponent(l))),a.searchBins(t)},a.handleReset=function(e){a.props.form.resetFields(),a.searchBins("")},a.handleItemClick=function(e){a.setState({modalVisible:!0,currentItem:e})},a.handleCancel=function(){a.setState({modalVisible:!1,currentItem:{}})},a.handleModalSubmit=function(e){e.preventDefault();var t=a.props.form,n=a.state.currentItem;t.validateFields(function(e,r){var l,i,c;e||(l=n.bin,i=n._id,c=r,Se.put("".concat(Ee).concat(Ne,"/").concat(l,"/stocks/").concat(i),c).then(pe).catch(ge)).then(function(e){t.resetFields(),a.setState({modalVisible:!1}),a.searchBins(a.state.searchValue)}).catch(function(e){ee.a.error("".concat(e))})})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.searchBins("")}},{key:"render",value:function(){var e=this,t=this.state,a=t.bins,n=t.lotNumbers,l=t.materials,i=t.loading,c=t.currentItem,o=t.modalVisible,s=this.props.form.getFieldDecorator,d={item:c,visible:o,maskClosable:!1,title:"Update Stock - [".concat(c.lotNumber,"]::[").concat(c.itemCode,"]::[").concat(c.runningNumber,"]"),centered:!0},u=function(e){return r.a.createElement("div",null,e.code," - ",r.a.createElement(ne.a,{color:"#87d068"},e.stockItems.length))};return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"stock"}),r.a.createElement("span",null,"Stocks"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(se.a,{tip:"Loading...",spinning:i},r.a.createElement(B.a,{style:{margin:10}},r.a.createElement(ie.a,null,r.a.createElement(Xe.a,{color:"#bae637",text:"Available",style:{marginLeft:20}}),r.a.createElement(Xe.a,{color:"#ffa940",text:"Details Pending",style:{marginLeft:20}}),r.a.createElement(Xe.a,{color:"#9254de",text:"Reserved",style:{marginLeft:20}}),r.a.createElement(Xe.a,{color:"#eb2f96",text:"Dispatched",style:{marginLeft:20}}))),r.a.createElement(P.a,{onSubmit:this.handleSearch},r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{xl:{span:4},md:{span:4}},s("code")(r.a.createElement(aa.a,{dataSource:a.map(function(e){return e.code}),filterOption:!0,placeholder:"Bin code"},r.a.createElement(q.a,{suffix:r.a.createElement(I.a,{type:"search"})})))),r.a.createElement(ie.a,{xl:{span:6},md:{span:4}},s("lotNumber")(r.a.createElement(aa.a,{dataSource:n.map(function(e){return e.lotNumber}),filterOption:!0,placeholder:"LOT Number(Merge)"},r.a.createElement(q.a,{suffix:r.a.createElement(I.a,{type:"search"})})))),r.a.createElement(ie.a,{xl:{span:4},md:{span:4}},s("itemCode")(r.a.createElement(aa.a,{dataSource:l.map(function(e){return e.code}),filterOption:!0,placeholder:"Material Code"},r.a.createElement(q.a,{suffix:r.a.createElement(I.a,{type:"search"})})))),r.a.createElement(ie.a,Object.assign({},Wa,{xl:{span:10},md:{span:12}}),r.a.createElement(B.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(U.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(U.a,{onClick:this.handleReset},"Reset")))))),r.a.createElement("div",null,r.a.createElement(na.a,{grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:6,xxl:3},dataSource:a,renderItem:function(t){return r.a.createElement(na.a.Item,null,r.a.createElement(le.a,{title:u(t),bodyStyle:{padding:2}},r.a.createElement(U.a.Group,null,t.stockItems.map(function(t){return function(t){var a="#bae637";return"PENDING"===t.detailsStatus?a="#ffa940":"RESERVED"===t.status?a="#9254de":"DISPATCHED"===t.status&&(a="#eb2f96"),r.a.createElement(U.a,{size:"small",key:t._id,onClick:function(a){a.preventDefault(),e.handleItemClick(t)},style:{margin:2,backgroundColor:a}},"".concat(t.itemCode,"(").concat(t.runningNumber,")"))}(t)}))))}})),r.a.createElement(Ye.a,Object.assign({},d,{onCancel:this.handleCancel,onOk:this.handleModalSubmit}),r.a.createElement(P.a,{onSubmit:e.handleSubmit},r.a.createElement(Pa,Object.assign({label:"Net Weight",hasFeedback:!0},e.formLayout),s("netWeight",{initialValue:c.netWeight,rules:[{required:!0}]})(r.a.createElement(ae.a,{placeholder:"Net Weight"}))),r.a.createElement(Pa,Object.assign({label:"Gross Weight",hasFeedback:!0},e.formLayout),s("grossWeight",{initialValue:c.grossWeight,rules:[{required:!0}]})(r.a.createElement(ae.a,{placeholder:"Gross Weight"}))),r.a.createElement(Pa,Object.assign({label:"Cones",hasFeedback:!0},e.formLayout),s("cones",{initialValue:c.cones,rules:[{required:!0}]})(r.a.createElement(ae.a,{placeholder:"#of Cones"}))))))))}}]),t}(n.Component),Ba=P.a.create()(qa),Ua=q.a.Search,Ka=Object(qe.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),za=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){var n;e||(a.props.showSearchLoading(!0),(n=t,Se.post("".concat(Ee).concat(Ne,"/filter"),n).then(pe).catch(ge)).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){ee.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onAddItem,n=t.getFieldDecorator;return r.a.createElement(P.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(B.a,{gutter:24},r.a.createElement(ie.a,{xl:{span:6},md:{span:12}},n("code")(r.a.createElement(Ua,{placeholder:"Code"}))),r.a.createElement(ie.a,Object.assign({},Ka,{xl:{span:18},md:{span:12}}),r.a.createElement(B.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(U.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(U.a,{onClick:this.handleReset},"Reset")),r.a.createElement(U.a,{type:"dashed",onClick:a},"Create")))))}}]),t}(n.Component),_a=P.a.create()(za),Ga=P.a.Item,Qa={labelCol:{span:6},wrapperCol:{span:14}},Xa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={items:[],loading:!1,modalVisible:!1,modalType:"create",currentItem:{}},a.getAllBins=function(){a.setState({loading:!0}),je().then(function(e){a.setState({items:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),ee.a.error("".concat(e))})},a.handleReset=function(){var e=a.props.form,t=e.getFieldsValue,n=e.setFieldsValue,r=t();for(var l in r)({}).hasOwnProperty.call(r,l)&&(r[l]instanceof Array?r[l]=[]:r[l]=void 0);n(r),a.handleSubmit()},a.showModal=function(){a.setState({modalVisible:!0})},a.showEditModal=function(e){a.setState({modalVisible:!0,currentItem:e,modalType:"update"})},a.handleCancel=function(){a.setState({modalVisible:!1})},a.handleModalSubmit=function(e){e.preventDefault();var t=a.props.form,n=a.state.currentItem,r=n?n._id:"";t.validateFields(function(e,n){var l;e||(r?function(e,t){return Se.put("".concat(Ee).concat(Ne,"/").concat(e),t).then(pe).catch(ge)}(r,n).then(function(){t.resetFields(),a.setState({modalVisible:!1,modalType:"create"}),a.getAllBins()}).catch(function(e){ee.a.error("".concat(e))}):(l=n,Se.post("".concat(Ee).concat(Ne),l).then(pe).catch(ge)).then(function(){t.resetFields(),a.setState({modalVisible:!1}),a.getAllBins()}).catch(function(e){ee.a.error("".concat(e))}))})},a.handleDelete=function(e){(function(e){return Se.delete("".concat(Ee).concat(Ne,"/").concat(e)).then(pe).catch(ge)})(e).then(function(){a.getAllBins()}).catch(function(e){ee.a.error("".concat(e))})},a.deleteItem=function(e){Ye.a.confirm({title:"Delete Bin",content:"Do you want to delete this bin?",onOk:function(){return a.handleDelete(e._id)}})},a.handleMenuClick=function(e,t){"edit"===t.key?(a.setState({currentItem:e}),a.showEditModal(e)):"delete"===t.key&&a.deleteItem(e)},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({suppliers:e,loading:!1})},a.saveFormRef=function(e){a.formRef=e},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllBins()}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.loading,l=t.currentItem,i=void 0===l?{}:l,c=t.modalType,o=t.modalVisible,s=this.props.form.getFieldDecorator,d=[{title:"Bin Code",dataIndex:"code",key:"code"},{title:"Section",dataIndex:"section",key:"section"},{title:"X-Axis Name",dataIndex:"xAxis",key:"xAxis"},{title:"Y-Axis Name",dataIndex:"yAxis",key:"yAxis"},{title:"Remark",dataIndex:"remark",key:"remark"},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Ue,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"},{key:"delete",name:"Delete"}]})}}],u={item:"create"===c?{}:i,visible:o,maskClosable:!1,title:"create"===c?"Create Bin":"Update Bin",centered:!0};return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{href:"/dashboard"},r.a.createElement(I.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(re.a.Item,null,r.a.createElement(I.a,{type:"appstore"}),r.a.createElement("span",null,"Bins"))),r.a.createElement(Fe,{inner:!0},r.a.createElement(_a,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults,onAddItem:this.showModal}),r.a.createElement(oe.a,{bordered:!0,loading:n,rowKey:"_id",columns:d,dataSource:a,size:"middle",pagination:{pageSize:25}}),r.a.createElement(Ye.a,Object.assign({},u,{onCancel:this.handleCancel,onOk:this.handleModalSubmit}),r.a.createElement(P.a,{layout:"horizontal",onSubmit:e.handleSubmit},r.a.createElement(Ga,Object.assign({label:"Section",hasFeedback:!0},Qa),s("section",{initialValue:i.section,rules:[{required:!0}]})(r.a.createElement(q.a,{placeholder:"Section"}))),r.a.createElement(Ga,Object.assign({label:"X-Axis",hasFeedback:!0},Qa),s("xAxis",{initialValue:i.xAxis,rules:[{required:!0}]})(r.a.createElement(q.a,{placeholder:"X-Axis"}))),r.a.createElement(Ga,Object.assign({label:"Y-Axis",hasFeedback:!0},Qa),s("yAxis",{initialValue:i.yAxis,rules:[{required:!0}]})(r.a.createElement(ae.a,{placeholder:"Y-Axis",min:1}))),r.a.createElement(Ga,Object.assign({label:"Remark",hasFeedback:!0},Qa),s("remark",{initialValue:i.remark})(r.a.createElement(q.a,{placeholder:"Remark"})))))))}}]),t}(n.Component),Ja=P.a.create()(Xa),Ha=(a(429),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(h.a,null,r.a.createElement(p.a,{exact:!0,path:"/"},r.a.createElement(f.a,{to:"/dashboard"})),r.a.createElement(y,{path:"/login",component:H}),r.a.createElement(Y,{path:"/dashboard",component:Z}),r.a.createElement(Y,{path:"/purchase-orders/stock-update/:id",component:ca}),r.a.createElement(Y,{path:"/purchase-orders/stocks-print/:id",component:sa}),r.a.createElement(Y,{path:"/purchase-orders/add",component:ea}),r.a.createElement(Y,{path:"/purchase-orders/edit/:id",component:ea}),r.a.createElement(Y,{path:"/purchase-orders/good-received",component:Qt}),r.a.createElement(Y,{path:"/purchase-orders/list",component:_t}),r.a.createElement(Y,{path:"/purchase-orders/view/:id",component:da}),r.a.createElement(Y,{path:"/items",component:lt}),r.a.createElement(Y,{path:"/material-request/view/:id",component:Je}),r.a.createElement(Y,{path:"/material-request/list",component:Ge}),r.a.createElement(Y,{path:"/material-request/add",component:Ve}),r.a.createElement(Y,{path:"/suppliers",component:yt}),r.a.createElement(Y,{path:"/packing-types",component:Dt}),r.a.createElement(Y,{path:"/deliveries/add",component:fa}),r.a.createElement(Y,{path:"/deliveries/edit/:id",component:Ra}),r.a.createElement(Y,{path:"/deliveries/view/:id",component:ja}),r.a.createElement(Y,{path:"/deliveries",component:Da}),r.a.createElement(Y,{path:"/lot-numbers",component:Ya}),r.a.createElement(Y,{path:"/stocks",component:Ba}),r.a.createElement(Y,{path:"/bins",component:Ja}),r.a.createElement(Y,{path:"/roles",component:Mt}),r.a.createElement(Y,{path:"/users",component:qt})))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Ha,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[220,1,2]]]);
//# sourceMappingURL=main.1ff63f95.chunk.js.map