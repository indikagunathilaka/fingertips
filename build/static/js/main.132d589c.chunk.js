(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{204:function(e,t){e.exports="data:image/png;base64,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"},205:function(e,t,a){e.exports=a.p+"static/media/logo.4d62abc3.svg"},220:function(e,t,a){e.exports=a(431)},282:function(e,t,a){},302:function(e,t,a){},385:function(e,t,a){},426:function(e,t,a){},430:function(e,t,a){},431:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),i=a.n(l),c=a(11),o=a(12),s=a(14),u=a(13),d=a(15),m=a(449),h=a(452),p=a(433),g=a(448),f=(a(225),a(61)),b=function(e){var t=e.children;Object(f.a)(e,["children"]);return r.a.createElement("div",{className:"page page-login"},r.a.createElement("div",{className:"main"},t))},y=function(e){var t=e.component,a=Object(f.a)(e,["component"]);return r.a.createElement(p.a,Object.assign({},a,{render:function(e){return r.a.createElement(b,null,r.a.createElement(t,e))}}))},E=a(435),k=a(434),S=a(89),v=a(9),I=a(451),N=a(161),O=a.n(N),x=function(){function e(){Object(c.a)(this,e),this.login=function(e,t){}}return Object(o.a)(e,null,[{key:"authenticateUser",value:function(e){localStorage.setItem("token",e)}},{key:"isUserAuthenticated",value:function(){return null!==localStorage.getItem("token")}},{key:"deauthenticateUser",value:function(){localStorage.removeItem("token")}},{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"getBearerToken",value:function(){return"Bearer "+this.getToken()}},{key:"getProfile",value:function(){return O()(this.getToken())}},{key:"isTokenExpired",value:function(e){try{return O()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}}]),e}();x.hasRole=function(e,t){return t.some(function(t){return e.roles.includes(t)})},x.getTitle=function(){return x.hasRole(x.getProfile(),["SUPER_ADMIN"])?"Admin":x.hasRole(x.getProfile(),["DATA_ENTRY_ADMIN"])?"Data-admin":x.hasRole(x.getProfile(),["PO_ADMIN"])?"PO-admin":x.hasRole(x.getProfileI(),["DELIVERY_ADMIN"])?"Delivery-admin":"User"};var D=x,C=S.a.SubMenu,R=Object(I.a)(function(e){var t=e.history;return r.a.createElement(S.a,{key:"user",mode:"horizontal",onClick:function(){D.deauthenticateUser(),t.push("/")}},r.a.createElement(C,{title:r.a.createElement(n.Fragment,null,r.a.createElement("span",{style:{color:"#999",marginRight:4}},D.getTitle(),":"),r.a.createElement("span",null,D.getProfile().name))},r.a.createElement(S.a.Item,{key:"SignOut"},r.a.createElement("span",null,"Sign out"))))}),A=a(204),j=a.n(A),w=(a(282),k.a.Header),M=k.a.Sider,F=k.a.Content,L=k.a.Footer,W=S.a.SubMenu,T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).toggle=function(){a.setState({collapsed:!a.state.collapsed})},a.state={collapsed:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(k.a,null,r.a.createElement(M,{trigger:null,collapsible:!0,collapsed:this.state.collapsed,breakpoint:"lg",width:256,theme:"dark"},r.a.createElement("div",{className:"brand"},r.a.createElement("div",{className:"logo",id:"logo"},r.a.createElement(E.a,{to:"/"},r.a.createElement("img",{src:j.a,alt:"logo"}),this.state.collapsed?null:r.a.createElement("h1",null,"Fingertips Admin")))),r.a.createElement("div",{className:"menuContainer"},r.a.createElement(S.a,{key:"mainMenu",mode:"inline",defaultSelectedKeys:["1"],theme:"dark"},r.a.createElement(W,{key:"orders",title:r.a.createElement("span",null,r.a.createElement(v.a,{type:"select"}),r.a.createElement("span",null,"Packing List"))},D.hasRole(D.getProfile(),["SUPER_ADMIN","DATA_ENTRY_ADMIN"])&&r.a.createElement(S.a.Item,{key:"1"},r.a.createElement(E.a,{to:"/purchase-orders/add"},r.a.createElement(v.a,{type:"plus-square"}),r.a.createElement("span",null,"Create Packing List"))),r.a.createElement(S.a.Item,{key:"2"},r.a.createElement(E.a,{to:"/purchase-orders/list"},r.a.createElement(v.a,{type:"hdd"}),r.a.createElement("span",null,"View Packing List")))),r.a.createElement(W,{key:"materialRequests",title:r.a.createElement("span",null,r.a.createElement(v.a,{type:"schedule"}),r.a.createElement("span",null,"Meterial Request"))},D.hasRole(D.getProfile(),["SUPER_ADMIN","DATA_ENTRY_ADMIN"])&&r.a.createElement(S.a.Item,{key:"sub1-1"},r.a.createElement(E.a,{to:"/material-request/add"},r.a.createElement("span",null,"Add Request"))),r.a.createElement(S.a.Item,{key:"sub1-2"},r.a.createElement(E.a,{to:"/material-request/list"},r.a.createElement("span",null,"View Requests")))),r.a.createElement(W,{key:"deliveries",title:r.a.createElement("span",null,r.a.createElement(v.a,{type:"car"}),r.a.createElement("span",null,"Deliveries"))},r.a.createElement(S.a.Item,{key:"delivery"},r.a.createElement(E.a,{to:"/deliveries/add"},r.a.createElement("span",null,"Create Delivery"))),r.a.createElement(S.a.Item,{key:"deliveryList"},r.a.createElement(E.a,{to:"/deliveries"},r.a.createElement("span",null,"Delivery List")))),r.a.createElement(S.a.Item,{key:"4"},r.a.createElement(E.a,{to:"/items"},r.a.createElement(v.a,{type:"database"}),r.a.createElement("span",null,"Material List"))),D.hasRole(D.getProfile(),["SUPER_ADMIN"])&&r.a.createElement(S.a.Item,{key:"5"},r.a.createElement(E.a,{to:"/suppliers"},r.a.createElement(v.a,{type:"shopping-cart"}),r.a.createElement("span",null,"Suppliers"))),D.hasRole(D.getProfile(),["SUPER_ADMIN"])&&r.a.createElement(S.a.Item,{key:"6"},r.a.createElement(E.a,{to:"/packing-types"},r.a.createElement(v.a,{type:"inbox"}),r.a.createElement("span",null,"Packing Types"))),D.hasRole(D.getProfile(),["SUPER_ADMIN"])&&r.a.createElement(S.a.Item,{key:"7"},r.a.createElement(E.a,{to:"/lot-numbers"},r.a.createElement(v.a,{type:"inbox"}),r.a.createElement("span",null,"LOT Numbers"))),D.hasRole(D.getProfile(),["SUPER_ADMIN"])&&r.a.createElement(S.a.Item,{key:"8"},r.a.createElement(E.a,{to:"/roles"},r.a.createElement(v.a,{type:"lock"}),r.a.createElement("span",null,"User Roles"))),D.hasRole(D.getProfile(),["SUPER_ADMIN"])&&r.a.createElement(S.a.Item,{key:"9"},r.a.createElement(E.a,{to:"/users"},r.a.createElement(v.a,{type:"user"}),r.a.createElement("span",null,"Users"))),r.a.createElement(S.a.Item,{key:"10"},r.a.createElement(E.a,{to:"/stocks"},r.a.createElement(v.a,{type:"stock"}),r.a.createElement("span",null,"Stocks"))),r.a.createElement(S.a.Item,{key:"bins"},r.a.createElement(E.a,{to:"/bins"},r.a.createElement(v.a,{type:"appstore"}),r.a.createElement("span",null,"Bins")))))),r.a.createElement(k.a,null,r.a.createElement(w,{style:{background:"#fff",padding:0}},r.a.createElement("div",{className:"header"},r.a.createElement("span",{className:"trigger"},r.a.createElement(v.a,{className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle})),r.a.createElement("div",{className:"right"},r.a.createElement(R,null)))),r.a.createElement(F,{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:280}},this.props.children),r.a.createElement(L,{style:{textAlign:"center"}},"Fingertips Admin \xa9 2019 Bottleneck Solutions")))}}]),t}(n.Component),P=function(e){var t=e.component,a=Object(f.a)(e,["component"]);return r.a.createElement(p.a,Object.assign({},a,{render:function(e){return D.loggedIn()?r.a.createElement(T,null,r.a.createElement(t,e)):r.a.createElement(g.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Y=a(441),V=a(446),q=a(124),B=a(436),K=a(216),U=a(90),z=a(42),_=function(e){e.links,e.copyright;return r.a.createElement("footer",null,r.a.createElement("div",null,"Fingertips Admin \xa9 2019 Bottleneck Solutions"))},G=a(87),Q=a.n(G),X=a(122);function J(e){return H.apply(this,arguments)}function H(){return(H=Object(X.a)(Q.a.mark(function e(t){return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status&&201!==t.status){e.next=2;break}return e.abrupt("return",t.data);case 2:if(400!==t.status){e.next=5;break}throw console.log("Validation: ",t),new Error("Server-side validation error.");case 5:throw new Error("Bad response : ".concat(t.status));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Z(e){throw console.error("API call failed. "+e),e}var $="dev"===Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_STAGE?"http://localhost:3001":"",ee=a(88),te=a.n(ee),ae=te.a.create({baseURL:$});ae.interceptors.request.use(function(e){return D.loggedIn()&&(e.headers.Authorization=D.getBearerToken()),e});var ne=!1,re=[];ae.interceptors.response.use(function(e){return e},function(e){var t=e.config,a=e.response,n=t;return a&&401===a.status?(ne||(ne=!0,te.a.post("".concat($,"/oauth/token"),"grant_type=refresh_token&refresh_token=".concat(D.getResetToken()),{auth:{username:"SL",password:"Sl43&$^fdgd*+!!@#Agdo4Ged"}}).then(function(e){D.setSession(e.data),ne=!1,le(e.data.access_token)}).catch(function(e){return D.deauthenticateUser(),Promise.reject(e)})),new Promise(function(e){ie(function(t){n.headers.Authorization="Bearer "+t,e(te()(n))})})):Promise.reject(e)});var le=function(e){re.forEach(function(t){return t(e)}),re=[]},ie=function(e){re.push(e)},ce=ae,oe="/login";var se=a(205),ue=a.n(se),de=(a(302),Y.a.Item),me=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={redirectToReferrer:!1,loginErrorVisible:!1,loading:!1},a.handleOk=function(){a.props.form.validateFieldsAndScroll(function(e,t){var n;e||(a.setState({loading:!0}),(n={email:t.email,password:t.password},ce.post("".concat($).concat(oe),n).then(J).catch(Z)).then(function(e){e&&(D.setToken(e.token),a.setState({redirectToReferrer:!0,loading:!1}))}).catch(function(e){a.setState({loginErrorVisible:!0,loading:!1}),V.a.error("".concat(e))}))})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=(this.props.location.state||{from:{pathname:"/"}}).from,a=this.state,l=a.redirectToReferrer,i=a.loginErrorVisible,c=a.loading;return l?r.a.createElement(g.a,{to:t}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"LoginForm"},r.a.createElement(q.a,{tip:"Loading...",spinning:c},r.a.createElement("div",{className:"LoginForm-logo"},r.a.createElement("img",{alt:"logo",src:ue.a}),r.a.createElement("span",null,"Fingertips Admin")),i&&r.a.createElement(B.a,{message:"Bad credentials",type:"error",showIcon:!0,style:{marginBottom:10}}),r.a.createElement("form",null,r.a.createElement(de,{hasFeedback:!0},e("email",{rules:[{required:!0}]})(r.a.createElement(K.a,{onPressEnter:this.handleOk,placeholder:"Email address"}))),r.a.createElement(de,{hasFeedback:!0},e("password",{rules:[{required:!0}]})(r.a.createElement(K.a,{type:"password",onPressEnter:this.handleOk,placeholder:"Password"}))),r.a.createElement(U.a,null,r.a.createElement(z.a,{type:"primary",onClick:this.handleOk},"Sign in"))))),r.a.createElement("div",{className:"footer"},r.a.createElement(_,null)))}}]),t}(n.Component),he=Y.a.create()(me),pe=function(){return r.a.createElement("div",null,"Dashboard Page")},ge=a(37),fe=a(63),be=a(444),ye=a(217),Ee=a(447),ke=a(440),Se=a(48),ve=a(439),Ie=a(438),Ne=a(437),Oe=a(7),xe=a.n(Oe),De="/api/purchase-orders";function Ce(e){return ce.post("".concat($).concat(De,"/filter"),e).then(J).catch(Z)}function Re(e){return ce.get("".concat($).concat(De,"/").concat(e)).then(J).catch(Z)}function Ae(e){return ce.delete("".concat($).concat(De,"/").concat(e)).then(J).catch(Z)}var je="/api/item-categories";function we(){return ce.get("".concat($).concat(je)).then(J).catch(Z)}function Me(e){return ce.post("".concat($).concat(je,"/filter"),e).then(J).catch(Z)}var Fe="/api/material-requests";function Le(e){return ce.post("".concat($).concat(Fe,"/filter"),e).then(J).catch(Z)}var We="/api/bins";function Te(){return ce.get("".concat($).concat(We)).then(J).catch(Z)}function Pe(e){return ce.get("".concat($).concat(We,"/stocks/").concat(e)).then(J).catch(Z)}function Ye(e,t){return ce.get("".concat($).concat(We,"/stocks?itemCode=").concat(e,"&lotNumber=").concat(t)).then(J).catch(Z)}var Ve=a(2),qe=a.n(Ve),Be=(a(385),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.children,n=e.loading,l=void 0!==n&&n,i=e.inner,c=void 0!==i&&i,o=e.error,s=void 0===o?null:o,u=s;return null!=s&&(u=s,s.respose?u=s.respose:s.request&&(u=JSON.parse(s.request.responseText).error_description||s.request.statusText)),r.a.createElement("div",{className:qe()(t,{contentInner:c}),style:l?{height:"calc(100vh - 184px)",overflow:"hidden"}:null},s&&r.a.createElement(B.a,{message:"Error",description:u,type:"error",showIcon:!0,style:{marginBottom:20}}),a)}}]),t}(n.Component)),Ke=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).itemIndex=0,a.state={itemList:[],requestedItems:new Map,materialList:[],searchResults:[],searchVisible:!1,stockItems:[],selectedRowKeys:[],stockLoading:!1,requestSaving:!1},a.getAllMaterials=function(){we().then(function(e){a.setState({materialList:e.data})}).catch(function(e){V.a.error("".concat(e))})},a.createMaterialRequest=function(e){Le({refNumber:e.refNumber}).then(function(t){var n;Array.isArray(t.data)&&t.data.length>0?V.a.error("Request number is already exists. Please enter new number."):(n=e,ce.post("".concat($).concat(Fe),n).then(J).catch(Z)).then(function(){a.setState({requestSaving:!1}),a.props.history.push("/material-request/list")}).catch(function(e){a.setState({requestSaving:!1}),V.a.error("".concat(e))})}).catch(function(e){a.setState({requestSaving:!1}),V.a.error("".concat(e))})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||function(){a.setState({requestSaving:!0});var n=a.state,r=n.itemList,l=n.stockItems,i=n.selectedRowKeys,c=n.materialList,o=[],s=!0,u=!1,d=void 0;try{for(var m,h=function(){var e=m.value,a=l.filter(function(a){return a.itemCode===t.materialCode[e.key]&&a.lotNumber===t.lotNumber[e.key]}).map(function(e){return e._id}).filter(function(e){return i.includes(e)}),n={};n.item=c.find(function(a){return a.code===t.materialCode[e.key]})._id,n.lotNumber=t.lotNumber[e.key],n.units=t.units[e.key],n.stockItems=a,o.push(n)},p=r[Symbol.iterator]();!(s=(m=p.next()).done);s=!0)h()}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}t.items=o,t.stockItems=i,t.refNumberPrefix="MRN-".concat(xe()().format("YYYYMMDD"),"-"),t.refNumber=t.refNumberPrefix+t.refNumberSuffix,delete t.lotNumber,delete t.units,console.log("Material request: ",t),a.createMaterialRequest(t)}()})},a.showSearchDrawer=function(){a.setState({searchVisible:!0})},a.handleAddItem=function(){var e={};e.key=a.itemIndex,e.lotNumbers=[],e.lotNumber=null,a.setState({itemList:[].concat(Object(ge.a)(a.state.itemList),[e])}),a.itemIndex+=1},a.handleItemCodeChange=function(e,t){if(e){var n=a.state.itemList;Object.assign(n[n.findIndex(function(e){return e.key===t.key})],Object.assign({},t,{lotNumbers:[],lotNumber:""})),a.setState({itemList:n}),(r=e,ce.get("".concat($).concat(De,"/items/lot-numbers?itemCode=").concat(r)).then(J).catch(Z)).then(function(e){var r=Object.assign({},t,{lotNumbers:e.data});Object.assign(n[n.findIndex(function(e){return e.key===t.key})],r),a.setState({itemList:n})}).catch(function(e){Object.assign(n[n.findIndex(function(e){return e.key===t.key})],Object.assign({},t,{lotNumbers:[]})),V.a.error("".concat(e))})}var r},a.handleOnClose=function(){a.setState({searchVisible:!1})},a.handleRemoveItem=function(e){var t=a.state,n=t.itemList,r=t.stockItems,l=t.selectedRowKeys,i=t.requestedItems;n.includes(e)&&n.splice(n.indexOf(e),1),i.delete(e.key);var c=a.props.form.getFieldsValue(["lotNumber"]).lotNumber[e.key];if(c){var o=r.filter(function(e){return e.lotNumber===c});r=r.filter(function(e){return!o.includes(e)}),l=l.filter(function(e){return!Boolean(o.find(function(t){return t._id===e}))})}a.setState({itemList:n,stockItems:r,selectedRowKeys:l})},a.handleShowStockItems=function(e){var t=a.state.requestedItems,n=a.props.form.getFieldsValue(["lotNumber"]),r=a.props.form.getFieldsValue(["materialCode"]),l=n.lotNumber[e.key],i=r.materialCode[e.key];if(l){if(a.state.stockItems.length>0&&Boolean(a.state.stockItems.find(function(e){return e.lotNumber===l})))return V.a.error("Sorry, Stock items are already listed down.");a.setState({stockLoading:!0}),Ye(i,l).then(function(n){n.data.length>0?(a.setState({stockItems:[].concat(Object(ge.a)(a.state.stockItems),Object(ge.a)(n.data)),stockLoading:!1}),t.set(e.key,{code:i,lot:l})):(a.setState({stockLoading:!1}),V.a.warning("Sorry, No stocks available for given LOT(".concat(l,") and Item code(").concat(i,")")))}).catch(function(e){a.setState({stockLoading:!1}),V.a.error("".concat(e))})}else V.a.error("Please select valid LOT Number")},a.onSelectChange=function(e){var t=a.state,n=t.stockItems,r=t.itemList,l=a.props.form.getFieldsValue(["lotNumber"]),i=[],c=!0,o=!1,s=void 0;try{for(var u,d=function(){var e=u.value,t=n.find(function(t){return t._id===e}),a=l.lotNumber.indexOf(t.lotNumber);i.push(a)},m=e[Symbol.iterator]();!(c=(u=m.next()).done);c=!0)d()}catch(E){o=!0,s=E}finally{try{c||null==m.return||m.return()}finally{if(o)throw s}}var h=!0,p=!1,g=void 0;try{for(var f,b=function(){var e=f.value,t=i.filter(function(t){return t===e.key}).length,n=a.props.form.getFieldsValue(["units"]).units;n.splice(e.key,0,t),a.props.form.setFieldsValue({units:n})},y=r[Symbol.iterator]();!(h=(f=y.next()).done);h=!0)b()}catch(E){p=!0,g=E}finally{try{h||null==y.return||y.return()}finally{if(p)throw g}}a.setState({selectedRowKeys:e})},a.handleStockRefresh=Object(X.a)(Q.a.mark(function e(){var t,n,r,l,i,c,o,s,u;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.state.requestedItems,n=[],a.setState({stockLoading:!0}),r=!0,l=!1,i=void 0,e.prev=6,c=t.values()[Symbol.iterator]();case 8:if(r=(o=c.next()).done){e.next=17;break}return s=o.value,e.next=12,Ye(s.code,s.lot);case 12:(u=e.sent)&&(n=[].concat(Object(ge.a)(n),Object(ge.a)(u.data)));case 14:r=!0,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),l=!0,i=e.t0;case 23:e.prev=23,e.prev=24,r||null==c.return||c.return();case 26:if(e.prev=26,!l){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(23);case 31:a.setState({stockLoading:!1,stockItems:n});case 32:case"end":return e.stop()}},e,null,[[6,19,23,31],[24,,26,30]])})),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllMaterials()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.itemList,l=a.materialList,i=a.stockItems,c=a.selectedRowKeys,o=a.stockLoading,s=a.requestSaving,u={selectedRowKeys:c,onChange:this.onSelectChange,getCheckboxProps:function(e){return{disabled:"summary"===e._id||"RESERVED"===e.status||"PENDING"===e.detailsStatus}}},d=[];if(i.length){var m=0,h=0,p=0;i.forEach(function(e){c.includes(e._id)&&(m+=Number(e.netWeight),h+=Number(e.grossWeight),p+=Number(e.cones))}),d=i.concat({_id:"summary",netWeight:m,grossWeight:h,cones:p})}0===d.length&&i.length>0&&(d=i);var g=[{title:"Item Code",dataIndex:"materialCode",key:"materialCode",width:"25%",render:function(a,n){return r.a.createElement(Y.a.Item,{key:n.key,style:{marginBottom:"0"},hasFeedback:!0},t("materialCode[".concat(n.key,"]"),{rules:[{required:!0,message:"Material code is required."}]})(r.a.createElement(fe.a,{showSearch:!0,suffixIcon:r.a.createElement(v.a,{type:"search"}),placeholder:"Material code",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!0,notFoundContent:null,allowClear:!0,loading:!0,onChange:function(t){e.handleItemCodeChange(t,n)}},l.map(function(e){return r.a.createElement(fe.a.Option,{key:e.code},e.code)}))))}},{title:"LOT Number",dataIndex:"lotNumber",key:"lotNumber",width:"25%",render:function(e,a){return r.a.createElement(Y.a.Item,{key:a.key,style:{marginBottom:"0"},hasFeedback:!0},t("lotNumber[".concat(a.key,"]"),{rules:[{required:!0,message:"Please enter LOT number"}]})(r.a.createElement(fe.a,{showSearch:!0,suffixIcon:r.a.createElement(v.a,{type:"search"}),placeholder:"LOT Number",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!0,notFoundContent:null,allowClear:!0,loading:!0},a.lotNumbers.map(function(e){return r.a.createElement(fe.a.Option,{key:e},e)}))))}},{title:"Packages",dataIndex:"units",key:"units",render:function(e,a){return r.a.createElement(Y.a.Item,{key:a.key,style:{marginBottom:"0"},hasFeedback:!0},t("units[".concat(a.key,"]"))(r.a.createElement(be.a,{disabled:!0})))}},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{type:"primary",onClick:function(t){t.stopPropagation(),e.handleShowStockItems(a)},icon:"search"},"Stocks"),r.a.createElement(z.a,{type:"primary",onClick:function(t){t.stopPropagation(),e.handleRemoveItem(a)},icon:"close",style:{marginLeft:5}}))}}],f=[{title:"Pack Serial",dataIndex:"packSerial",key:"packSerial",render:function(e,t,a){return a<i.length?e:{children:r.a.createElement("span",{style:{fontWeight:600}},"Total(",c.length,")"),props:{colSpan:4}}}},{title:"LOT Number",dataIndex:"orderItem.lotNumber",key:"orderItem.lotNumber",render:function(e,t,a){return a<i.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Bin",dataIndex:"bin.code",key:"bin.code",render:function(e,t,a){return a<i.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber",render:function(e,t,a){return a<i.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Net Weight (Kg)",dataIndex:"netWeight",key:"netWeight",render:function(e,t,a){return a<i.length?Number(e).toFixed(3):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}},{title:"Gross Weight (Kg)",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t,a){return a<i.length?Number(e).toFixed(3):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}},{title:"Items",dataIndex:"cones",key:"cones",render:function(e,t,a){return a<i.length?e:{children:r.a.createElement("span",{style:{fontWeight:600}},e)}}},{title:"Status",dataIndex:"status",key:"status",render:function(e,t,a){if(a<i.length){var n="";return"AVAILABLE"===e&&(n="#87d068"),"RESERVED"===e&&(n="#2db7f5"),"DISPATCHED"===e&&(n="#108ee9"),"FACTORY_RECEIVED"===e&&(n="#f50"),r.a.createElement(ye.a,{color:n},e)}return{children:"",props:{colSpan:1}}}}];return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"hdd"}),r.a.createElement("span",null,"Add Material Request"))),r.a.createElement(Be,{inner:!0},r.a.createElement(ke.a,{title:"Material Request Details",bordered:!1},r.a.createElement(Y.a,{layout:"vertical",onSubmit:this.handleSubmit},r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{md:8,sm:12},r.a.createElement(Y.a.Item,{label:"Request Number",hasFeedback:!0},t("refNumberSuffix",{rules:[{required:!0,message:"Meterial request number is required."}]})(r.a.createElement(K.a,{prefix:"MRN-".concat(xe()().format("YYYYMMDD"),"-"),placeholder:"Request Number",className:"material-request"})))),r.a.createElement(Se.a,{md:8,sm:4},r.a.createElement(Y.a.Item,{label:"Request Date",hasFeedback:!0},t("requestedDate",{rules:[{required:!0,message:"Valid date is required."}]})(r.a.createElement(ve.a,{placeholder:"Request date",format:"YYYY-MM-DD"})))),r.a.createElement(Se.a,{md:8,sm:8},r.a.createElement(Y.a.Item,{label:"Delivery Location",hasFeedback:!0},t("deliveryLocation",{rules:[{required:!0,message:"Please enter delivery location"}]})(r.a.createElement(K.a,null))))),r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{md:8,sm:24},r.a.createElement(Y.a.Item,{label:"Contact Persion Name",hasFeedback:!0},t("contactPerson",{rules:[{required:!0,message:"Please enter contact person name"}]})(r.a.createElement(K.a,null)))),r.a.createElement(Se.a,{md:8,sm:24},r.a.createElement(Y.a.Item,{label:"Contact Number",hasFeedback:!0},t("contactNumber",{rules:[{required:!0,message:"Please enter contact number"}]})(r.a.createElement(K.a,null))))),n.length>0&&r.a.createElement(Ie.a,{pagination:!1,columns:g,dataSource:n,size:"middle"}),r.a.createElement(z.a,{style:{width:"100%",marginTop:16,marginBottom:16,color:"white",backgroundColor:"#13c2c2"},type:"dashed",onClick:this.handleAddItem,icon:"plus"},"Add Item"),r.a.createElement(q.a,{tip:"Stock loading...",spinning:o},i.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{orientation:"left"},"Available Stocks -"," ",r.a.createElement(z.a,{type:"primary",onClick:this.handleStockRefresh},"Refresh Stocks")),r.a.createElement(Ie.a,{rowKey:"_id",rowSelection:u,columns:f,dataSource:d,pagination:!1}))),r.a.createElement(Ne.a,null),r.a.createElement(z.a,{type:"primary",htmlType:"submit",disabled:0===c.length,loading:s},"Submit Request")))))}}]),t}(n.Component),Ue=Y.a.create()(Ke),ze=a(443),_e=a(25),Ge=a(133),Qe=function(e){var t=e.onMenuClick,a=e.menuOptions,n=void 0===a?[]:a,l=e.buttonStyle,i=e.dropdownProps,c=n.map(function(e){return r.a.createElement(S.a.Item,{key:e.key},e.name)});return r.a.createElement(Ge.a,Object.assign({overlay:r.a.createElement(S.a,{onClick:t},c)},i),r.a.createElement(z.a,{style:Object(_e.a)({border:"none"},l)},r.a.createElement(v.a,{style:{marginRight:2},type:"bars"}),r.a.createElement(v.a,{type:"down"})))},Xe=Object(_e.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),Je=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){e||(a.props.showSearchLoading(!0),Le(t).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){V.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(Y.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{xl:{span:6},md:{span:12}},e("refNumber")(r.a.createElement(K.a.Search,{placeholder:"Material Request Number"}))),r.a.createElement(Se.a,Object.assign({},Xe,{xl:{span:18},md:{span:12}}),r.a.createElement(U.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(z.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(z.a,{onClick:this.handleReset},"Reset"))))))}}]),t}(n.Component),He=Y.a.create()(Je),Ze=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={materialRequests:[],loading:!1},a.getMaterialRequests=function(){a.setState({loading:!0}),ce.get("".concat($).concat(Fe)).then(J).catch(Z).then(function(e){a.setState({materialRequests:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))})},a.handleDelete=function(e){a.setState({loading:!1}),function(e){return ce.delete("".concat($).concat(Fe,"/").concat(e)).then(J).catch(Z)}(e).then(function(){a.setState({loading:!1}),window.location.reload()}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))})},a.handleMenuClick=function(e,t){"delete"===t.key?(a.deleteItem(e),a.getMaterialRequests()):"view"!==t.key&&"deliveryRequest"!==t.key||a.props.history.push("/material-request/view/".concat(e._id))},a.deleteItem=function(e){ze.a.confirm({title:"Delete request",content:"Do you want to delete this request?",onOk:function(){return a.handleDelete(e._id)}})},a.getOperationTasks=function(e){var t=[];return t.push({key:"view",name:"View"}),"PENDING"===e.status&&t.push({key:"delete",name:"Delete"}),t},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({materialRequests:e,loading:!1})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getMaterialRequests()}},{key:"render",value:function(){var e=this,t=this.state,a=t.materialRequests,n=t.loading,l=[{title:"Reqest Number",dataIndex:"refNumber",key:"refNumber"},{title:"Delivery Location",dataIndex:"deliveryLocation",key:"deliveryLocation"},{title:"Requested Date",dataIndex:"requestedDate",key:"requestedDate",render:function(e){return xe()(e).format("YYYY-MM-DD")}},{title:"Created Date",dataIndex:"createdDate",key:"createdDate",render:function(e){return xe()(e).format("YYYY-MM-DD")}},{title:"Contact Person",dataIndex:"contactPerson",key:"contactPerson"},{title:"Contact Number",dataIndex:"contactNumber",key:"contactNumber"},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){var a="";return"PENDING"===e&&(a="volcano"),"PARTIALY_DISPATCHED"===e&&(a="#2db7f5"),"DISPATCHED"===e&&(a="#bae637"),"PARTIALY_RECEIVED"===e&&(a="#135200"),"COMPLETE"===e&&(a="#87d068"),r.a.createElement(ye.a,{color:a},e)}},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Qe,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:e.getOperationTasks(a)})}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"hdd"}),r.a.createElement("span",null,"View Material Requests"))),r.a.createElement(Be,{inner:!0},r.a.createElement(He,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults}),r.a.createElement(Ie.a,{bordered:!0,loading:n,rowKey:"_id",size:"small",columns:l,dataSource:a,style:{marginTop:15}})))}}]),t}(n.Component),$e=a(453),et=a(454),tt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={materialRequest:{},stockItems:[],loading:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;this.setState({loading:!0}),(e=this.props.match.params.id,ce.get("".concat($).concat(Fe,"/").concat(e)).then(J).catch(Z)).then(function(e){var a=e.data,n=a.items.map(function(e){return e.stockItems}).reduce(function(e,t){return e.concat(t)});t.setState({materialRequest:a,stockItems:n,loading:!1})}).catch(function(e){t.setState({loading:!1}),V.a.error("".concat(e))})}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.materialRequest,n=e.stockItems,l=[{title:"LOT Number",dataIndex:"lotNumber",key:"lotNumber"},{title:"Bin",dataIndex:"binCode",key:"binCode"},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight"},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight"},{title:"Items",dataIndex:"cones",key:"cones"},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){var a="";return"AVAILABLE"===e&&(a="#87d068"),"RESERVED"===e&&(a="#2db7f5"),"DISPATCHED"===e&&(a="#108ee9"),"FACTORY_RECEIVED"===e&&(a="#f50"),r.a.createElement(ye.a,{color:a},e)}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,{href:"/material-request/list"},r.a.createElement(v.a,{type:"hdd"}),r.a.createElement("span",null,"View Material Requests")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"lock"}),r.a.createElement("span",null,"Material Request Details"))),r.a.createElement(Be,{inner:!0},r.a.createElement(q.a,{tip:"Loading...",spinning:t},r.a.createElement(ke.a,{title:"Material Request Details",bordered:!1},r.a.createElement($e.a,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement($e.a.Item,{label:"Reference Number"},a.refNumber),r.a.createElement($e.a.Item,{label:"Requested Date"},xe()(a.requestedDate).format("YYYY-MM-DD")),r.a.createElement($e.a.Item,{label:"Delivery Location"},a.deliveryLocation),r.a.createElement($e.a.Item,{label:"Contact Person"},a.contactPerson),r.a.createElement($e.a.Item,{label:"Contact Number"},a.contactNumber),r.a.createElement($e.a.Item,{label:"Status",span:3},r.a.createElement(et.a,{status:"processing",text:a.status}))),r.a.createElement(Ie.a,{rowKey:"_id",pagination:!1,dataSource:a.items,columns:[{title:"Item Description",key:"description",render:function(e,t){return"".concat(t.item.code," # ").concat(t.item.name)}},{title:"LOT",dataIndex:"lotNumber",key:"lotNumber"},{title:"Packages",dataIndex:"units",key:"units"}],title:function(){return r.a.createElement("h3",null,"Requested Items")},bordered:!0}),n.length>0&&r.a.createElement(Ie.a,{rowKey:"_id",pagination:!1,dataSource:n,columns:l,size:"middle",title:function(){return r.a.createElement("h3",null,"Stock Items")},bordered:!0})))))}}]),t}(n.Component),at="/api/packing-types";function nt(){return ce.get("".concat($).concat(at)).then(J).catch(Z)}var rt=Object(_e.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),lt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={packingTypes:[]},a.getAllPackingTypes=function(){nt().then(function(e){a.setState({packingTypes:e.data})}).catch(function(e){V.a.error("".concat(e))})},a.handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){e||(a.props.showSearchLoading(!0),Me(t).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){V.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllPackingTypes()}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.onAddItem,n=t.getFieldDecorator;return r.a.createElement(Y.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{xl:{span:8},md:{span:12}},n("code")(r.a.createElement(K.a.Search,{placeholder:"Material code"}))),r.a.createElement(Se.a,Object.assign({},rt,{xl:{span:16},md:{span:12}}),r.a.createElement(U.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(z.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(z.a,{onClick:this.handleReset},"Reset")),D.hasRole(D.getProfile(),["SUPER_ADMIN"])&&r.a.createElement(z.a,{type:"dashed",onClick:a},"Create")))))}}]),t}(n.Component),it=Y.a.create()(lt),ct=Y.a.Item,ot=fe.a.Option,st=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={items:[],loading:!1,modalVisible:!1,modalType:"create",currentItem:{},packingTypes:[]},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.showModal=function(){a.setState({modalVisible:!0,currentItem:{},modalType:"create"})},a.showEditModal=function(e){e.packingType=e.packingType._id,a.setState({currentItem:e,modalType:"update",modalVisible:!0})},a.handleCancel=function(){a.setState({modalVisible:!1})},a.handleModalSubmit=function(e){e.preventDefault();var t=a.props.form,n=a.state.currentItem,r=n?n._id:"";t.validateFields(function(e,n){e||(r?function(e,t){return ce.put("".concat($).concat(je,"/").concat(e),t).then(J).catch(Z)}.updateMaterial(r,n).then(function(){t.resetFields(),a.setState({modalVisible:!1}),a.getAllMaterials()}).catch(function(e){V.a.error("".concat(e))}):Me({code:n.code}).then(function(e){var r;Array.isArray(e.data)&&e.data.length>0?V.a.error("Item is already exists. Please enter new record."):(r=n,ce.post("".concat($).concat(je),r).then(J).catch(Z)).then(function(){t.resetFields(),a.setState({modalVisible:!1}),a.getAllPackingTypes()}).catch(function(e){V.a.error("".concat(e))})}).catch(function(e){V.a.error("".concat(e))}))})},a.handleDelete=function(e){Ae(e).then(function(){a.getAllPackingTypes()}).catch(function(e){return V.a.error("".concat(e))})},a.handleMenuClick=function(e,t){"edit"===t.key?(a.setState({currentItem:e}),a.showEditModal(e)):"delete"===t.key&&a.deleteItem(e)},a.deleteItem=function(e){ze.a.confirm({title:"Delete measuring type",content:"Do you want to delete this measuring type?",onOk:function(){return a.handleDelete(e._id)}})},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({items:e,loading:!1})},a.getAllMaterials=function(){a.setState({loading:!0}),we().then(function(e){a.setState({items:e.data,loading:!1})}).catch(function(e){V.a.error("".concat(e))})},a.getAllPackingTypes=function(){nt().then(function(e){a.setState({packingTypes:e.data})}).catch(function(e){V.a.error("".concat(e))})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllMaterials(),this.getAllPackingTypes()}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.loading,l=t.modalVisible,i=t.packingTypes,c=t.currentItem,o=void 0===c?{}:c,s=[{title:"Material Code",dataIndex:"code",key:"code"},{title:"Name",dataIndex:"name",key:"name"},{title:"Packing Type",dataIndex:"packingType",key:"packingType",render:function(e){return e.name}},{title:"CreatedAt",dataIndex:"createdAt",key:"createdAt",render:function(e){return xe()(e).format("YYYY-MM-DD")}},{title:"CreatedBy",dataIndex:"createdBy",key:"createdBy",render:function(e){return e.firstName}},{title:"UpdatedBy",dataIndex:"updatedBy",key:"updatedBy",render:function(e){return e?e.firstName:""}}];D.hasRole(D.getProfile(),["SUPER_ADMIN"])&&s.push({title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Qe,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"},{key:"delete",name:"Delete"}]})}});var u=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"database"}),r.a.createElement("span",null,"Material List"))),r.a.createElement(Be,{inner:!0},r.a.createElement(it,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults,onAddItem:this.showModal}),r.a.createElement(Ie.a,{bordered:!0,loading:n,rowKey:"_id",size:"small",columns:s,dataSource:a,pagination:{pageSize:25}}),r.a.createElement(ze.a,{item:o,visible:l,maskClosable:!1,title:"create"===this.state.modalType?"Create Material Item":"Update Material Item",centered:!0,onCancel:this.handleCancel,onOk:this.handleModalSubmit},function(){var t=e.state.modalType;return r.a.createElement(Y.a,{onSubmit:e.handleSubmit},r.a.createElement(ct,Object.assign({label:"Material Code",hasFeedback:!0},e.formLayout),u("code",{initialValue:e.state.currentItem.code,rules:[{required:!0}]})(r.a.createElement(K.a,{placeholder:"Material code",disabled:"update"===t}))),r.a.createElement(ct,Object.assign({label:"Name",hasFeedback:!0},e.formLayout),u("name",{initialValue:e.state.currentItem.name,rules:[{required:!0}]})(r.a.createElement(K.a,{placeholder:"Item name"}))),r.a.createElement(ct,Object.assign({label:"Packing Type",hasFeedback:!0},e.formLayout),u("packingType",{initialValue:e.state.currentItem.packingType,rules:[{required:!0}]})(r.a.createElement(fe.a,{placeholder:"Search packing type"},i.map(function(e){return r.a.createElement(ot,{value:e._id,key:e._id},e.name)})))),r.a.createElement(ct,Object.assign({label:"Made Of",hasFeedback:!0},e.formLayout),u("madeOf",{initialValue:e.state.currentItem.madeOf,rules:[{required:!1}]})(r.a.createElement(K.a,{placeholder:"Made of"}))),r.a.createElement(ct,Object.assign({label:"Colour",hasFeedback:!0},e.formLayout),u("colour",{initialValue:e.state.currentItem.colour,rules:[{required:!1}]})(r.a.createElement(K.a,{placeholder:"Colour"}))))}())))}}]),t}(n.Component),ut=Y.a.create()(st),dt=Y.a.Item,mt={labelCol:{span:6},wrapperCol:{span:14}},ht=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleOk=function(){var e=a.props,t=e.item,n=void 0===t?{}:t,r=e.onOk,l=e.form,i=l.validateFields,c=l.getFieldsValue;i(function(e){if(!e){var t=Object(_e.a)({},c,{key:n.key});r(t)}})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=void 0===t?{}:t,n=e.form,l=e.onOk,i=Object(f.a)(e,["item","form","onOk"]),c=n.getFieldDecorator;return r.a.createElement(ze.a,Object.assign({},i,{onOk:l}),r.a.createElement(Y.a,{layout:"horizontal"},r.a.createElement(dt,Object.assign({label:"Name",hasFeedback:!0},mt),c("name",{initialValue:a.name,rules:[{required:!0}]})(r.a.createElement(K.a,null))),r.a.createElement(dt,Object.assign({label:"Lane",hasFeedback:!0},mt),c("lane",{initialValue:a.lane,rules:[{required:!0}]})(r.a.createElement(K.a,null))),r.a.createElement(dt,Object.assign({label:"State",hasFeedback:!0},mt),c("state",{initialValue:a.state,rules:[{required:!0}]})(r.a.createElement(K.a,null))),r.a.createElement(dt,Object.assign({label:"Country",hasFeedback:!0},mt),c("country",{initialValue:a.country,rules:[{required:!0}]})(r.a.createElement(K.a,null)))))}}]),t}(n.Component),pt=Y.a.create()(ht),gt="/api/suppliers";function ft(){return ce.get("".concat($).concat(gt)).then(J).catch(Z)}var bt=Object(_e.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),yt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){var n;e||(a.props.showSearchLoading(!0),(n=t,ce.post("".concat($).concat(gt,"/filter"),n).then(J).catch(Z)).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){V.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onAddItem,n=t.getFieldDecorator;return r.a.createElement(Y.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{xl:{span:4},md:{span:12}},n("name")(r.a.createElement(K.a.Search,{placeholder:"Search name"}))),r.a.createElement(Se.a,{xl:{span:4},md:{span:12}},n("lane")(r.a.createElement(K.a.Search,{placeholder:"Search lane"}))),r.a.createElement(Se.a,{xl:{span:4},md:{span:12}},n("state")(r.a.createElement(K.a.Search,{placeholder:"Search state"}))),r.a.createElement(Se.a,{xl:{span:4},md:{span:12}},n("country")(r.a.createElement(K.a.Search,{placeholder:"Search country"}))),r.a.createElement(Se.a,Object.assign({},bt,{xl:{span:8},md:{span:12}}),r.a.createElement(U.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(z.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(z.a,{onClick:this.handleReset},"Reset")),r.a.createElement(z.a,{type:"dashed",onClick:a},"Create")))))}}]),t}(n.Component),Et=Y.a.create()(yt),kt="/api/users";function St(e){return ce.delete("".concat($).concat(kt,"/").concat(e)).then(J).catch(Z)}var vt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={suppliers:[],loading:!0,modalVisible:!1,modalType:"create",currentItem:{}},a.getAllSuppliers=function(){ft().then(function(e){a.setState({suppliers:e.data,loading:!1})}).catch(function(e){V.a.error("".concat(e))})},a.showModal=function(){a.setState({modalVisible:!0})},a.showEditModal=function(e){a.setState({modalVisible:!0,currentItem:e,modalType:"update"})},a.handleCancel=function(){a.setState({modalVisible:!1})},a.handleOk=function(){var e=a.formRef.props.form,t=a.state.currentItem;e.validateFields(function(n,r){var l;n||(t._id?function(e,t){return ce.put("".concat($).concat(gt,"/").concat(e),t).then(J).catch(Z)}(t._id,r).then(function(t){e.resetFields(),a.setState({modalVisible:!1}),a.getAllSuppliers()}).catch(function(e){V.a.error("".concat(e))}):(l=r,ce.post("".concat($).concat(gt),l).then(J).catch(Z)).then(function(t){e.resetFields(),a.setState({modalVisible:!1}),a.getAllSuppliers()}).catch(function(e){V.a.error("".concat(e))}))})},a.handleDelete=function(e){St(e).then(function(e){a.getAllSuppliers()}).catch(function(e){V.a.error("".concat(e))})},a.deleteItem=function(e){ze.a.confirm({title:"Delete supplier",content:"Do you want to delete this supplier?",onOk:function(){return a.handleDelete(e._id)}})},a.handleMenuClick=function(e,t){"edit"===t.key?(a.setState({currentItem:e}),a.showEditModal(e)):"delete"===t.key&&a.deleteItem(e)},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({suppliers:e,loading:!1})},a.saveFormRef=function(e){a.formRef=e},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllSuppliers()}},{key:"render",value:function(){var e=this,t=this.state,a=t.suppliers,n=t.loading,l=t.currentItem,i=void 0===l?{}:l,c=t.modalVisible,o=[{title:"Name",dataIndex:"name",key:"name"},{title:"Lane",dataIndex:"lane",key:"lane"},{title:"State",dataIndex:"state",key:"state"},{title:"Country",dataIndex:"country",key:"country"},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Qe,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"},{key:"delete",name:"Delete"}]})}}],s={item:"create"===this.state.modalType?{}:i,visible:this.state.modalVisible,maskClosable:!1,title:"create"===this.state.modalType?"Create User":"Update User",centered:!0};return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"shopping-cart"}),r.a.createElement("span",null,"Suppliers"))),r.a.createElement(Be,{inner:!0},r.a.createElement(Et,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults,onAddItem:this.showModal}),r.a.createElement(Ie.a,{bordered:!0,loading:n,rowKey:"_id",size:"small",columns:o,dataSource:a}),c&&r.a.createElement(pt,Object.assign({},s,{onCancel:this.handleCancel,onOk:this.handleOk,wrappedComponentRef:this.saveFormRef}))))}}]),t}(n.Component),It=Y.a.create()(vt),Nt={"Content-Type":"application/json"};D.getToken()&&(Nt.Authorization="Bearer ".concat(D.getToken()));var Ot=Object(_e.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),xt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){e||(a.props.showSearchLoading(!0),te.a.post("/packing-types/filter",t,{headers:Nt}).then(function(e){e.data&&a.props.onSearchResults(e.data.data)}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onAddItem,n=t.getFieldDecorator;return r.a.createElement(Y.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{xl:{span:4},md:{span:12}},n("name")(r.a.createElement(K.a.Search,{placeholder:"Search type name"}))),r.a.createElement(Se.a,Object.assign({},Ot,{xl:{span:20},md:{span:12}}),r.a.createElement(U.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(z.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(z.a,{onClick:this.handleReset},"Reset")),r.a.createElement(z.a,{type:"dashed",onClick:a},"Create")))))}}]),t}(n.Component),Dt=Y.a.create()(xt),Ct=Y.a.Item,Rt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={items:[],loading:!0,modalVisible:!1,modalType:"create",currentItem:{}},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.getAllPackingType=function(){a.setState({loading:!0}),nt().then(function(e){a.setState({items:e.data,loading:!1})}).catch(function(e){V.a.error("".concat(e))})},a.showModal=function(){a.setState({modalVisible:!0})},a.showEditModal=function(e){a.setState({modalVisible:!0,currentItem:e,modalType:"update"})},a.handleCancel=function(){a.setState({modalVisible:!1})},a.handleModalSubmit=function(e){e.preventDefault();var t=a.props.form,n=a.state.currentItem,r=n?n._id:"";t.validateFields(function(e,n){var l;e||(r?function(e,t){return ce.put("".concat($).concat(at,"/").concat(e),t).then(J).catch(Z)}(r,n).then(function(e){t.resetFields(),a.setState({modalVisible:!1}),a.getAllPackingType()}).catch(function(e){V.a.error("".concat(e))}):(l={name:n.name},ce.post("".concat($).concat(at,"/filter"),l).then(J).catch(Z)).then(function(e){var r;Array.isArray(e.data)&&e.data.length>0?V.a.error("Item is already exists. Please enter new record."):(r=n,ce.post("".concat($).concat(at),r).then(J).catch(Z)).then(function(){t.resetFields(),a.setState({modalVisible:!1}),a.getAllPackingType()}).catch(function(e){V.a.error("".concat(e))})}).catch(function(e){V.a.error("".concat(e))}))})},a.handleDelete=function(e){St(e).then(function(e){a.getAllPackingType()}).catch(function(e){V.a.error("".concat(e))})},a.deleteItem=function(e){ze.a.confirm({title:"Delete type",content:"Do you want to delete this type?",onOk:function(){return a.handleDelete(e._id)}})},a.handleMenuClick=function(e,t){"edit"===t.key?(a.setState({currentItem:e}),a.showEditModal(e)):"delete"===t.key&&a.deleteItem(e)},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({items:e,loading:!1})},a.handleAddItem=function(){a.setState({modalVisible:!0})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllPackingType()}},{key:"render",value:function(){var e=this,t=[{title:"Name",dataIndex:"name",key:"name"},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Qe,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"},{key:"delete",name:"Delete"}]})}}],a=this.props.form.getFieldDecorator,n=this.state,l=n.items,i=n.loading,c=n.modalVisible,o=n.modalType,s=n.currentItem,u=void 0===s?{}:s,d={item:"create"===o?{}:u,visible:c,maskClosable:!1,title:"create"===o?"Create Packing Type":"Update Packing Type",centered:!0};return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"inbox"}),r.a.createElement("span",null,"Packing Types"))),r.a.createElement(Be,{inner:!0},r.a.createElement(Dt,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults,onAddItem:this.handleAddItem}),r.a.createElement(Ie.a,{bordered:!0,loading:i,rowKey:"_id",size:"small",columns:t,dataSource:l}),r.a.createElement(ze.a,Object.assign({},d,{onCancel:this.handleCancel,onOk:this.handleModalSubmit}),r.a.createElement(Y.a,{onSubmit:e.handleSubmit},r.a.createElement(Ct,Object.assign({label:"Name",hasFeedback:!0},e.formLayout),a("name",{initialValue:u.name,rules:[{required:!0}]})(r.a.createElement(K.a,{placeholder:"Packing type"})))))))}}]),t}(n.Component),At=Y.a.create()(Rt),jt="/api/roles";function wt(){return ce.get("".concat($).concat(jt)).then(J).catch(Z)}var Mt=Object(_e.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),Ft=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){var n;e||(a.props.showSearchLoading(!0),(n=t,ce.post("".concat($).concat(jt,"/filter"),n).then(J).catch(Z)).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){V.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onAddItem,n=t.getFieldDecorator;return r.a.createElement(Y.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{xl:{span:4},md:{span:12}},n("title")(r.a.createElement(K.a.Search,{placeholder:"Search role name"}))),r.a.createElement(Se.a,Object.assign({},Mt,{xl:{span:20},md:{span:12}}),r.a.createElement(U.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(z.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(z.a,{onClick:this.handleReset},"Reset")),r.a.createElement(z.a,{type:"dashed",onClick:a},"Create")))))}}]),t}(n.Component),Lt=Y.a.create()(Ft),Wt=Y.a.Item,Tt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={roles:[],loading:!0,modalVisible:!1,modalType:"create",currentItem:{}},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.getAllRoles=function(){a.setState({loading:!0}),wt().then(function(e){a.setState({roles:e.data,loading:!1})}).catch(function(e){V.a.error("".concat(e))})},a.showModal=function(){a.setState({modalVisible:!0})},a.showEditModal=function(e){a.setState({modalVisible:!0,currentItem:e,modalType:"update"})},a.handleCancel=function(){a.setState({modalVisible:!1})},a.handleModalSubmit=function(e){e.preventDefault();var t=a.props.form,n=a.state.currentItem,r=n?n._id:"";t.validateFields(function(e,n){var l;e||(r?function(e,t){return ce.put("".concat($).concat(jt,"/").concat(e),t).then(J).catch(Z)}(n).then(function(e){t.resetFields(),a.setState({modalVisible:!1}),a.getAllRoles()}).catch(function(e){V.a.error("".concat(e))}):(l=n,ce.post("".concat($).concat(jt),l).then(J).catch(Z)).then(function(e){t.resetFields(),a.setState({modalVisible:!1}),a.getAllRoles()}).catch(function(e){V.a.error("".concat(e))}))})},a.handleDelete=function(e){(function(e){return ce.delete("".concat($).concat(jt,"/").concat(e)).then(J).catch(Z)})(e).then(function(e){a.getAllRoles()}).catch(function(e){V.a.error("".concat(e))})},a.deleteItem=function(e){ze.a.confirm({title:"Delete role",content:"Do you want to delete this role?",onOk:function(){return a.handleDelete(e._id)}})},a.handleMenuClick=function(e,t){"edit"===t.key?(a.setState({currentItem:e}),a.showEditModal(e)):"delete"===t.key&&a.deleteItem(e)},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({roles:e,loading:!1})},a.handleAddItem=function(){a.setState({modalVisible:!0})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllRoles()}},{key:"render",value:function(){var e=this,t=[{title:"Title",dataIndex:"title",key:"title"},{title:"CreatedAt",dataIndex:"createdAt",key:"createdAt",render:function(e){return xe()(e).format("YYYY-MM-DD")}},{title:"CreatedBy",dataIndex:"createdBy",key:"createdBy",render:function(e){return e.firstName}},{title:"UpdatedAt",dataIndex:"updatedAt",key:"updatedAt",render:function(e){return xe()(e).format("YYYY-MM-DD")}},{title:"UpdatedBy",dataIndex:"updatedBy",key:"updatedBy",render:function(e){return e?e.firstName:""}},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Qe,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"},{key:"delete",name:"Delete"}]})}}],a=this.props.form.getFieldDecorator,n=this.state,l=n.roles,i=n.loading,c=n.currentItem,o=void 0===c?{}:c,s={item:"create"===this.state.modalType?{}:o,visible:this.state.modalVisible,maskClosable:!1,title:"create"===this.state.modalType?"Create Role":"Update Role",centered:!0};return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"lock"}),r.a.createElement("span",null,"User Roles"))),r.a.createElement(Be,{inner:!0},r.a.createElement(Lt,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults,onAddItem:this.handleAddItem}),r.a.createElement(Ie.a,{bordered:!0,loading:i,rowKey:"_id",size:"small",columns:t,dataSource:l}),r.a.createElement(ze.a,Object.assign({},s,{onCancel:this.handleCancel,onOk:this.handleModalSubmit}),r.a.createElement(Y.a,{onSubmit:e.handleSubmit},r.a.createElement(Wt,Object.assign({label:"Title",hasFeedback:!0},e.formLayout),a("title",{initialValue:o.title,rules:[{required:!0}]})(r.a.createElement(K.a,{placeholder:"User role title"})))))))}}]),t}(n.Component),Pt=Y.a.create()(Tt),Yt=a(85),Vt=K.a.Search,qt=Object(_e.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),Bt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){var n;e||(a.props.showSearchLoading(!0),(n=t,ce.post("".concat($).concat(kt,"/filter"),n).then(J).catch(Z)).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){V.a.error("".concat(e)),a.props.onSearchResults([])}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onAddItem,n=t.getFieldDecorator;return r.a.createElement(Y.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{xl:{span:4},md:{span:12}},n("firstName")(r.a.createElement(Vt,{placeholder:"Search first name",onPressEnter:this.handleSearch}))),r.a.createElement(Se.a,{xl:{span:4},md:{span:12}},n("lastName")(r.a.createElement(Vt,{placeholder:"Search last name",onPressEnter:this.handleSearch}))),r.a.createElement(Se.a,{xl:{span:4},md:{span:12}},n("email")(r.a.createElement(Vt,{placeholder:"Search email",onPressEnter:this.handleSearch}))),r.a.createElement(Se.a,Object.assign({},qt,{xl:{span:12},md:{span:12}}),r.a.createElement(U.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(z.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(z.a,{onClick:this.handleReset},"Reset")),r.a.createElement(z.a,{type:"primary",onClick:a},"Create")))))}}]),t}(n.Component),Kt=Y.a.create()(Bt),Ut=Y.a.Item,zt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],roles:[],loading:!0,modalVisible:!1,modalType:"create",currentItem:{}},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.getAllUsers=function(){a.setState({loading:!0}),ce.get("".concat($).concat(kt)).then(J).catch(Z).then(function(e){a.setState({users:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))})},a.getAllRoles=function(){a.setState({loading:!0}),wt().then(function(e){a.setState({roles:e.data})}).catch(function(e){V.a.error("".concat(e))})},a.handleSubmit=function(e){e.stopPropagation(),a.setState({loading:!0})},a.handleReset=function(e){e.stopPropagation();var t=a.props.form,n=t.getFieldsValue,r=t.setFieldsValue,l=n();for(var i in console.log("Reset fields1: ",l),l)({}).hasOwnProperty.call(l,i)&&(l[i]instanceof Array?l[i]=[]:l[i]=void 0);console.log("Reset fields2: ",l),r(l),a.handleSubmit()},a.showModal=function(){a.setState({modalVisible:!0})},a.showEditModal=function(e){a.setState({modalVisible:!0,currentItem:e,modalType:"update"})},a.handleCancel=function(){a.props.form.resetFields(),a.setState({modalVisible:!1})},a.handleModalSubmit=function(e){e.preventDefault();var t=a.props.form,n=a.state.currentItem,r=n?n._id:"";t.validateFields(function(e,n){var l;e||(r?function(e,t){return ce.put("".concat($).concat(kt,"/").concat(e),t).then(J).catch(Z)}(r,n).then(function(e){t.resetFields(),a.setState({modalVisible:!1}),a.getAllUsers()}).catch(function(e){a.setState({modalVisible:!1}),V.a.error("".concat(e))}):(l=n,ce.post("".concat($).concat(kt),l).then(J).catch(Z)).then(function(e){t.resetFields(),a.setState({modalVisible:!1}),a.getAllUsers()}).catch(function(e){a.setState({modalVisible:!1}),V.a.error("".concat(e))}))})},a.handleDelete=function(e){St(e).then(function(e){a.getAllUsers()}).catch(function(e){V.a.error("".concat(e))})},a.deleteItem=function(e){ze.a.confirm({title:"Delete user",content:"Do you want to delete this user?",onOk:function(){return a.handleDelete(e._id)}})},a.handleMenuClick=function(e,t){"edit"===t.key?(a.setState({currentItem:e}),a.showEditModal(e)):"delete"===t.key&&a.deleteItem(e)},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({users:e,loading:!1})},a.handleAddItem=function(){a.setState({modalVisible:!0})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllUsers(),this.getAllRoles()}},{key:"render",value:function(){var e=this,t=[{title:"First Name",dataIndex:"firstName",key:"firstName"},{title:"Last Name",dataIndex:"lastName",key:"lastName"},{title:"Email",dataIndex:"email",key:"email"},{title:"Roles",dataIndex:"roles",key:"roles",render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(ye.a,{key:e._id},e.title)}))}},{title:"CreatedBy",dataIndex:"createdBy",key:"createdBy",render:function(e){return e.firstName}},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Qe,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"},{key:"delete",name:"Delete"}]})}}],a=this.props.form.getFieldDecorator,n=this.state.currentItem,l=void 0===n?{}:n,i=null;0!==Object.entries(l).length&&(i=l.roles.map(function(e){return e._id}));var c={item:"create"===this.state.modalType?{}:l,visible:this.state.modalVisible,maskClosable:!1,title:"create"===this.state.modalType?"Create User":"Update User",centered:!0};return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"user"}),r.a.createElement("span",null,"Users"))),r.a.createElement(Be,{inner:!0},r.a.createElement(Kt,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults,onAddItem:this.handleAddItem}),r.a.createElement(Ie.a,{bordered:!0,loading:this.state.loading,rowKey:"_id",columns:t,dataSource:this.state.users,size:"small"}),r.a.createElement(ze.a,Object.assign({},c,{onCancel:this.handleCancel,onOk:this.handleModalSubmit}),r.a.createElement(Y.a,null,r.a.createElement(Ut,Object.assign({label:"First Name",hasFeedback:!0},e.formLayout),a("firstName",{initialValue:l.firstName,rules:[{required:!0}]})(r.a.createElement(K.a,{placeholder:"First Name"}))),r.a.createElement(Ut,Object.assign({label:"Last Name",hasFeedback:!0},e.formLayout),a("lastName",{initialValue:l.lastName,rules:[{required:!0}]})(r.a.createElement(K.a,{placeholder:"Last Name"}))),r.a.createElement(Ut,Object.assign({label:"Email",hasFeedback:!0},e.formLayout),a("email",{initialValue:l.email,rules:[{type:"email",message:"The input is not valid E-mail"},{required:!0}]})(r.a.createElement(K.a,{placeholder:"Email address"}))),r.a.createElement(Ut,Object.assign({label:"Password",hasFeedback:!0},e.formLayout),a("password",{initialValue:l.password,rules:[{required:!0}]})(r.a.createElement(K.a,{placeholder:"Password",type:"password"}))),r.a.createElement(Ut,Object.assign({label:"Roles",hasFeedback:!0},e.formLayout),a("roles",{initialValue:i,rules:[{required:!0,message:"At least one role is required"}]})(r.a.createElement(Yt.a.Group,null,r.a.createElement(U.a,null,e.state.roles.map(function(e){return r.a.createElement(Se.a,{span:24,key:e._id},r.a.createElement(Yt.a,{value:e._id},e.title))})))))))))}}]),t}(n.Component),_t=Y.a.create()(zt),Gt=Object(_e.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),Qt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){e||(a.props.showSearchLoading(!0),Ce(t).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){V.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(Y.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{xl:{span:8},md:{span:12}},e("code")(r.a.createElement(K.a.Search,{placeholder:"Packing List #"}))),r.a.createElement(Se.a,Object.assign({},Gt,{xl:{span:16},md:{span:12}}),r.a.createElement(U.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(z.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(z.a,{onClick:this.handleReset},"Reset"))))))}}]),t}(n.Component),Xt=Y.a.create()(Qt),Jt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={purchaseOrders:[],selectedRowKeys:[],loading:!0,loadingApproval:!1,loadingApprove:!1,loadingReject:!1,modalVisible:!1,viewVisible:!1,approveOrRejectModalVisible:!1,approveOrRejectStatus:"",modalType:"create",currentItem:{}},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.getAllOrders=function(){a.setState({loading:!0}),ce.get("".concat($).concat(De)).then(J).catch(Z).then(function(e){a.setState({purchaseOrders:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))})},a.showModal=function(){a.setState({modalVisible:!0})},a.handleDelete=function(e){Ae(e).then(function(e){a.getAllOrders()}).catch(function(e){V.a.error("".concat(e))})},a.deleteItem=function(e){ze.a.confirm({title:"Delete purchase order",content:"Do you want to delete this purchase-order?",onOk:function(){return a.handleDelete(e._id)}})},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({purchaseOrders:e,loading:!1})},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.handleApprove=function(){a.setState({approveOrRejectStatus:"APPROVED",approveOrRejectModalVisible:!0})},a.handleReject=function(){a.setState({approveOrRejectStatus:"CANCEL",approveOrRejectModalVisible:!0})},a.handleApproveOrRejectSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||(a.setState({approveOrRejectModalVisible:!1,approveOrRejectStatus:""}),a.updateApproveOrRejectOrder(a.state.approveOrRejectStatus,t.comment))})},a.handleApproveOrRejectCancel=function(){a.props.form.resetFields(),a.setState({approveOrRejectModalVisible:!1,approveOrRejectStatus:""})},a.handleMenuClick=function(e,t){"edit"===t.key?a.props.history.push("/purchase-orders/edit/".concat(e._id)):"sendForApproval"===t.key?a.handlePOApprovalStatusUpdate(e._id):"stockUpdate"===t.key?a.props.history.push("/purchase-orders/stock-update/".concat(e._id)):"delete"===t.key?a.deleteItem(e):"view"===t.key?a.props.history.push("/purchase-orders/view/".concat(e._id)):"stocksPrint"===t.key&&a.props.history.push("/purchase-orders/stocks-print/".concat(e._id))},a.getOperationTasks=function(e){var t=[];return D.hasRole(D.getProfile(),["SUPER_ADMIN","DATA_ENTRY_ADMIN"])&&("PENDING"!==e.status&&"APPROVAL_PENDING"!==e.status&&"APPROVED"!==e.status||t.push({key:"delete",name:"Delete"}),t.push({key:"edit",name:"Edit"}),t.push({key:"stockUpdate",name:"Stock update"})),t.push({key:"view",name:"View"}),"COMPLETE"===e.status&&t.push({key:"stocksPrint",name:"Barcode Data"}),t},a.handleViewOnClose=function(){a.setState({viewVisible:!1,currentItem:{}})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllOrders()}},{key:"render",value:function(){var e=this,t=this.state,a=t.purchaseOrders,n=t.loading,l=[{title:"PackingList #",dataIndex:"code",key:"code"},{title:"Packing Date",dataIndex:"orderDate",key:"orderDate",render:function(e){return xe()(e).format("YYYY-MM-DD")}},{title:"Received Date",dataIndex:"receivedDate",key:"receivedDate",render:function(e){return e&&xe()(e).format("YYYY-MM-DD")}},{title:"Net Weight (Kg)",dataIndex:"netWeight",key:"netWeight",render:function(e,t){return Number(e).toFixed(3)}},{title:"Gross Weight (Kg)",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t){return Number(e).toFixed(3)}},{title:"Status",key:"status",dataIndex:"status",render:function(e,t){var a="";return"COMPLETE"===e&&(a="#87d068"),"APPROVED"===e&&(a="#2db7f5"),"RECEIVE_PENDING"===e&&(a="#108ee9"),r.a.createElement(ye.a,{color:a},e)}},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Qe,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:e.getOperationTasks(a)})}}];return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"hdd"}),r.a.createElement("span",null,"View Packing List"))),r.a.createElement(Be,{inner:!0},r.a.createElement(Xt,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults}),r.a.createElement(Ie.a,{bordered:!0,loading:n,rowKey:"_id",columns:l,dataSource:a,size:"small",pagination:{pageSize:25}})))}}]),t}(n.Component),Ht=Y.a.create()(Jt),Zt={"Content-Type":"application/json"};D.getToken()&&(Zt.Authorization="Bearer ".concat(D.getToken()));var $t=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={purchaseOrders:[],loading:!0,modalVisible:!1,modalType:"create",currentItem:{}},a.handleMenuClick=function(e,t){"edit"===t.key&&a.props.history.push("/purchase-orders/good-received/".concat(e._id))},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({purchaseOrders:e,loading:!1})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/purchase-orders",{headers:Zt}).then(function(e){return e.json()}).then(function(t){e.setState({purchaseOrders:t.data,loading:!1})})}},{key:"render",value:function(){var e=this,t=[{title:"PO Number",dataIndex:"code",key:"code",render:function(e){return r.a.createElement("a",{href:"#/"},e)}},{title:"PO Date",dataIndex:"orderDate",key:"orderDate",render:function(e){return xe()(e).format("YYYY-MM-DD")}},{title:"Expected Date",dataIndex:"expectedDate",key:"expectedDate",render:function(e){return xe()(e).format("YYYY-MM-DD")}},{title:"Supplier",dataIndex:"supplier.name",key:"supplier"},{title:"Items",dataIndex:"items",key:"items",render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(ye.a,{key:e._id},"[".concat(e.item.code,"] - [").concat(e.orderUnits,"]"))}))}},{title:"Status",key:"status",dataIndex:"status"},{title:"Created At",dataIndex:"_createdAt",key:"_createdAt",render:function(e){return xe()(e).format("YYYY-MM-DD")}},{title:"Updated At",dataIndex:"_updatedAt",key:"_updatedAt",render:function(e){return xe()(e).format("YYYY-MM-DD")}},{title:"Created By",dataIndex:"createdBy.firstName",key:"createdBy.firstName"},{title:"Updated By",dataIndex:"updatedBy.firstName",key:"updatedBy.firstName"},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Qe,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"}]})}}];return r.a.createElement("div",null,r.a.createElement(Xt,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults}),r.a.createElement(Ie.a,{loading:this.state.loading,rowKey:"_id",columns:t,dataSource:this.state.purchaseOrders}))}}]),t}(n.Component),ea="/api/lot-numbers";function ta(){return ce.get("".concat($).concat(ea)).then(J).catch(Z)}function aa(e){return ce.post("".concat($).concat(ea,"/filter"),e).then(J).catch(Z)}a(426);var na=K.a.Group,ra=fe.a.Option,la=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).itemIndex=0,a.state={supplierList:[],lotNumberList:[],materialList:[],packingTypeList:[],measuringTypes:[],itemList:[],removedOrderItems:[],intervalIsSet:!1,purchaseOrder:null,searchResults:[],searchVisible:!1,modalType:"Create",customizablePackingNumber:!1},a.getAllSuppliers=function(){ft().then(function(e){a.setState({supplierList:e.data})}).catch(function(e){V.a.error("".concat(e))})},a.getAllLotNumbers=function(){ta().then(function(e){a.setState({lotNumberList:e.data})}).catch(function(e){V.a.error("".concat(e))})},a.getAllMaterials=function(){we().then(function(e){a.setState({materialList:e.data})}).catch(function(e){V.a.error("".concat(e))})},a.getPurchaseOrder=function(e){Re(e).then(function(e){console.log("Update:",e.data);var t=e.data,n=[],r={},l={},i={},c={},o={};t.items.forEach(function(e,t){r[t]=e.item.code,l[t]=e.lotNumber,i[t]=e.units,c[t]=e.netWeight,o[t]=e.grossWeight,e.item=e.item.code,e.key=t,delete e.receivedUnits,delete e.pendingUnits,delete e.purchaseOrder,delete e.createdBy,delete e.createdAt,delete e.updatedAt,n.push(e)}),a.itemIndex=n.length,t.materialCode=r,t.lotNumber=l,t.units=i,t.netWeight=c,t.grossWeight=o,a.setState({purchaseOrder:t,itemList:n,modalType:"Edit"})}).catch(function(e){V.a.error("".concat(e))})},a.handleAddItem=function(){var e={};e.key=a.itemIndex,a.setState({itemList:[].concat(Object(ge.a)(a.state.itemList),[e])}),a.itemIndex+=1},a.handleRemoveItem=function(e){if(e._id)ze.a.confirm({title:"Delete Item",content:"Are you sure to delete this item?",onOk:function(){var t=a.state.itemList;t.includes(e)&&(t.splice(t.indexOf(e),1),a.setState({itemList:t,removedOrderItems:[].concat(Object(ge.a)(a.state.removedOrderItems),[e._id])}))}});else{var t=a.state.itemList;t.includes(e)&&(t.splice(t.indexOf(e),1),a.setState({itemList:t,removedOrderItems:[].concat(Object(ge.a)(a.state.removedOrderItems),[e._id])}))}},a.calculateTotalNetWeight=function(){var e=a.state.purchaseOrder;console.log("List:",e.netWeight),e.netWeight=e.netWeight.reduce(function(e,t){return e+t}),a.setState({purchaseOrder:e})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var n=a.state,r=n.materialList,l=n.customizablePackingNumber;t.items=a.state.itemList.map(function(e){return{_id:e._id?e._id:null,item:r.find(function(a){return a.code===t.materialCode[e.key]})._id,lotNumber:t.lotNumber[e.key],units:t.units[e.key],netWeight:t.netWeight[e.key],grossWeight:t.grossWeight[e.key]}}),delete t.materialCode,delete t.lotNumber,delete t.units,delete t.netWeight,delete t.grossWeight,t.netWeight=t.items.map(function(e){return e.netWeight}).reduce(function(e,t){return e+t}),t.grossWeight=t.items.map(function(e){return e.grossWeight}).reduce(function(e,t){return e+t}),l?(t.codePrefix="".concat(t.codePrefix1,"-").concat(xe()(t.codePrefix2).format("YYYYMMDD"),"-"),t.code=t.codePrefix+t.codeSuffix,delete t.codePrefix1,delete t.codePrefix2):(t.codePrefix="STR-BNS-".concat(xe()().format("YYYYMMDD"),"-"),t.code=t.codePrefix+t.codeSuffix),a.state.purchaseOrder?a.state.purchaseOrder.code!=t.code?Ce({code:t.code}).then(function(e){Array.isArray(e.data)&&e.data.length>0&&V.a.error("Packing list number is already exists. Please try with another value.")}).catch(function(e){V.a.error("".concat(e))}):(i=a.state.purchaseOrder._id,c=t,ce.put("".concat($).concat(De,"/").concat(i),c).then(J).catch(Z)).then(function(){a.props.history.push("/purchase-orders/list")}).catch(function(e){V.a.error("".concat(e))}):Ce({code:t.code}).then(function(e){var n;Array.isArray(e.data)&&e.data.length>0?V.a.error("Packing list number is already exists. Please enter new number."):(n=t,ce.post("".concat($).concat(De),n).then(J).catch(Z)).then(function(){a.props.history.push("/purchase-orders/list")}).catch(function(e){V.a.error("".concat(e))})}).catch(function(e){V.a.error("".concat(e))})}var i,c})},a.handleCustomizePackingNumber=function(e){a.setState({customizablePackingNumber:e.target.checked})},a.handleFieldChange=function(e,t,n){var r=a.state.itemList.map(function(a){var r=Object.assign({},a);return r.key===n?(r[t]=e,r):r});a.setState({itemList:r})},a.handleCancel=function(){a.props.history.push("/purchase-orders/list")},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllSuppliers(),this.getAllMaterials(),this.getAllLotNumbers(),this.props.match.params.id&&this.getPurchaseOrder(this.props.match.params.id)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.supplierList,l=a.lotNumberList,i=a.materialList,c=a.itemList,o=a.purchaseOrder,s=a.modalType,u=a.customizablePackingNumber,d=[];if(c.length){var m=0,h=0,p=0;c.forEach(function(e){m+=Number(e.netWeight),h+=Number(e.grossWeight),p+=Number(e.units)}),d=c.concat({key:"summary",netWeight:m,grossWeight:h,units:p})}0===d.length&&c.length>0&&(d=c);var g=[{title:"Item Code",dataIndex:"materialCode",key:"materialCode",width:"30%",render:function(e,a,n){return n<c.length?r.a.createElement(Y.a.Item,{key:a.key,style:{marginBottom:"0"},hasFeedback:!0},t("materialCode[".concat(a.key,"]"),{initialValue:o&&o.materialCode[a.key],rules:[{required:!0,message:"Material code is required."}]})(r.a.createElement(fe.a,{showSearch:!0,suffixIcon:r.a.createElement(v.a,{type:"search"}),placeholder:"Material code",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!0,notFoundContent:null,allowClear:!0},i.map(function(e){return r.a.createElement(fe.a.Option,{key:e.code},e.code)})))):{children:r.a.createElement("span",{style:{fontWeight:600}},"Total"),props:{colSpan:2}}}},{title:"LOT Number",dataIndex:"lotNumber",key:"lotNumber",width:"30%",render:function(e,a,n){return n<c.length?r.a.createElement(Y.a.Item,{key:a.key,style:{marginBottom:"0"},hasFeedback:!0},t("lotNumber[".concat(a.key,"]"),{initialValue:o&&o.lotNumber[a.key],rules:[{required:!0,message:"LOT number is required."}]})(r.a.createElement(fe.a,{showSearch:!0,suffixIcon:r.a.createElement(v.a,{type:"search"}),placeholder:"LOT Number",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!0,notFoundContent:null},l.map(function(e){return r.a.createElement(fe.a.Option,{key:e.lotNumber},e.lotNumber)})))):{children:{text:e},props:{colSpan:0}}}},{title:"Packages",dataIndex:"units",key:"units",render:function(a,n,l){return l<c.length?r.a.createElement(Y.a.Item,{key:n.key,style:{marginBottom:"0"},hasFeedback:!0},t("units[".concat(n.key,"]"),{initialValue:o&&o.units[n.key],rules:[{required:!0,message:"Packages are required."}]})(r.a.createElement(be.a,{placeholder:"Packages",min:n._id?n.receivedUnits:0,onChange:function(t){return e.handleFieldChange(t,"units",n.key)}}))):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(a)&&a)}},{title:"Net Weight (Kg)",dataIndex:"netWeight",key:"netWeight",render:function(a,n,l){return l<c.length?r.a.createElement(Y.a.Item,{key:n.key,style:{marginBottom:"0"},hasFeedback:!0},t("netWeight[".concat(n.key,"]"),{initialValue:o&&o.netWeight[n.key],rules:[{required:!0,message:"Net weight is required."}]})(r.a.createElement(be.a,{placeholder:"Net Weight",onChange:function(t){return e.handleFieldChange(t,"netWeight",n.key)}}))):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(a)&&Number(a).toFixed(3))}},{title:"Gross Weight (Kg)",dataIndex:"grossWeight",key:"grossWeight",render:function(a,n,l){return l<c.length?r.a.createElement(Y.a.Item,{key:n.key,style:{marginBottom:"0"},hasFeedback:!0},t("grossWeight[".concat(n.key,"]"),{initialValue:o&&o.grossWeight[n.key],rules:[{required:!0,message:"Gross weight is required."}]})(r.a.createElement(be.a,{placeholder:"Gross Weight",onChange:function(t){return e.handleFieldChange(t,"grossWeight",n.key)}}))):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(a)&&Number(a).toFixed(3))}},{title:"",key:"operation",render:function(t,a,n){return n<c.length?r.a.createElement(z.a,{type:"primary",size:"small",icon:"close",onClick:function(t){t.stopPropagation(),e.handleRemoveItem(a)}}):{children:{text:t},props:{colSpan:0}}}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"plus-square"}),r.a.createElement("span",null,"Create Packing List"))),r.a.createElement(Be,{inner:!0},r.a.createElement(ke.a,{title:"Detail Packing List",bordered:!1},r.a.createElement(Y.a,{layout:"vertical",onSubmit:this.handleSubmit},r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{lg:8,md:12,sm:12},u&&r.a.createElement(Y.a.Item,{label:"Packing List No",hasFeedback:!0,style:{marginBottom:0}},r.a.createElement(na,{compact:!0},t("codePrefix1",{initialValue:"STR-BNS"})(r.a.createElement(K.a,{style:{width:"30%"},readOnly:!0})),"-",t("codePrefix2",{initialValue:o&&o.code.substring(o.code.indexOf("STR-BNS-"),8),rules:[{required:!0,message:"Date is required."}]})(r.a.createElement(ve.a,{style:{width:"35%"},format:"YYYYMMDD"})),"-",t("codeSuffix",{initialValue:o&&o.codeSuffix,rules:[{required:!0,message:"Number is required."}]})(r.a.createElement(K.a,{style:{width:"30%"},placeholder:"Number"})))),!u&&r.a.createElement(Y.a.Item,{label:"Packing List No",hasFeedback:!0,style:{marginBottom:0}},t("codeSuffix",{initialValue:o&&o.codeSuffix,rules:[{required:!0,message:"Packing list number is required."}]})(r.a.createElement(K.a,{prefix:o?o.codePrefix:"STR-BNS-".concat(xe()().format("YYYYMMDD"),"-"),placeholder:"Packing Number",className:"order",style:{width:280}}))),r.a.createElement(Yt.a,{onChange:this.handleCustomizePackingNumber,style:{marginBottom:24}},"Customize")),r.a.createElement(Se.a,{xl:{span:5},lg:{span:4},md:{span:4},sm:4},r.a.createElement(Y.a.Item,{label:"Date",hasFeedback:!0},t("orderDate",{rules:[{required:!0,message:"Valid packing date is required."}],initialValue:o&&o.orderDate?xe()(this.state.purchaseOrder.orderDate):null})(r.a.createElement(ve.a,{placeholder:"Order date",format:"YYYY-MM-DD"})))),r.a.createElement(Se.a,{xl:{span:5},lg:{span:4},md:{span:4},sm:4},r.a.createElement(Y.a.Item,{label:"Received Date",hasFeedback:!0},t("receivedDate",{rules:[{required:!1,message:"Valid received date is required."}],initialValue:o&&o.receivedDate?xe()(this.state.purchaseOrder.receivedDate):null})(r.a.createElement(ve.a,{placeholder:"Received date",format:"YYYY-MM-DD"})))),r.a.createElement(Se.a,{lg:6,md:4,sm:4},r.a.createElement(Y.a.Item,{label:"Supplier",hasFeedback:!0},t("supplier",{initialValue:o&&o.supplier.name,rules:[{required:!0,message:"Supplier is required."}]})(r.a.createElement(fe.a,{placeholder:"Please select a supplier"},n.map(function(e){return r.a.createElement(ra,{value:e._id,key:e._id},e.name)})))))),c.length>0&&r.a.createElement(Ie.a,{pagination:!1,columns:g,dataSource:d,size:"small"}),r.a.createElement(z.a,{style:{width:"100%",marginTop:16,marginBottom:16,color:"white",backgroundColor:"#13c2c2"},type:"dashed",onClick:this.handleAddItem,icon:"plus"},"Add Packing Item"),r.a.createElement(Ne.a,null),r.a.createElement(z.a,{type:"primary",htmlType:"submit",disabled:0===c.length},"".concat(s," Packing List")),r.a.createElement(z.a,{type:"primary",style:{marginLeft:10},onClick:this.handleCancel},"Cancel")))))}}]),t}(n.Component),ia=Y.a.create()(la),ca=a(442),oa=a(455),sa=a(450),ua=fe.a.Option,da=0,ma=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,purchaseOrder:{code:"",subCode:"",orderDate:null,expectedDate:null,supplier:{_id:""},shipmentMode:"",items:[]},stockItems:[],orderItems:[],receivedItems:[],existingReceivedItems:[],measuringTypes:[],storeBins:[],modalVisible:!1,stockUpdate:!1,stockBulkUpdate:!1,modalType:"create",currentItem:{},lotNumbers:[]},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.getPurchaseOrder=function(e){e&&(a.setState({loading:!0}),Re(a.props.match.params.id).then(function(e){var t=e.data.items;a.setState({purchaseOrder:e.data,orderItems:t,loading:!1})}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))}))},a.getAllBins=function(){a.setState({loading:!0}),Te().then(function(e){a.setState({storeBins:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))})},a.getStockItemsByPurchaseOrder=function(e){e&&Pe(e).then(function(e){a.setState({stockItems:e.data})}).catch(function(e){V.a.error("".concat(e))})},a.binStockBatchInsert=function(e){var t;(t=e,ce.post("".concat($).concat(We,"/stocks/batch"),t).then(J).catch(Z)).then(function(){a.props.history.push("/purchase-orders/list")}).catch(function(e){V.a.error("".concat(e))})},a.createBinStock=function(e){(function(e,t){return ce.post("".concat($).concat(We,"/").concat(e,"/stocks"),t).then(J).catch(Z)})(e.stockItem.bin,e).then(function(){a.setState({modalVisible:!1,stockUpdate:!1}),window.location.reload()}).catch(function(e){a.setState({modalVisible:!1,stockUpdate:!1}),V.a.error("".concat(e))})},a.showModal=function(){a.setState({modalVisible:!0,currentItem:{}})},a.handleModalSubmit=function(e){e.preventDefault(),e.stopPropagation();var t=a.props.form,n=a.state,r=n.orderItems,l=n.storeBins,i=n.purchaseOrder;t.validateFields(function(e,n){if(!e){a.setState({stockUpdate:!0});var c={};c.key=da++;var o=r.find(function(e){return e.lotNumber===n.lotNumber}),s=l.find(function(e){return e.code===n.bin});c.orderItem=o._id,c.bin=s._id,c.units=n.stockUnits,c.lotNumber=o.lotNumber,c.itemCode=o.item.code,c.binCode=s.code,c.packingListNumber=i.code,console.log("Stock Item:",c),t.resetFields(),a.createBinStock({stockItem:c})}})},a.handleCancel=function(){a.props.form.resetFields(),a.setState({modalVisible:!1})},a.showEditModal=function(e){a.setState({modalVisible:!0,modalType:"update"})},a.showAddStockModal=function(e){a.setState({modalVisible:!0,currentItem:e})},a.handleMenuClick=function(e,t){"delete"===t.key&&a.deleteItem(e)},a.deleteItem=function(e){ze.a.confirm({title:"Delete received item",content:"Do you want to delete this item?",onOk:function(){return a.handleDelete(e)}})},a.handleDelete=function(e){var t=a.state.receivedItems;t.includes(e)&&(t.splice(t.indexOf(e),1),a.setState({receivedItems:t}))},a.handleItemReceived=function(e){e.preventDefault(),e.stopPropagation();var t=a.state.receivedItems,n=[];t.forEach(function(e){var t={};t.bin=e.bin._id,t.orderItem=e.orderItem._id,t.lotNumber=e.orderItem.lotNumber,t.itemCode=e.orderItem.item.code,t.binCode=e.bin.code;for(var a=e.runningNumerFrom;a<e.units+e.runningNumerFrom;a++)t.runningNumber=a+"/"+e.orderItem.units,n.push(Object.assign({},t))}),console.log("Bin Stocks: ",n),a.binStockBatchInsert({stockItems:n})},a.handleUpdateStockItems=function(){a.setState({stockBulkUpdate:!0});var e,t=a.state.stockItems.map(function(e){return{_id:e._id,update:{netWeight:e.netWeight,grossWeight:e.grossWeight,cones:e.cones,detailsStatus:e.netWeight&&e.grossWeight&&e.cones?"COMPLETE":"PENDING"}}});(e={stockItems:t},ce.put("".concat($).concat(We,"/stocks/batch"),e).then(J).catch(Z)).then(function(){a.setState({stockBulkUpdate:!1}),V.a.success("Successfuly updated the stocks")}).catch(function(e){a.setState({stockBulkUpdate:!1}),V.a.error("".concat(e))})},a.handleFieldChange=function(e,t,n){var r=a.state.stockItems.map(function(a){var r=Object.assign({},a);return r._id===n?(r[t]=e,r):r});a.setState({stockItems:r})},a.calculatePendingQuantity=function(e,t){if(t.length>0){var a=t.filter(function(t){return t.item._id===e.item._id});if(a.length>0){var n=0;return a.forEach(function(e){n+=e.unitWeight*e.units}),e.pendingQuantity-n}}return e.pendingQuantity},a.handleUpdateCancel=function(){a.props.history.push("/purchase-orders/list")},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params&&(this.getPurchaseOrder(this.props.match.params.id),this.getAllBins(),this.getStockItemsByPurchaseOrder(this.props.match.params.id))}},{key:"render",value:function(){var e=this,t=this.state,a=t.purchaseOrder,n=t.orderItems,l=t.stockItems,i=t.storeBins,c=t.currentItem,o=void 0===c?{}:c,s=t.loading,u=t.stockUpdate,d=t.stockBulkUpdate,m=[];if(l.length){var h=0,p=0;l.forEach(function(e){h+=Number(e.netWeight),p+=Number(e.grossWeight)}),m=l.concat({_id:"summary",netWeight:h,grossWeight:p})}0===m.length&&l.length>0&&(m=l);var g=[];if(n.length){var f=0,b=0,y=0;n.forEach(function(e){f+=Number(e.netWeight),b+=Number(e.grossWeight),y+=Number(e.units)}),g=n.concat({_id:"summary",netWeight:f,grossWeight:b,units:y})}0===g.length&&n.length>0&&(g=n);var E=this.props.form.getFieldDecorator,k={visible:this.state.modalVisible,maskClosable:!1,title:"create"===this.state.modalType?"Add Stock":"Update Stock",centered:!0,width:1e3,bodyStyle:{padding:3}},S=[{title:"Item Description",key:"description",render:function(e,t,a){return a<n.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,t.item.code," # ",t.item.name),r.a.createElement(ca.a,{percent:t.receivedUnits/t.units*100})):{children:r.a.createElement("span",{style:{fontWeight:600}},"Total"),props:{colSpan:2}}}},{title:"LOT Number",dataIndex:"lotNumber",key:"lotNumber",render:function(e,t,a){return a<n.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Packages",dataIndex:"units",key:"units",render:function(e,t,a){return a<n.length?e:r.a.createElement("span",{style:{fontWeight:600}},e)}},{title:"Net Weight (Kg)",dataIndex:"netWeight",key:"netWeight",render:function(e,t,a){return a<n.length?Number(e).toFixed(3):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}},{title:"Gross Weight (Kg)",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t,a){return a<n.length?Number(e).toFixed(3):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}},{key:"addStock",render:function(t,a,l){if(a.units-a.receivedUnits!==0)return l<n.length?r.a.createElement(z.a,{type:"primary",size:"small",onClick:function(t){t.preventDefault(),e.showAddStockModal(a)}},r.a.createElement(v.a,{type:"plus"}),"Stock"):{children:{text:t},props:{colSpan:1}}}}],I=[{title:"Pack Serial",dataIndex:"packSerial",key:"packSerial",render:function(e,t,a){return a<l.length?e:{children:r.a.createElement("span",{style:{fontWeight:600}},"Total"),props:{colSpan:4}}}},{title:"LOT Number",dataIndex:"orderItem.lotNumber",key:"orderItem.lotNumber",render:function(e,t,a){return a<l.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Bin",dataIndex:"bin.code",key:"bin.code",render:function(e,t,a){return a<l.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber",render:function(e,t,a){return a<l.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Net Weight (Kg)",dataIndex:"netWeight",key:"netWeight",render:function(t,a,n){return n<l.length?r.a.createElement(be.a,{value:t,onChange:function(t){return e.handleFieldChange(t,"netWeight",a._id)},placeholder:"Net Weight",min:1}):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(t)&&Number(t).toFixed(3)," ",!isNaN(t)&&"Kg")}},{title:"Gross Weight (Kg)",dataIndex:"grossWeight",key:"grossWeight",render:function(t,a,n){return n<l.length?r.a.createElement(be.a,{value:t,onChange:function(t){return e.handleFieldChange(t,"grossWeight",a._id)},placeholder:"Gross Weight",min:1}):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(t)&&Number(t).toFixed(3)," ",!isNaN(t)&&"Kg")}},{title:"Items",dataIndex:"cones",key:"cones",render:function(t,a,n){return n<l.length?r.a.createElement(be.a,{value:t,onChange:function(t){return e.handleFieldChange(t,"cones",a._id)},placeholder:"#of Items",min:1}):{children:"",props:{colSpan:0}}}},{title:"Status",dataIndex:"status",key:"status",render:function(e,t,a){if(a<l.length){var n="";return"AVAILABLE"===e&&(n="#87d068"),"RESERVED"===e&&(n="#2db7f5"),"DISPATCHED"===e&&(n="#108ee9"),"FACTORY_RECEIVED"===e&&(n="#f50"),r.a.createElement(ye.a,{color:n},e)}return{children:"",props:{colSpan:2}}}}],N=i.map(function(e){return r.a.createElement(oa.a.Option,{key:e.code},e.code)});return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,{href:"/purchase-orders/list"},r.a.createElement(v.a,{type:"hdd"}),r.a.createElement("span",null,"View Packing List")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"lock"}),r.a.createElement("span",null,"Add Stocks"))),r.a.createElement(Be,{inner:!0},r.a.createElement(q.a,{tip:"Loading...",spinning:s},r.a.createElement(ke.a,{title:"Packing List Details",bordered:!1},r.a.createElement($e.a,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement($e.a.Item,{label:"Packing List #"},a.code),r.a.createElement($e.a.Item,{label:"Order Date"},xe()(a.orderDate).format("YYYY-MM-DD")),r.a.createElement($e.a.Item,{label:"Received Date"},xe()(a.receivedDate).format("YYYY-MM-DD")),r.a.createElement($e.a.Item,{label:"Supplier"},a.supplier.name),r.a.createElement($e.a.Item,{label:"Net Weight"},"".concat(Number(a.netWeight).toFixed(2)," Kg")),r.a.createElement($e.a.Item,{label:"Gross Weight"},"".concat(Number(a.grossWeight).toFixed(2)," Kg")),r.a.createElement($e.a.Item,{label:"Status"},r.a.createElement(et.a,{status:"processing",text:a.status}))),r.a.createElement(Ie.a,{bordered:!0,rowKey:"_id",loading:s,pagination:!1,dataSource:g,columns:S,size:"small",title:function(){return r.a.createElement("h3",null,"Packing Items")}}),l.length>0&&r.a.createElement(q.a,{tip:"Updating...",spinning:d},r.a.createElement(Ie.a,{bordered:!0,rowKey:"_id",pagination:!1,dataSource:m,columns:I,size:"small",title:function(){return r.a.createElement("h3",null,"Stock Items")}}))),n.length>0&&r.a.createElement(ze.a,Object.assign({},k,{onCancel:this.handleCancel,onOk:this.handleModalSubmit}),r.a.createElement(q.a,{tip:"Stock update in-progress...",spinning:u},r.a.createElement(Y.a,null,r.a.createElement(Y.a.Item,Object.assign({label:"LOT Number",hasFeedback:!0},e.formLayout),E("lotNumber",{initialValue:o.lotNumber,rules:[{required:!0}]})(r.a.createElement(fe.a,{placeholder:"Please select item"},n.map(function(e){return r.a.createElement(ua,{value:e.lotNumber,key:e.lotNumber},e.lotNumber)})))),r.a.createElement(Y.a.Item,Object.assign({label:"Packages (".concat(o.units,")(").concat(o.receivedUnits,")"),hasFeedback:!0},e.formLayout),E("stockUnits",{initialValue:o.stockUnits,rules:[{required:!0}]})(r.a.createElement(be.a,{placeholder:"# of units",min:0,max:o.units-o.receivedUnits}))),r.a.createElement(Y.a.Item,Object.assign({label:"Bin Location",hasFeedback:!0},e.formLayout),E("bin",{initialValue:o.bin,rules:[{required:!0}]})(r.a.createElement(oa.a,{dataSource:N,filterOption:!0,placeholder:"Bin location"},r.a.createElement(K.a,{suffix:r.a.createElement(v.a,{type:"search"})})))),r.a.createElement(sa.a,{grid:{gutter:24,xs:1,sm:2,md:4,lg:4,xl:12,xxl:3},style:{padding:10},dataSource:i,renderItem:function(e){return r.a.createElement(sa.a.Item,null,r.a.createElement(et.a,{count:e.stockItems.length},r.a.createElement("span",{className:"head-example",style:{width:42,height:42,backgroundColor:"rgb(238, 238, 238)",borderRadius:4,display:"inline-block",verticalAlign:"middle"}},r.a.createElement("b",null,e.code))))}})))),r.a.createElement(z.a,{type:"primary",onClick:this.handleUpdateStockItems,disabled:0===l.length,loading:d},"Update Stock Items"),r.a.createElement(z.a,{type:"primary",style:{marginLeft:10},onClick:this.handleUpdateCancel},"Cancel"))))}}]),t}(n.Component),ha=Y.a.create()(ma),pa=a(214),ga=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={stockItems:[],loading:!1},a.getStockItemsByPurchaseOrder=function(e){e&&(a.setState({loading:!0}),Pe(e).then(function(e){a.setState({stockItems:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))}))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getStockItemsByPurchaseOrder(this.props.match.params.id)}},{key:"render",value:function(){var e=this.state,t=e.stockItems,a=e.loading,n=t.map(function(e){return Object(_e.a)({},e,{runningNumber:"'".concat(e.runningNumber,"'"),createdAt:xe()(new Date(e.createdAt)).format("YYYY-MM-DD")})});return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"unordered-list"}),r.a.createElement("span",null,"Stock Barcodes"))),r.a.createElement(Be,{inner:!0},r.a.createElement(q.a,{tip:"Loading...",spinning:a},r.a.createElement(U.a,{style:{marginBottom:15}},r.a.createElement(Se.a,{span:22}),r.a.createElement(Se.a,{span:2},r.a.createElement(z.a,{type:"primary"},r.a.createElement(pa.CSVLink,{data:n,headers:[{label:"Pack Serial",key:"packSerial"},{label:"LOT Number",key:"lotNumber"},{label:"Item Code",key:"itemCode"},{label:"Bin",key:"binCode"},{label:"Running #",key:"runningNumber"},{label:"Net Weight",key:"netWeight"},{label:"Gross Weight",key:"grossWeight"},{label:"Items",key:"cones"}],filename:"StockBarcodes.csv"},"Export CSV")))),r.a.createElement(Ie.a,{rowKey:"_id",bordered:!0,pagination:!1,dataSource:t,columns:[{title:"Pack Serial",dataIndex:"packSerial",key:"packSerial"},{title:"LOT Number",dataIndex:"lotNumber",key:"lotNumber"},{title:"Item Code",dataIndex:"itemCode",key:"itemCode"},{title:"Bin",dataIndex:"binCode",key:"binCode"},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight"},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight"},{title:"Items",dataIndex:"cones",key:"cones"}],size:"middle"}))))}}]),t}(n.Component),fa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,purchaseOrder:{code:"",subCode:"",orderDate:null,expectedDate:null,supplier:{_id:""},shipmentMode:"",items:[]},stockItems:[],orderItems:[]},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.getPackingList=function(e){e&&(a.setState({loading:!0}),Re(a.props.match.params.id).then(function(e){var t=e.data.items;a.setState({purchaseOrder:e.data,orderItems:t,loading:!1})}).catch(function(e){V.a.error("".concat(e))}))},a.getStockItemsByPurchaseOrder=function(e){e&&Pe(e).then(function(e){a.setState({stockItems:e.data})}).catch(function(e){V.a.error("".concat(e))})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params&&(this.getPackingList(this.props.match.params.id),this.getStockItemsByPurchaseOrder(this.props.match.params.id))}},{key:"render",value:function(){var e=this.state,t=e.purchaseOrder,a=e.orderItems,n=e.stockItems,l=e.loading,i=[];if(a.length){var c=0,o=0,s=0;a.forEach(function(e){c+=Number(e.netWeight),o+=Number(e.grossWeight),s+=Number(e.units)}),i=a.concat({_id:"summary",netWeight:c,grossWeight:o,units:s})}0===i.length&&a.length>0&&(i=a);var u=[];if(n.length){var d=0,m=0,h=0;n.forEach(function(e){d+=Number(e.netWeight),m+=Number(e.grossWeight),h+=Number(e.cones)}),u=n.concat({_id:"summary",netWeight:d,grossWeight:m,cones:h})}0===u.length&&n.length>0&&(u=n);var p=[{title:"Item Description",key:"description",render:function(e,t,n){return n<a.length?r.a.createElement("span",null,t.item&&t.item.code," #"," ",t.item&&t.item.name):{children:r.a.createElement("span",{style:{fontWeight:600}},"Total"),props:{colSpan:2}}}},{title:"LOT",dataIndex:"lotNumber",key:"lotNumber",render:function(e,t,n){return n<a.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Packages",dataIndex:"units",key:"units",render:function(e,t,n){return n<a.length?e:r.a.createElement("span",{style:{fontWeight:600}},e)}},{title:"Net Weight (Kg)",dataIndex:"netWeight",key:"netWeight",render:function(e,t,n){return n<a.length?Number(e).toFixed(3):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}},{title:"Gross Weight (Kg)",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t,n){return n<a.length?Number(e).toFixed(3):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}}],g=[{title:"Pack Serial",dataIndex:"packSerial",key:"packSerial",render:function(e,t,a){return a<n.length?e:{children:r.a.createElement("span",{style:{fontWeight:600}},"Total"),props:{colSpan:4}}}},{title:"LOT",dataIndex:"orderItem.lotNumber",key:"orderItem.lotNumber",render:function(e,t,a){return a<n.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Bin",dataIndex:"bin.code",key:"bin.code",render:function(e,t,a){return a<n.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber",render:function(e,t,a){return a<n.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Net Weight (Kg)",dataIndex:"netWeight",key:"netWeight",render:function(e,t,a){return a<n.length?Number(e).toFixed(3):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}},{title:"Gross Weight (Kg)",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t,a){return a<n.length?Number(e).toFixed(3):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}},{title:"Items",dataIndex:"cones",key:"cones",render:function(e,t,a){return a<n.length?e:{children:r.a.createElement("span",{style:{fontWeight:600}},e)}}},{title:"Status",dataIndex:"status",key:"status",render:function(e,t,a){if(a<n.length){var l="";return"AVAILABLE"===e&&(l="#87d068"),"RESERVED"===e&&(l="#2db7f5"),"DISPATCHED"===e&&(l="#108ee9"),"FACTORY_RECEIVED"===e&&(l="#f50"),r.a.createElement(ye.a,{color:l},e)}return{children:"",props:{colSpan:1}}}}];return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,{href:"/purchase-orders/list"},r.a.createElement(v.a,{type:"hdd"}),r.a.createElement("span",null,"View Packing List")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"lock"}),r.a.createElement("span",null,"Packing Details"))),r.a.createElement(Be,{inner:!0},r.a.createElement(q.a,{tip:"Loading...",spinning:l},r.a.createElement(ke.a,{title:"Packing List Details",bordered:!1},r.a.createElement($e.a,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement($e.a.Item,{label:"Packing List #"},t.code),r.a.createElement($e.a.Item,{label:"Order Date"},xe()(t.orderDate).format("YYYY-MM-DD")),r.a.createElement($e.a.Item,{label:"Received Date"},xe()(t.receivedDate).format("YYYY-MM-DD")),r.a.createElement($e.a.Item,{label:"Supplier"},t.supplier.name),r.a.createElement($e.a.Item,{label:"Net Weight"},"".concat(Number(t.netWeight).toFixed(2)," Kg")),r.a.createElement($e.a.Item,{label:"Gross Weight"},"".concat(Number(t.grossWeight).toFixed(2)," Kg")),r.a.createElement($e.a.Item,{label:"Status"},r.a.createElement(et.a,{status:"processing",text:t.status}))),r.a.createElement(Ie.a,{bordered:!0,rowKey:"_id",loading:l,pagination:!1,dataSource:i,columns:p,size:"small",title:function(){return r.a.createElement("h3",null,"Packing Items")}}),n.length>0&&r.a.createElement(Ie.a,{bordered:!0,rowKey:"_id",pagination:!1,dataSource:u,columns:g,size:"small",title:function(){return r.a.createElement("h3",null,"Stock Items")}})))))}}]),t}(n.Component),ba="/api/deliveries";function ya(e){return ce.post("".concat($).concat(ba,"/filter"),e).then(J).catch(Z)}function Ea(e){return ce.get("".concat($).concat(ba,"/").concat(e)).then(J).catch(Z)}var ka=Object(_e.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),Sa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).itemIndex=0,a.state={materialRequests:[],itemList:[],stockItems:[],selectedRowKeys:[],loading:!1,stockLoading:!1,deliverySaving:!1,searchVisible:!1},a.getAllPendingMeterialRequests=function(){var e;a.setState({loading:!0}),(e="?status=PENDING,PARTIALY_DISPATCHED",ce.get("".concat($).concat(Fe).concat(e)).then(J).catch(Z)).then(function(e){a.setState({materialRequests:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))})},a.createDelivery=function(e){a.setState({deliverySaving:!0}),ya({deliveryNumber:e.deliveryNumber}).then(function(t){var n;Array.isArray(t.data)&&t.data.length>0?V.a.error("Request number is already exists. Please enter new number."):(n=e,ce.post("".concat($).concat(ba),n).then(J).catch(Z)).then(function(){a.setState({deliverySaving:!1}),a.props.history.push("/deliveries")}).catch(function(e){a.setState({deliverySaving:!1}),V.a.error("".concat(e))})}).catch(function(e){a.setState({deliverySaving:!1}),V.a.error("".concat(e))})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var n=a.state,r=n.itemList,l=n.selectedRowKeys;t.materialRequests=r.map(function(e){return e._id}),t.deliveryNumberPrefix="BNS-STR-".concat(xe()().format("YYYYMMDD"),"-"),t.deliveryNumber=t.deliveryNumberPrefix+t.deliveryNumberSuffix,t.deliveryStockItems=l,console.log("Delivery: ",t),a.createDelivery(t)}})},a.handleShowMaterialRequestSearch=function(){a.setState({searchVisible:!0})},a.handleAddMaterialRequest=function(){var e=a.state,t=e.materialRequests,n=e.itemList,r=e.stockItems,l=a.props.form.getFieldValue("refNumber"),i=t.find(function(e){return e.refNumber===l});if(i)if(n.includes(i))V.a.warning("Sorry, You have already added the material request.");else{a.setState({loading:!0,stockLoading:!0});var c=i.items.map(function(e){return e.stockItems}).reduce(function(e,t){return e.concat(t)});a.setState({itemList:[].concat(Object(ge.a)(n),[i]),stockItems:[].concat(Object(ge.a)(r),Object(ge.a)(c)),loading:!1,stockLoading:!1,searchVisible:!1})}else V.a.warning("Please enter valid material request reference number.")},a.handleRemoveMaterialRequest=function(e){var t=a.state,n=t.itemList,r=t.stockItems,l=t.selectedRowKeys;n.includes(e)&&n.splice(n.indexOf(e),1);var i=e.items.map(function(e){return e.stockItems}).reduce(function(e,t){return e.concat(t)});r=r.filter(function(e){return!i.includes(e)}),l=l.filter(function(e){return!Boolean(i.find(function(t){return t._id===e}))}),a.setState({itemList:n,stockItems:r,selectedRowKeys:l})},a.handleReset=function(e){a.props.form.setFieldsValue({refNumber:""}),a.setState({searchVisible:!1})},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.handleStockItemSearchAndMark=function(){var e=a.state,t=e.stockItems,n=e.selectedRowKeys,r=a.props.form.getFieldsValue(["packSerial"]).packSerial,l=t.find(function(e){return e.packSerial===r});l?(n.push(l._id),a.setState({selectedRowKeys:n}),a.props.form.setFieldsValue({packSerial:""})):V.a.error("Sorry, Stock item is unavailable for given pack serial: '".concat(r,"'"))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllPendingMeterialRequests()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.materialRequests,l=a.itemList,i=a.stockItems,c=a.selectedRowKeys,o=a.stockLoading,s=a.deliverySaving,u=a.searchVisible,d={selectedRowKeys:c,onChange:this.onSelectChange,getCheckboxProps:function(e){return{disabled:"summary"===e._id}}},m=[];if(i.length){var h=0,p=0,g=0;i.forEach(function(e){c.includes(e._id)&&(h+=Number(e.netWeight),p+=Number(e.grossWeight),g+=Number(e.cones))}),m=i.concat({_id:"summary",netWeight:h,grossWeight:p,cones:g})}0===m.length&&i.length>0&&(m=i);var f=[{title:"Reqest Number",dataIndex:"refNumber",key:"refNumber"},{title:"Delivery Location",dataIndex:"deliveryLocation",key:"deliveryLocation"},{title:"Requested Date",dataIndex:"requestedDate",key:"requestedDate",render:function(e){return xe()(e).format("YYYY-MM-DD")}},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(z.a,{type:"primary",size:"small",onClick:function(t){t.stopPropagation(),e.handleRemoveMaterialRequest(a)},icon:"close",style:{marginLeft:5}})}}],b=[{title:"Pack Serial",dataIndex:"packSerial",key:"packSerial",render:function(e,t,a){return a<i.length?e:{children:r.a.createElement("span",{style:{fontWeight:600}},"Total(",c.length,")"),props:{colSpan:4}}}},{title:"LOT Number",dataIndex:"lotNumber",key:"lotNumber",render:function(e,t,a){return a<i.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Bin",dataIndex:"binCode",key:"binCode",render:function(e,t,a){return a<i.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber",render:function(e,t,a){return a<i.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Net Weight (Kg)",dataIndex:"netWeight",key:"netWeight",render:function(e,t,a){return a<i.length?Number(e).toFixed(3):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3))}},{title:"Gross Weight (Kg)",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t,a){return a<i.length?Number(e).toFixed(3):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3))}},{title:"Items",dataIndex:"cones",key:"cones",render:function(e,t,a){return a<i.length?e:{children:r.a.createElement("span",{style:{fontWeight:600}},e)}}},{title:"Status",dataIndex:"status",key:"status",render:function(e,t,a){if(a<i.length){var n="";return"AVAILABLE"===e&&(n="#87d068"),"RESERVED"===e&&(n="#2db7f5"),"DISPATCHED"===e&&(n="#108ee9"),"FACTORY_RECEIVED"===e&&(n="#f50"),r.a.createElement(ye.a,{color:n},e)}return{children:"",props:{colSpan:1}}}}];return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"hdd"}),r.a.createElement("span",null,"Create Delivery"))),r.a.createElement(Be,{inner:!0},r.a.createElement(ke.a,{title:"Delivery Details",bordered:!1},r.a.createElement(Y.a,{layout:"vertical",onSubmit:this.handleSubmit},r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{md:8,sm:8},r.a.createElement(Y.a.Item,{label:"Delivery Number",hasFeedback:!0},t("deliveryNumberSuffix",{rules:[{required:!0,message:"Delivery number is required."}]})(r.a.createElement(K.a,{placeholder:"Delivery Number",prefix:"BNS-STR-".concat(xe()().format("YYYYMMDD"),"-"),className:"order"})))),r.a.createElement(Se.a,{md:8,sm:8},r.a.createElement(Y.a.Item,{label:"Vehicle Number",hasFeedback:!0},t("vehicleNumber",{rules:[{required:!0,message:"Please enter vehicle number"}]})(r.a.createElement(K.a,{placeholder:"Vehicle number"})))),r.a.createElement(Se.a,{md:8,sm:8},r.a.createElement(Y.a.Item,{label:"Departure time",hasFeedback:!0},t("departureDateTime",{rules:[{required:!0,message:"Please enter departure time"}]})(r.a.createElement(ve.a,{showTime:!0,placeholder:"Select date and time",format:"YYYY-MM-DD hh:mm:ss"}))))),l.length>0&&r.a.createElement(Ie.a,{rowKey:"_id",bordered:!0,pagination:!1,columns:f,dataSource:l,size:"small",title:function(){return r.a.createElement("h4",null,"Added Material Requests")}}),u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{orientation:"left"},"Add Material Request"),r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{xl:{span:8},md:{span:4}},t("refNumber")(r.a.createElement(oa.a,{dataSource:n.map(function(e){return e.refNumber}),filterOption:!0,placeholder:"Material Request Ref Number"},r.a.createElement(K.a,{suffix:r.a.createElement(v.a,{type:"search"})})))),r.a.createElement(Se.a,Object.assign({},ka,{xl:{span:16},md:{span:20}}),r.a.createElement(U.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(z.a,{type:"primary",className:"margin-right",onClick:this.handleAddMaterialRequest},"Search & Add"),r.a.createElement(z.a,{onClick:this.handleReset},"Cancel")))))),!u&&r.a.createElement(z.a,{style:{width:"100%",marginTop:16,marginBottom:16,color:"white",backgroundColor:"#13c2c2"},type:"dashed",onClick:this.handleShowMaterialRequestSearch,icon:"plus"},"Add Material Requests"),r.a.createElement(q.a,{tip:"Stock loading...",spinning:o},i.length>0&&r.a.createElement(Ie.a,{rowKey:"_id",rowSelection:d,columns:b,dataSource:m,pagination:!1,size:"small",bordered:!0,title:function(){return r.a.createElement(U.a,{gutter:16},r.a.createElement(Se.a,{xl:{span:4}},r.a.createElement("h2",null,"Stock Items:")),r.a.createElement(Se.a,{xl:{span:8},md:{span:8}},t("packSerial")(r.a.createElement(K.a,{placeholder:"Pack Serial"}))),r.a.createElement(Se.a,{xl:{span:4},md:{span:4}},r.a.createElement(z.a,{type:"primary",className:"margin-right",onClick:e.handleStockItemSearchAndMark},"Search & Add")))}})),r.a.createElement(Ne.a,null),r.a.createElement(z.a,{type:"primary",htmlType:"submit",disabled:0===c.length,loading:s},"Create Delivery")))))}}]),t}(n.Component),va=Y.a.create()(Sa),Ia=a(445);D.getToken()&&"Bearer ".concat(D.getToken());var Na={fontSize:16,color:"rgba(0,0,0,0.85)",lineHeight:"24px",display:"block",marginBottom:16},Oa=function(e){var t=e.title,a=e.content;return r.a.createElement("div",{style:{fontSize:14,lineHeight:"22px",marginBottom:7,color:"rgba(0,0,0,0.65)"}},r.a.createElement("p",{style:{marginRight:8,display:"inline-block",color:"rgba(0,0,0,0.85)"}},t,":"),a)},xa=function(e){var t=e.delivery,a=e.visible,n=e.onClose,l=[{title:"Item Code",dataIndex:"receiveItem.item.code",key:"code"},{title:"Name",dataIndex:"receiveItem.item.name",key:"name"},{title:"PO Number",dataIndex:"receiveItem.purchaseOrder.code",key:"poNumber"},{title:"Units",dataIndex:"units",key:"units"}];return r.a.createElement(Ia.a,{width:640,placement:"right",closable:!1,onClose:n,visible:a},r.a.createElement("p",{style:Object(_e.a)({},Na,{marginBottom:24})},"Delivery Details"),t&&t.deliveryRequest&&t.deliveryRequest.materialRequest&&r.a.createElement("div",null,r.a.createElement("p",{style:Na},"Meterial Request"),r.a.createElement(U.a,null,r.a.createElement(Se.a,{span:12},r.a.createElement(Oa,{title:"Delivery Number",content:t.deliveryRequest.materialRequest.refNumber})),r.a.createElement(Se.a,{span:12},r.a.createElement(Oa,{title:"Vehicle Number",content:t.vehicleNumber}))),r.a.createElement(U.a,null,r.a.createElement(Se.a,{span:12},r.a.createElement(Oa,{title:"Delivery Location",content:t.deliveryRequest.materialRequest.deliveryLocation})),r.a.createElement(Se.a,{span:12},r.a.createElement(Oa,{title:"Departure Time",content:xe()(t.departureDateTime).format("YYYY-MM-DD hh:mm:ss")}))),r.a.createElement(U.a,null,r.a.createElement(Se.a,{span:12},r.a.createElement(Oa,{title:"Contact Person",content:t.deliveryRequest.materialRequest.contactPerson})),r.a.createElement(Se.a,{span:12},r.a.createElement(Oa,{title:"Contact Number",content:t.deliveryRequest.materialRequest.contactNumber}))),r.a.createElement(U.a,null,r.a.createElement(Se.a,{span:24},r.a.createElement(Oa,{title:"Status",content:t.status}))),r.a.createElement(Ne.a,null),r.a.createElement("p",{style:Na},"Deliver Items"),r.a.createElement(Ie.a,{rowKey:"_id",pagination:!1,columns:l,dataSource:t.deliveryRequest&&t.deliveryRequest.items})))},Da=K.a.Search,Ca=Object(_e.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),Ra=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){e||(a.props.showSearchLoading(!0),ya(t).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){V.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(Y.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{xl:{span:6},md:{span:12}},e("deliveryNumber")(r.a.createElement(Da,{placeholder:"Search Delivery Number"}))),r.a.createElement(Se.a,Object.assign({},Ca,{xl:{span:18},md:{span:12}}),r.a.createElement(U.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(z.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(z.a,{onClick:this.handleReset},"Reset"))))))}}]),t}(n.Component),Aa=Y.a.create()(Ra),ja=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={deliveries:[],loading:!1,viewProps:{},viewVisible:!1,currentItem:{}},a.getAllDeliveries=function(){a.setState({loading:!0}),ce.get("".concat($).concat(ba)).then(J).catch(Z).then(function(e){a.setState({deliveries:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))})},a.handleViewOnClose=function(){a.setState({viewVisible:!1,currentItem:{}})},a.handleMenuClick=function(e,t){"view"===t.key?a.props.history.push("/deliveries/view/".concat(e._id)):"edit"===t.key&&a.props.history.push("/deliveries/edit/".concat(e._id))},a.getOperationTasks=function(e){var t=[];return t.push({key:"view",name:"View"}),"PENDING"===e.status&&t.push({key:"edit",name:"Update"}),t},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({deliveries:e,loading:!1})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllDeliveries()}},{key:"render",value:function(){var e=this,t=this.state,a=t.viewVisible,n=t.deliveries,l=t.loading,i=[{title:"Delivery Number",dataIndex:"deliveryNumber",key:"refNudeliveryNumbermber"},{title:"Vehicle #",dataIndex:"vehicleNumber",key:"vehicleNumber"},{title:"Departure Time",dataIndex:"departureDateTime",key:"departureDateTime",render:function(e){return xe()(e).format("YYYY-MM-DD hh:mm:ss")}},{title:"Arrival Time",dataIndex:"arrivalDateTime",key:"arrivalDateTime",render:function(e){return e?xe()(e).format("YYYY-MM-DD hh:mm:ss"):""}},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:function(e){return xe()(e).format("YYYY-MM-DD")}},{title:"Created By",dataIndex:"createdBy.firstName",key:"createdBy.firstName"},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){var a="";return"PENDING"===e&&(a="volcano"),"FACTORY_RECEIVED"===e&&(a="#87d068"),r.a.createElement(ye.a,{color:a},e)}},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Qe,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:e.getOperationTasks(a)})}}];return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"hdd"}),r.a.createElement("span",null,"Delivery List"))),r.a.createElement(Be,{inner:!0},r.a.createElement(Aa,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults}),r.a.createElement(Ie.a,{bordered:!0,loading:l,rowKey:"_id",size:"small",columns:i,dataSource:n}),r.a.createElement(xa,{visible:a,onClose:this.handleViewOnClose,delivery:this.state.currentItem})))}}]),t}(n.Component),wa=Y.a.create()(ja),Ma=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={delivery:{},stockItems:[],selectedRowKeys:[],loading:!1},a.getDelivery=function(e){e&&(a.setState({loading:!0}),Ea(e).then(function(e){var t=e.data;console.log("DeliveryItems:",t.items);var n=t.items.map(function(e){return e.stockItems}).reduce(function(e,t){return e.concat(t)});a.setState({delivery:t,stockItems:n,loading:!1})}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))}))},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){var n,r;e||(t.status="FACTORY_RECEIVED",t.receivedStockItems=a.state.selectedRowKeys,a.setState({loading:!0}),(n=a.state.delivery._id,r=t,ce.put("".concat($).concat(ba,"/").concat(n),r).then(J).catch(Z)).then(function(){a.setState({loading:!1}),a.props.history.push("/deliveries")}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))}))})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getDelivery(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,a=t.delivery,n=t.stockItems,l=t.loading,i=t.selectedRowKeys,c={selectedRowKeys:i,onChange:this.onSelectChange},o=[{title:"Material Request #",dataIndex:"requestItem.materialRequest.refNumber",key:"materialRequestNumber"},{title:"Item Description",key:"description",render:function(e,t){return"".concat(t.requestItem.item.code," # ").concat(t.requestItem.item.name)}},{title:"LOT",dataIndex:"requestItem.lotNumber",key:"lotNumber"},{title:"Packages",dataIndex:"units",key:"units"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight",render:function(e,t){var a=t.stockItems.map(function(e){return e.netWeight}).reduce(function(e,t){return e+t});return Number(a).toFixed(2)}},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t){var a=t.stockItems.map(function(e){return e.grossWeight}).reduce(function(e,t){return e+t});return Number(a).toFixed(2)}}],s=[{title:"LOT Number",dataIndex:"lotNumber",key:"lotNumber"},{title:"Bin",dataIndex:"binCode",key:"binCode"},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber"},{title:"Net Weight",dataIndex:"netWeight",key:"netWeight"},{title:"Gross Weight",dataIndex:"grossWeight",key:"grossWeight"},{title:"Items",dataIndex:"cones",key:"cones"},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){var a="";return"AVAILABLE"===e&&(a="#87d068"),"RESERVED"===e&&(a="#2db7f5"),"DISPATCHED"===e&&(a="#108ee9"),"FACTORY_RECEIVED"===e&&(a="#f50"),r.a.createElement(ye.a,{color:a},e)}}];return r.a.createElement(ke.a,{title:"Update Factory Received Delivery Items",bordered:!1},r.a.createElement(q.a,{tip:"Loading...",spinning:l},r.a.createElement(Y.a,{onSubmit:this.handleSubmit},r.a.createElement(Y.a.Item,Object.assign({},{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:8}}},{label:"Arrival Time",hasFeedback:!0}),e("arrivalDateTime",{rules:[{required:!0,message:"Please enter arrival time"}]})(r.a.createElement(ve.a,{showTime:!0,placeholder:"Select arrival time",format:"YYYY-MM-DD hh:mm:ss"}))),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement($e.a.Item,{label:"Delivery Number"},a.deliveryNumber),r.a.createElement($e.a.Item,{label:"Vehicle Number"},a.vehicleNumber),r.a.createElement($e.a.Item,{label:"Departure Time"},xe()(a.departureDateTime).format("YYYY-MM-DD hh:mm:ss")),r.a.createElement($e.a.Item,{label:"Status",span:3},r.a.createElement(et.a,{status:"processing",text:a.status})))),a.items&&r.a.createElement(Ie.a,{rowKey:"_id",pagination:!1,bordered:!0,dataSource:a.items,columns:o,size:"middle",title:function(){return r.a.createElement("h4",null,"Delivered Items Summary")}}),r.a.createElement(Ie.a,{rowKey:"_id",bordered:!0,pagination:!1,dataSource:n,columns:s,rowSelection:c,size:"middle",title:function(){return r.a.createElement("h4",null,"Delivery Items")}}),r.a.createElement(z.a,{type:"primary",htmlType:"submit",style:{marginTop:40},disabled:n.length!==i.length},"Confirm Factory Received"))))}}]),t}(n.Component),Fa=Y.a.create()(Ma),La=a(215),Wa=a.n(La),Ta=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.delivery,a=e.stockItems,n=t?t.items:[],l=[];if(n.length){var i=0,c=0,o=0;n.forEach(function(e){var t=e.stockItems.map(function(e){return e.netWeight}).reduce(function(e,t){return e+t}),a=e.stockItems.map(function(e){return e.grossWeight}).reduce(function(e,t){return e+t});i+=Number(t),c+=Number(a),o+=Number(e.units)}),l=n.concat({_id:"summary",netWeight:i,grossWeight:c,units:o})}0===l.length&&n.length>0&&(l=n);var s=[];if(a.length){var u=0,d=0,m=0;a.forEach(function(e){u+=Number(e.netWeight),d+=Number(e.grossWeight),m+=Number(e.cones)}),s=a.concat({_id:"summary",netWeight:u,grossWeight:d,cones:m})}0===s.length&&a.length>0&&(s=a);var h=[{title:"Material Request #",dataIndex:"requestItem.materialRequest.refNumber",key:"materialRequestNumber",render:function(e,t,a){return a<n.length?e:{children:r.a.createElement("span",{style:{fontWeight:600}},"Total"),props:{colSpan:3}}}},{title:"Item Description",key:"description",render:function(e,t,a){return a<n.length?"".concat(t.requestItem.item.code," # ").concat(t.requestItem.item.name):{children:{text:e},props:{colSpan:0}}}},{title:"LOT",dataIndex:"requestItem.lotNumber",key:"lotNumber",render:function(e,t,a){return a<n.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Packages",dataIndex:"units",key:"units",render:function(e,t,a){return a<n.length?e:r.a.createElement("span",{style:{fontWeight:600}},e)}},{title:"Net Weight (Kg)",dataIndex:"netWeight",key:"netWeight",render:function(e,t,a){if(a<n.length){var l=t.stockItems.map(function(e){return e.netWeight}).reduce(function(e,t){return e+t});return l&&Number(l).toFixed(3)}return r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}},{title:"Gross Weight (Kg)",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t,a){if(a<n.length){var l=t.stockItems.map(function(e){return e.grossWeight}).reduce(function(e,t){return e+t});return l&&Number(l).toFixed(3)}return r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}}],p=[{title:"Pack Serial",dataIndex:"packSerial",key:"packSerial",render:function(e,t,n){return n<a.length?e:{children:r.a.createElement("span",{style:{fontWeight:600}},"Total"),props:{colSpan:5}}}},{title:"LOT Number",dataIndex:"lotNumber",key:"lotNumber",render:function(e,t,n){return n<a.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Item Code",dataIndex:"itemCode",key:"itemCode",render:function(e,t,n){return n<a.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Bin",dataIndex:"binCode",key:"binCode",render:function(e,t,n){return n<a.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber",render:function(e,t,n){return n<a.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Net Weight (Kg)",dataIndex:"netWeight",key:"netWeight",render:function(e,t,n){return n<a.length?Number(e).toFixed(3):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}},{title:"Gross Weight (Kg)",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t,n){return n<a.length?Number(e).toFixed(3):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}},{title:"Items",dataIndex:"cones",key:"cones",render:function(e,t,n){return n<a.length?e:{children:r.a.createElement("span",{style:{fontWeight:600}},e)}}}];return r.a.createElement("div",{style:{margin:25,padding:25}},r.a.createElement("h2",null,"DELIVERY INVOICE"),t&&r.a.createElement($e.a,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement($e.a.Item,{label:"Delivery Number"},t.deliveryNumber),r.a.createElement($e.a.Item,{label:"Vehicle Number"},t.vehicleNumber),r.a.createElement($e.a.Item,{label:"Departure Time"},xe()(t.departureDateTime).format("YYYY-MM-DD hh:mm:ss")),r.a.createElement($e.a.Item,{label:"Status",span:"FACTORY_RECEIVED"!==t.status?3:0},r.a.createElement(et.a,{status:"processing",text:t.status})),"FACTORY_RECEIVED"===t.status&&r.a.createElement($e.a.Item,{label:"Factory Received Time",span:3},xe()(t.arrivalDateTime).format("YYYY-MM-DD hh:mm:ss"))),r.a.createElement(Ie.a,{rowKey:"_id",pagination:!1,bordered:!0,dataSource:l,columns:h,size:"middle",title:function(){return r.a.createElement("h2",null,"GOOD TRANSFER - OUT")},style:{marginTop:30}}),r.a.createElement(Ie.a,{rowKey:"_id",bordered:!0,pagination:!1,dataSource:s,columns:p,rowSelection:{selectedRowKeys:[]},size:"middle",title:function(){return r.a.createElement("h4",null,"Delivery Items")},style:{display:"block",pageBreakBefore:"always",marginTop:50}}))}}]),t}(n.Component),Pa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={delivery:null,deliveryItemsSummary:[],stockItems:[],loading:!1},a.getDelivery=function(e){e&&(a.setState({loading:!0}),Ea(e).then(function(e){var t=e.data,n=t.items.map(function(e){return e.stockItems}).reduce(function(e,t){return e.concat(t)});a.setState({delivery:t,stockItems:n,loading:!1})}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))}))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getDelivery(this.props.match.params.id)}},{key:"render",value:function(){var e=this,t=this.state,a=t.delivery,n=t.stockItems,l=t.loading,i=a?a.items:[],c=[];if(i.length){var o=0,s=0,u=0;i.forEach(function(e){var t=e.stockItems.map(function(e){return e.netWeight}).reduce(function(e,t){return e+t}),a=e.stockItems.map(function(e){return e.grossWeight}).reduce(function(e,t){return e+t});o+=Number(t),s+=Number(a),u+=Number(e.units)}),c=i.concat({_id:"summary",netWeight:o,grossWeight:s,units:u})}0===c.length&&i.length>0&&(c=i);var d=[];if(n.length){var m=0,h=0,p=0;n.forEach(function(e){m+=Number(e.netWeight),h+=Number(e.grossWeight),p+=Number(e.cones)}),d=n.concat({_id:"summary",netWeight:m,grossWeight:h,cones:p})}0===d.length&&n.length>0&&(d=n);var g=[{title:"Material Request #",dataIndex:"requestItem.materialRequest.refNumber",key:"materialRequestNumber",render:function(e,t,a){return a<i.length?e:{children:r.a.createElement("span",{style:{fontWeight:600}},"Total"),props:{colSpan:3}}}},{title:"Item Description",key:"description",render:function(e,t,a){return a<i.length?"".concat(t.requestItem.item.code," # ").concat(t.requestItem.item.name):{children:{text:e},props:{colSpan:0}}}},{title:"LOT",dataIndex:"requestItem.lotNumber",key:"lotNumber",render:function(e,t,a){return a<i.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Packages",dataIndex:"units",key:"units",render:function(e,t,a){return a<i.length?e:r.a.createElement("span",{style:{fontWeight:600}},e)}},{title:"Net Weight (Kg)",dataIndex:"netWeight",key:"netWeight",render:function(e,t,a){if(a<i.length){var n=t.stockItems.map(function(e){return e.netWeight}).reduce(function(e,t){return e+t});return n&&Number(n).toFixed(3)}return r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}},{title:"Gross Weight (Kg)",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t,a){if(a<i.length){var n=t.stockItems.map(function(e){return e.grossWeight}).reduce(function(e,t){return e+t});return n&&Number(n).toFixed(3)}return r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}}],f=[{title:"Pack Serial",dataIndex:"packSerial",key:"packSerial",render:function(e,t,a){return a<n.length?e:{children:r.a.createElement("span",{style:{fontWeight:600}},"Total"),props:{colSpan:5}}}},{title:"LOT Number",dataIndex:"lotNumber",key:"lotNumber",render:function(e,t,a){return a<n.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Item Code",dataIndex:"itemCode",key:"itemCode",render:function(e,t,a){return a<n.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Bin",dataIndex:"binCode",key:"binCode",render:function(e,t,a){return a<n.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Running #",dataIndex:"runningNumber",key:"runningNumber",render:function(e,t,a){return a<n.length?e:{children:{text:e},props:{colSpan:0}}}},{title:"Net Weight (Kg)",dataIndex:"netWeight",key:"netWeight",render:function(e,t,a){return a<n.length?Number(e).toFixed(3):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}},{title:"Gross Weight (Kg)",dataIndex:"grossWeight",key:"grossWeight",render:function(e,t,a){return a<n.length?Number(e).toFixed(3):r.a.createElement("span",{style:{fontWeight:600}},!isNaN(e)&&Number(e).toFixed(3)," ",!isNaN(e)&&"Kg")}},{title:"Items",dataIndex:"cones",key:"cones",render:function(e,t,a){return a<n.length?e:{children:r.a.createElement("span",{style:{fontWeight:600}},e)}}},{title:"Status",dataIndex:"status",key:"status",render:function(e,t,a){if(a<n.length){var l="";return"AVAILABLE"===e&&(l="#87d068"),"RESERVED"===e&&(l="#2db7f5"),"DISPATCHED"===e&&(l="#108ee9"),"FACTORY_RECEIVED"===e&&(l="#f50"),r.a.createElement(ye.a,{color:l},e)}return{children:"",props:{colSpan:1}}}}];return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,{href:"/deliveries"},r.a.createElement(v.a,{type:"hdd"}),r.a.createElement("span",null,"Delivery List")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"lock"}),r.a.createElement("span",null,"Delivery Details"))),r.a.createElement(Be,{inner:!0},r.a.createElement(ke.a,{title:"Delivery Details",bordered:!1},r.a.createElement(q.a,{tip:"Loading...",spinning:l},a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Delivery Details"),r.a.createElement($e.a,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement($e.a.Item,{label:"Delivery Number"},a.deliveryNumber),r.a.createElement($e.a.Item,{label:"Vehicle Number"},a.vehicleNumber),r.a.createElement($e.a.Item,{label:"Departure Time"},xe()(a.departureDateTime).format("YYYY-MM-DD hh:mm:ss")),r.a.createElement($e.a.Item,{label:"Status",span:"FACTORY_RECEIVED"!==a.status?3:0},r.a.createElement(et.a,{status:"processing",text:a.status})),"FACTORY_RECEIVED"===a.status&&r.a.createElement($e.a.Item,{label:"Factory Received Time",span:3},xe()(a.arrivalDateTime).format("YYYY-MM-DD hh:mm:ss")))),r.a.createElement(Ie.a,{rowKey:"_id",pagination:!1,bordered:!0,dataSource:c,columns:g,size:"middle",title:function(){return r.a.createElement("h4",null,"Delivered Items Summary")}}),r.a.createElement(Ie.a,{rowKey:"_id",bordered:!0,pagination:!1,dataSource:d,columns:f,size:"middle",title:function(){return r.a.createElement("h4",null,"Delivery Items")}}),r.a.createElement(Ne.a,null),r.a.createElement("div",null,r.a.createElement(Wa.a,{trigger:function(){return r.a.createElement(z.a,{type:"primary"},"Print Delivery Invoice")},content:function(){return e.componentRef}}),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(Ta,{delivery:a,stockItems:n,ref:function(t){return e.componentRef=t}})))))))}}]),t}(n.Component),Ya=K.a.Search,Va=Object(_e.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),qa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){e||(a.props.showSearchLoading(!0),aa(t).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){V.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onAddItem,n=t.getFieldDecorator;return r.a.createElement(Y.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{xl:{span:6},md:{span:12}},n("lotNumber")(r.a.createElement(Ya,{placeholder:"LOT Number"}))),r.a.createElement(Se.a,Object.assign({},Va,{xl:{span:18},md:{span:12}}),r.a.createElement(U.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(z.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(z.a,{onClick:this.handleReset},"Reset")),r.a.createElement(z.a,{type:"dashed",onClick:a},"Create")))))}}]),t}(n.Component),Ba=Y.a.create()(qa),Ka=Y.a.Item,Ua=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={lotNumbers:[],loading:!1,modalVisible:!1,modalType:"create",currentItem:{}},a.getAllLotNumbers=function(){a.setState({loading:!0}),ta().then(function(e){a.setState({lotNumbers:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))})},a.handleReset=function(){var e=a.props.form,t=e.getFieldsValue,n=e.setFieldsValue,r=t();for(var l in r)({}).hasOwnProperty.call(r,l)&&(r[l]instanceof Array?r[l]=[]:r[l]=void 0);n(r),a.handleSubmit()},a.showModal=function(){a.setState({modalVisible:!0})},a.showEditModal=function(e){a.setState({modalVisible:!0,currentItem:e,modalType:"update"})},a.handleCancel=function(){a.setState({modalVisible:!1})},a.handleModalSubmit=function(e){e.preventDefault();var t=a.props.form,n=a.state.currentItem,r=n?n._id:"";t.validateFields(function(e,n){e||aa({lotNumber:n.lotNumber}).then(function(e){var l;Array.isArray(e.data)&&e.data.length>0?V.a.error("Item is already exists. Please enter new record."):r?function(e,t){return ce.put("".concat($).concat(ea,"/").concat(e),t).then(J).catch(Z)}(r,n).then(function(e){t.resetFields(),a.setState({modalVisible:!1,modalType:"create"}),a.getAllLotNumbers()}).catch(function(e){V.a.error("".concat(e))}):(l=n,ce.post("".concat($).concat(ea),l).then(J).catch(Z)).then(function(){t.resetFields(),a.setState({modalVisible:!1}),a.getAllLotNumbers()}).catch(function(e){V.a.error("".concat(e))})}).catch(function(e){V.a.error("".concat(e))})})},a.handleDelete=function(e){(function(e){return ce.delete("".concat($).concat(ea,"/").concat(e)).then(J).catch(Z)})(e).then(function(){a.getAllLotNumbers()}).catch(function(e){V.a.error("".concat(e))})},a.deleteItem=function(e){ze.a.confirm({title:"Delete LOT Number",content:"Do you want to delete this lot number?",onOk:function(){return a.handleDelete(e._id)}})},a.handleMenuClick=function(e,t){"edit"===t.key?(a.setState({currentItem:e}),a.showEditModal(e)):"delete"===t.key&&a.deleteItem(e)},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({lotNumbers:e,loading:!1})},a.saveFormRef=function(e){a.formRef=e},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllLotNumbers()}},{key:"render",value:function(){var e=this,t=this.state,a=t.lotNumbers,n=t.loading,l=t.currentItem,i=void 0===l?{}:l,c=t.modalType,o=t.modalVisible,s=this.props.form.getFieldDecorator,u=[{title:"LOT Number",dataIndex:"lotNumber",key:"lotNumber"},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Qe,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"},{key:"delete",name:"Delete"}]})}}],d={item:"create"===c?{}:i,visible:o,maskClosable:!1,title:"create"===c?"Create LOT Number":"Update LOT Number",centered:!0};return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"inbox"}),r.a.createElement("span",null,"LOT Numbers"))),r.a.createElement(Be,{inner:!0},r.a.createElement(Ba,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults,onAddItem:this.showModal}),r.a.createElement(Ie.a,{bordered:!0,loading:n,rowKey:"_id",columns:u,dataSource:a,size:"small",pagination:{pageSize:25}}),r.a.createElement(ze.a,Object.assign({},d,{onCancel:this.handleCancel,onOk:this.handleModalSubmit}),r.a.createElement(Y.a,{onSubmit:e.handleSubmit},r.a.createElement(Ka,Object.assign({label:"LOT Number",hasFeedback:!0},e.formLayout),s("lotNumber",{initialValue:i.firstName,rules:[{required:!0}]})(r.a.createElement(K.a,{placeholder:"LOT Number"})))))))}}]),t}(n.Component),za=Y.a.create()(Ua),_a=Y.a.Item,Ga=fe.a.Option,Qa=Object(_e.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),Xa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={bins:[],lotNumbers:[],materials:[],currentItem:{},searchValue:"",modalVisible:!1,loading:!1},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.searchBins=function(e){a.setState({loading:!0,searchValue:e}),function(e){return ce.get("".concat($).concat(We,"/search").concat(e)).then(J).catch(Z)}(e).then(function(e){a.setState({bins:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))})},a.handleSearch=function(e){e.preventDefault(),e.stopPropagation();var t="",n=a.props.form.getFieldsValue(["code"]).code,r=a.props.form.getFieldsValue(["lotNumber"]).lotNumber,l=a.props.form.getFieldsValue(["itemCode"]).itemCode;n&&(t+=-1===t.indexOf("?")?"?":"&",t+="code=".concat(encodeURIComponent(n))),r&&(t+=-1===t.indexOf("?")?"?":"&",t+="lotNumber=".concat(encodeURIComponent(r))),l&&(t+=-1===t.indexOf("?")?"?":"&",t+="itemCode=".concat(encodeURIComponent(l))),a.searchBins(t)},a.handleReset=function(e){a.props.form.resetFields(),a.searchBins("")},a.handleItemClick=function(e){a.setState({modalVisible:!0,currentItem:e})},a.handleCancel=function(){a.setState({modalVisible:!1,currentItem:{}})},a.handleModalSubmit=function(e){e.preventDefault();var t=a.props.form,n=a.state.currentItem;t.validateFields(function(e,r){var l,i,c;e||(l=n.bin,i=n._id,c=r,ce.put("".concat($).concat(We,"/").concat(l,"/stocks/").concat(i),c).then(J).catch(Z)).then(function(e){t.resetFields(),a.setState({modalVisible:!1}),a.searchBins(a.state.searchValue)}).catch(function(e){V.a.error("".concat(e))})})},a.deleteItem=function(){ze.a.confirm({title:"Delete Stock Item",content:"Do you want to delete this stock item?",onOk:function(){return a.handleDelete()}})},a.handleDelete=function(){var e,t,n=a.state.currentItem;console.log("Item:",n),(e=n.bin,t=n._id,ce.delete("".concat($).concat(We,"/").concat(e,"/stock/").concat(t)).then(J).catch(Z)).then(function(e){V.a.info(e.message),a.setState({modalVisible:!1,currentItem:{}}),a.searchBins("")}).catch(function(e){V.a.error("".concat(e))})},a.validateNetWeight=function(e,t,n){var r=a.props.form;t&&t>r.getFieldValue("grossWeight")?n("Net weight should be less than or equal to Gross weight."):n()},a.validateGrossWeight=function(e,t,n){var r=a.props.form;t&&t<r.getFieldValue("netWeight")?n("Gross weight should be greater than or equal to Net weight."):n()},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.searchBins("")}},{key:"render",value:function(){var e=this,t=this.state,a=t.bins,n=t.lotNumbers,l=t.materials,i=t.loading,c=t.currentItem,o=t.modalVisible,s=this.props.form.getFieldDecorator,u={item:c,visible:o,maskClosable:!1,title:"Update Stock - [".concat(c.lotNumber,"]::[").concat(c.itemCode,"]::[").concat(c.runningNumber,"]"),centered:!0},d=function(e){return r.a.createElement("div",null,e.code," - ",r.a.createElement(ye.a,{color:"#87d068"},e.stockItems.length))};return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"stock"}),r.a.createElement("span",null,"Stocks"))),r.a.createElement(Be,{inner:!0},r.a.createElement(q.a,{tip:"Loading...",spinning:i},r.a.createElement(U.a,{style:{margin:10}},r.a.createElement(Se.a,null,r.a.createElement(et.a,{color:"#bae637",text:"Available",style:{marginLeft:20}}),r.a.createElement(et.a,{color:"#ffa940",text:"Details Pending",style:{marginLeft:20}}),r.a.createElement(et.a,{color:"#9254de",text:"Reserved",style:{marginLeft:20}}),r.a.createElement(et.a,{color:"#eb2f96",text:"Dispatched",style:{marginLeft:20}}))),r.a.createElement(Y.a,{onSubmit:this.handleSearch},r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{xl:{span:4},md:{span:4}},s("code")(r.a.createElement(oa.a,{dataSource:a.map(function(e){return e.code}),filterOption:!0,placeholder:"Bin code"},r.a.createElement(K.a,{suffix:r.a.createElement(v.a,{type:"search"})})))),r.a.createElement(Se.a,{xl:{span:6},md:{span:4}},s("lotNumber")(r.a.createElement(oa.a,{dataSource:n.map(function(e){return e.lotNumber}),filterOption:!0,placeholder:"LOT Number"},r.a.createElement(K.a,{suffix:r.a.createElement(v.a,{type:"search"})})))),r.a.createElement(Se.a,{xl:{span:4},md:{span:4}},s("itemCode")(r.a.createElement(oa.a,{dataSource:l.map(function(e){return e.code}),filterOption:!0,placeholder:"Material Code"},r.a.createElement(K.a,{suffix:r.a.createElement(v.a,{type:"search"})})))),r.a.createElement(Se.a,Object.assign({},Qa,{xl:{span:10},md:{span:12}}),r.a.createElement(U.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(z.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(z.a,{onClick:this.handleReset},"Reset")))))),r.a.createElement("div",null,r.a.createElement(sa.a,{grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:6,xxl:3},dataSource:a,renderItem:function(t){return r.a.createElement(sa.a.Item,null,r.a.createElement(ke.a,{title:d(t),bodyStyle:{padding:2}},r.a.createElement(z.a.Group,null,t.stockItems.map(function(t){return function(t){var a="#bae637";return"PENDING"===t.detailsStatus?a="#ffa940":"RESERVED"===t.status?a="#9254de":"DISPATCHED"===t.status&&(a="#eb2f96"),r.a.createElement(z.a,{size:"small",key:t._id,onClick:function(a){a.preventDefault(),e.handleItemClick(t)},style:{margin:2,backgroundColor:a}},"".concat(t.itemCode,"(").concat(t.runningNumber,")"))}(t)}))))}})),r.a.createElement(ze.a,Object.assign({},u,{onCancel:this.handleCancel,onOk:this.handleModalSubmit,footer:[r.a.createElement(z.a,{key:"delete",onClick:this.deleteItem},"Delete"),r.a.createElement(z.a,{key:"cancel",onClick:this.handleCancel},"Cancel"),r.a.createElement(z.a,{key:"ok",type:"primary",onClick:this.handleModalSubmit},"OK")]}),r.a.createElement(Y.a,{onSubmit:e.handleSubmit},r.a.createElement(_a,Object.assign({label:"Net Weight",hasFeedback:!0},e.formLayout),s("netWeight",{initialValue:c.netWeight,rules:[{required:!1,message:"Please input the Net weight!"},{validator:e.validateNetWeight}]})(r.a.createElement(be.a,{placeholder:"Net Weight"}))),r.a.createElement(_a,Object.assign({label:"Gross Weight",hasFeedback:!0},e.formLayout),s("grossWeight",{initialValue:c.grossWeight,rules:[{required:!1,message:"Please input the Gross weight!"},{validator:e.validateGrossWeight}]})(r.a.createElement(be.a,{placeholder:"Gross Weight"}))),r.a.createElement(_a,Object.assign({label:"Items",hasFeedback:!0},e.formLayout),s("cones",{initialValue:c.cones,rules:[{required:!1,message:"Please input the Items"}]})(r.a.createElement(be.a,{placeholder:"#of Items"}))),r.a.createElement(_a,Object.assign({label:"Running Number",hasFeedback:!0},e.formLayout),s("runningNumber",{initialValue:c.runningNumber,rules:[{required:!1,message:"Please input the running number"}]})(r.a.createElement(K.a,{placeholder:"Running Number"}))),r.a.createElement(_a,Object.assign({label:"Status",hasFeedback:!0},e.formLayout),s("status",{initialValue:c.status,rules:[{required:!1,message:"Please select status"}]})(r.a.createElement(fe.a,null,r.a.createElement(Ga,{value:"AVAILABLE"},"AVAILABLE"),r.a.createElement(Ga,{value:"RESERVED"},"RESERVED"),r.a.createElement(Ga,{value:"DISPATCHED"},"DISPATCHED"),r.a.createElement(Ga,{value:"FACTORY_RECEIVED"},"FACTORY_RECEIVED")))))))))}}]),t}(n.Component),Ja=Y.a.create()(Xa),Ha=K.a.Search,Za=Object(_e.a)({},{xs:24,sm:12,style:{marginBottom:16}},{xl:96}),$a=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=function(e){e.preventDefault(),e.stopPropagation(),a.props.form.validateFields(function(e,t){var n;e||(a.props.showSearchLoading(!0),(n=t,ce.post("".concat($).concat(We,"/filter"),n).then(J).catch(Z)).then(function(e){a.props.onSearchResults(e.data)}).catch(function(e){V.a.error("".concat(e))}))})},a.handleReset=function(e){a.props.form.resetFields(),a.handleSearch(e)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onAddItem,n=t.getFieldDecorator;return r.a.createElement(Y.a,{onSubmit:this.handleSearch,layout:"inline"},r.a.createElement(U.a,{gutter:24},r.a.createElement(Se.a,{xl:{span:6},md:{span:12}},n("code")(r.a.createElement(Ha,{placeholder:"Code"}))),r.a.createElement(Se.a,Object.assign({},Za,{xl:{span:18},md:{span:12}}),r.a.createElement(U.a,{type:"flex",align:"middle",justify:"space-between"},r.a.createElement("div",null,r.a.createElement(z.a,{type:"primary",className:"margin-right",onClick:this.handleSearch},"Search"),r.a.createElement(z.a,{onClick:this.handleReset},"Reset")),r.a.createElement(z.a,{type:"dashed",onClick:a},"Create")))))}}]),t}(n.Component),en=Y.a.create()($a),tn=Y.a.Item,an={labelCol:{span:6},wrapperCol:{span:14}},nn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={items:[],loading:!1,modalVisible:!1,modalType:"create",currentItem:{}},a.getAllBins=function(){a.setState({loading:!0}),Te().then(function(e){a.setState({items:e.data,loading:!1})}).catch(function(e){a.setState({loading:!1}),V.a.error("".concat(e))})},a.handleReset=function(){var e=a.props.form,t=e.getFieldsValue,n=e.setFieldsValue,r=t();for(var l in r)({}).hasOwnProperty.call(r,l)&&(r[l]instanceof Array?r[l]=[]:r[l]=void 0);n(r),a.handleSubmit()},a.showModal=function(){a.setState({modalVisible:!0})},a.showEditModal=function(e){a.setState({modalVisible:!0,currentItem:e,modalType:"update"})},a.handleCancel=function(){a.setState({modalVisible:!1})},a.handleModalSubmit=function(e){e.preventDefault();var t=a.props.form,n=a.state.currentItem,r=n?n._id:"";t.validateFields(function(e,n){var l;e||(r?function(e,t){return ce.put("".concat($).concat(We,"/").concat(e),t).then(J).catch(Z)}(r,n).then(function(){t.resetFields(),a.setState({modalVisible:!1,modalType:"create"}),a.getAllBins()}).catch(function(e){V.a.error("".concat(e))}):(l=n,ce.post("".concat($).concat(We),l).then(J).catch(Z)).then(function(){t.resetFields(),a.setState({modalVisible:!1}),a.getAllBins()}).catch(function(e){V.a.error("".concat(e))}))})},a.handleDelete=function(e){(function(e){return ce.delete("".concat($).concat(We,"/").concat(e)).then(J).catch(Z)})(e).then(function(){a.getAllBins()}).catch(function(e){V.a.error("".concat(e))})},a.deleteItem=function(e){ze.a.confirm({title:"Delete Bin",content:"Do you want to delete this bin?",onOk:function(){return a.handleDelete(e._id)}})},a.handleMenuClick=function(e,t){"edit"===t.key?(a.setState({currentItem:e}),a.showEditModal(e)):"delete"===t.key&&a.deleteItem(e)},a.showSearchLoading=function(e){a.setState({loading:e})},a.handleSearchResults=function(e){a.setState({suppliers:e,loading:!1})},a.saveFormRef=function(e){a.formRef=e},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllBins()}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.loading,l=t.currentItem,i=void 0===l?{}:l,c=t.modalType,o=t.modalVisible,s=this.props.form.getFieldDecorator,u=[{title:"Bin Code",dataIndex:"code",key:"code"},{title:"Section",dataIndex:"section",key:"section"},{title:"X-Axis Name",dataIndex:"xAxis",key:"xAxis"},{title:"Y-Axis Name",dataIndex:"yAxis",key:"yAxis"},{title:"Remark",dataIndex:"remark",key:"remark"},{title:"Operation",key:"operation",render:function(t,a){return r.a.createElement(Qe,{onMenuClick:function(t){return e.handleMenuClick(a,t)},menuOptions:[{key:"edit",name:"Edit"},{key:"delete",name:"Delete"}]})}}],d={item:"create"===c?{}:i,visible:o,maskClosable:!1,title:"create"===c?"Create Bin":"Update Bin",centered:!0};return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"/dashboard"},r.a.createElement(v.a,{type:"dashboard"}),r.a.createElement("span",null,"Dashboard")),r.a.createElement(Ee.a.Item,null,r.a.createElement(v.a,{type:"appstore"}),r.a.createElement("span",null,"Bins"))),r.a.createElement(Be,{inner:!0},r.a.createElement(en,{showSearchLoading:this.showSearchLoading,onSearchResults:this.handleSearchResults,onAddItem:this.showModal}),r.a.createElement(Ie.a,{bordered:!0,loading:n,rowKey:"_id",columns:u,dataSource:a,size:"small",pagination:{pageSize:25}}),r.a.createElement(ze.a,Object.assign({},d,{onCancel:this.handleCancel,onOk:this.handleModalSubmit}),r.a.createElement(Y.a,{layout:"horizontal",onSubmit:e.handleSubmit},r.a.createElement(tn,Object.assign({label:"Section",hasFeedback:!0},an),s("section",{initialValue:i.section,rules:[{required:!0}]})(r.a.createElement(K.a,{placeholder:"Section"}))),r.a.createElement(tn,Object.assign({label:"X-Axis",hasFeedback:!0},an),s("xAxis",{initialValue:i.xAxis,rules:[{required:!0}]})(r.a.createElement(K.a,{placeholder:"X-Axis"}))),r.a.createElement(tn,Object.assign({label:"Y-Axis",hasFeedback:!0},an),s("yAxis",{initialValue:i.yAxis,rules:[{required:!0}]})(r.a.createElement(be.a,{placeholder:"Y-Axis",min:1}))),r.a.createElement(tn,Object.assign({label:"Remark",hasFeedback:!0},an),s("remark",{initialValue:i.remark})(r.a.createElement(K.a,{placeholder:"Remark"})))))))}}]),t}(n.Component),rn=Y.a.create()(nn),ln=(a(430),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(h.a,null,r.a.createElement(p.a,{exact:!0,path:"/"},r.a.createElement(g.a,{to:"/dashboard"})),r.a.createElement(y,{path:"/login",component:he}),r.a.createElement(P,{path:"/dashboard",component:pe}),r.a.createElement(P,{path:"/purchase-orders/stock-update/:id",component:ha}),r.a.createElement(P,{path:"/purchase-orders/stocks-print/:id",component:ga}),r.a.createElement(P,{path:"/purchase-orders/add",component:ia}),r.a.createElement(P,{path:"/purchase-orders/edit/:id",component:ia}),r.a.createElement(P,{path:"/purchase-orders/good-received",component:$t}),r.a.createElement(P,{path:"/purchase-orders/list",component:Ht}),r.a.createElement(P,{path:"/purchase-orders/view/:id",component:fa}),r.a.createElement(P,{path:"/items",component:ut}),r.a.createElement(P,{path:"/material-request/view/:id",component:tt}),r.a.createElement(P,{path:"/material-request/list",component:Ze}),r.a.createElement(P,{path:"/material-request/add",component:Ue}),r.a.createElement(P,{path:"/suppliers",component:It}),r.a.createElement(P,{path:"/packing-types",component:At}),r.a.createElement(P,{path:"/deliveries/add",component:va}),r.a.createElement(P,{path:"/deliveries/edit/:id",component:Fa}),r.a.createElement(P,{path:"/deliveries/view/:id",component:Pa}),r.a.createElement(P,{path:"/deliveries",component:wa}),r.a.createElement(P,{path:"/lot-numbers",component:za}),r.a.createElement(P,{path:"/stocks",component:Ja}),r.a.createElement(P,{path:"/bins",component:rn}),r.a.createElement(P,{path:"/roles",component:Pt}),r.a.createElement(P,{path:"/users",component:_t})))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ln,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[220,1,2]]]);
//# sourceMappingURL=main.132d589c.chunk.js.map